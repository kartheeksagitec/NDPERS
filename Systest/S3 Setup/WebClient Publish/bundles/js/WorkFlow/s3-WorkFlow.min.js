app.controller("WorkFlowMapsController",["$scope","$http","$rootScope","ngDialog","$EntityIntellisenseFactory","$NavigateToFileService","$timeout","$filter",function(n,t,i,r,u,f,e,o){n.lstValueSource=[" ","Constant","Object Field","Parameter"];n.isDirty=!1;i.IsLoading=!0;n.currentfile=i.currentopenfile.file;n.objProcessDetails;n.objActivity={};n.objActivityForm={};n.objWorkFlowFormParams={};n.objWorkFlowFormParams.AddParamGridRow=[];n.objBusinessObject={};n.objBusinessObject.ObjTree=undefined;n.objWorkFlowDetail={};n.selectedDesignSource=!1;n.objWorkFlow={};n.showRefID=!0;n.IsActivity=!0;n.lstActivityFormName=[];n.lstBusinessObject=[];n.objWorkFlow.SelecetdField=undefined;n.objBusinessObjectTree={};n.objBusinessObjectTree.lstmultipleselectedfields=[];n.objBusinessObjectTree.lstCurrentBusinessObjectProperties=[];n.objBusinessObjectTree.lstdisplaybusinessobject=[];hubMain.server.getModel(n.currentfile.FilePath,n.currentfile.FileType).done(function(t){t?n.receiveWorkflowMapModel(t):i.closeFile(n.currentfile.FileName)});n.receiveWorkflowMapModel=function(t){n.$apply(function(){n.WorkflowMapModel=t;n.objFormExtraFields=[];n.SelectedActivityClick(n.WorkflowMapModel.Elements[0]);for(var i=0;i<n.WorkflowMapModel.Elements.length;i++)n.WorkflowMapModel.Elements[i].Name=="ProcessVariables"&&(n.objProcessDetails=n.WorkflowMapModel.Elements[i]);n.objProcessDetails||(n.objProcessDetails=n.CreateNewObject("ProcessVariables",n.WorkflowMapModel))});$.connection.hubForm.server.getRemoteObjectList().done(function(t){n.receiveRemoteObjectCollection(t)});n.GetActivityForms=function(){for(var i,r=[],t=0;t<n.WorkflowMapModel.Elements.length;t++)if(n.WorkflowMapModel.Elements[t].Name=="activity")for(i=0;i<n.WorkflowMapModel.Elements[t].Elements.length;i++)n.WorkflowMapModel.Elements[t].Elements[i].Name=="form"&&n.WorkflowMapModel.Elements[t].Elements[i].dictAttributes.sfwFormName&&(r.length==0?r.push(n.WorkflowMapModel.Elements[t].Elements[i].dictAttributes.sfwFormName):r.some(function(r){return r==n.WorkflowMapModel.Elements[t].Elements[i].dictAttributes.sfwFormName})||r.push(n.WorkflowMapModel.Elements[t].Elements[i].dictAttributes.sfwFormName));return r};n.receiveRemoteObjectCollection=function(t){t&&n.$evalAsync(function(){n.objRemoteObjectCollection=t;for(var i=0;i<n.WorkflowMapModel.Elements.length;i++)if(n.WorkflowMapModel.Elements[i].Name=="activity"){n.SelectedActivityClick(n.WorkflowMapModel.Elements[i]);break}})};n.objWorkFlowDetail.PopulateCorrespondenceTemplate();n.objWorkflowExtraFields=o("filter")(n.WorkflowMapModel.Elements,{Name:"ExtraFields"});n.objWorkflowExtraFields.length>0&&(n.objWorkflowExtraFields=n.objWorkflowExtraFields[0]);n.objWorkflowExtraFields.length==0&&(n.objWorkflowExtraFields={Name:"ExtraFields",Value:"",dictAttributes:{},Elements:[]});n.$evalAsync(function(){i.IsLoading=!1});n.ActiveTab("Activities")};n.CreateNewObject=function(n,t){var i={Name:n,Value:"",dictAttributes:{},Elements:[]};return t.Elements.push(i),i};n.showSource=!1;n.ShowDesign=function(){var t,c,u,o,e;if(n.selectedDesignSource==!0&&(t=$("#"+i.currentopenfile.file.FileName).find("#code-html").val(),t!=null&&t!="")){if(i.IsLoading=!0,c=$("#"+i.currentopenfile.file.FileName).find("#code-html"),u=getLineNumber(c),t.length<32e3)hubMain.server.getDesignXmlString(t,i.currentopenfile.file,u);else{o=[];o[0]=u>0?u:1;var r="",h=[],f=0;for(e=0;e<t.length;e++)f++,r=r+t[e],f==32e3&&(f=0,h.push(r),r="");f!=0&&h.push(r);s(h,i.currentopenfile.file,"Source-Design",o)}n.receivedesignxmlobject=function(t,r){n.isSourceDirty&&(n.isSourceDirty=!1);n.$evalAsync(function(){var t,f,u;if(i.IsLoading=!1,r!=null&&r!=""){if(t=[],r.contains("-")||r.contains(","))for(f=n.WorkflowMapModel,u=0;u<r.split(",").length;u++)f=n.FindNodeHierarchy(f,r.split(",")[u].substring(r.split(",")[u].lastIndexOf("-")+1)),t.push(f);t&&t.length>0&&t[0]&&t[0].Name==="activity"&&n.SelectedActivityClick(t[0])}});n.$evalAsync(function(){i.IsLoading=!1;n.selectedDesignSource=!1})}}};n.isSourceDirty;n.sourceChanged=function(){n.isSourceDirty=!0;n.isDirty=!0;n.SearchSource.IsSearchCriteriaChange=!0};var s=function(n,t,i,r){for(var u=0;u<n.length;u++)hubMain.server.receiveDataPackets(n[u],n.length,t,u,i,r)};n.ShowSource=function(){var y,a,v,c,t,o;if(n.selectedDesignSource==!1&&(n.selectedDesignSource=!0,a=[],n.WorkflowMapModel)){i.IsLoading=!0;var p=GetBaseModel(n.WorkflowMapModel),u=JSON.stringify(p),h=[];if(n.WorkflowMapModel&&n.selectedCurrentActivityRecord&&(c=[],t=undefined,t=n.selectedCurrentActivityRecord,n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="User"||n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="Wait"?n.showRefID==!0&&n.selectedNoRefParamter?t=n.selectedNoRefParamter:n.showRefID==!1&&n.selectedWithRefParamter&&(t=n.selectedWithRefParamter):n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="Code"?t=n.selectedCustomModelParameter:(n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="GenerateCommunication"||n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="SendCommunication")&&(t=n.selectedCustomModelParameter),y=n.FindDeepNode(n.WorkflowMapModel,t,c),v=n.getPathSource(n.WorkflowMapModel,c,a),angular.copy(v,h)),u.length<32e3)hubMain.server.getSourceXmlObject(u,i.currentopenfile.file,h);else{var r="",l=[],f=0;for(o=0;o<u.length;o++)f++,r=r+u[o],f==32e3&&(f=0,l.push(r),r="");f!=0&&l.push(r);s(l,i.currentopenfile.file,"Design-Source",h)}n.receivesourcexml=function(t,r){n.$apply(function(){n.xmlSource=t;n.SearchSource={};n.SearchSource.txtarea=$("#"+i.currentopenfile.file.FileName).find("#code-html");n.SearchSource.txtarea[0].onkeydown=function(t){t.ctrlKey&&t.keyCode==70&&(n.$evalAsync(function(){n.SearchSource.IsEnable=!0}),t.preventDefault())};n.SearchSource.txtarea[0].value=t;e(function(){selectTextareaLine(n.SearchSource.txtarea,r)});e(function(){scrollTextArea(n.SearchSource.txtarea,r)});n.$evalAsync(function(){i.IsLoading=!1});window.navigator.userAgent.toLowerCase().contains("chrome")&&n.$evalAsync(function(){i.IsLoading=!1})})}}};n.FindNodeHierarchy=function(n,t){if(n&&n.Elements){var i=n.Elements[t];return i==undefined&&(i=n.Elements[t-1]),i}};n.FindDeepNode=function(t,i,r){return t&&angular.forEach(t.Elements,function(t){var u=n.isValidObject(t,i);return(u&&r.push(t),t==i)?i:t.Elements&&t.Elements.length>0?i=n.FindDeepNode(t,i,r):void 0}),i};n.getPathSource=function(n,t,i){for(var u,r=0;r<t.length;r++)r==0?(u=n.Elements.indexOf(t[r]),i.push(u)):(u=t[r-1].Elements.indexOf(t[r]),i.push(u));return i};n.isValidObject=function(t,i){var u,r;if(t==i)return!0;for(r in t.Elements){if(t.Elements[r]==i)return!0;if(t.Elements[r].Elements&&t.Elements[r].Elements.length>0)for(iele in t.Elements[r].Elements)if(u=n.isValidObject(t.Elements[r].Elements[iele],i),u==!0)return u}return u};n.addExtraFieldsDataInToMainModel=function(){if(n.objWorkflowExtraFields){var t=n.WorkflowMapModel.Elements.indexOf(n.objWorkflowExtraFields);t==-1&&n.WorkflowMapModel.Elements.push(n.objWorkflowExtraFields)}};n.BeforeSaveToFile=function(){n.addExtraFieldsDataInToMainModel()};n.SelectedActivityClick=function(t){var u,f,r;if(t){for(n.selectedDesignSource&&n.showRefID==!0?(n.changeTab("noRef"),n.selectedWithRefParamter=undefined):n.selectedDesignSource&&n.showRefID==!1?(n.changeTab("withRef"),n.selectedNoRefParamter=undefined):(n.changeTab("noRef"),n.selectedWithRefParamter=undefined),i.IsLoading=!0,n.selectedCurrentActivityRow=undefined,n.selectedCurrentActivityRecord=t,n.objWithNoRef=undefined,n.objWithRef=undefined,u=[],f=[],r=0;r<n.selectedCurrentActivityRecord.Elements.length;r++)n.selectedCurrentActivityRecord.Elements[r].Name=="form"?n.selectedCurrentActivityRecord.Elements[r].dictAttributes.sfwMode?n.selectedCurrentActivityRecord.Elements[r].dictAttributes.sfwMode=="new"?n.objWithNoRef=n.selectedCurrentActivityRecord.Elements[r]:n.selectedCurrentActivityRecord.Elements[r].dictAttributes.sfwMode=="update"&&(n.objWithRef=n.selectedCurrentActivityRecord.Elements[r]):(n.selectedCurrentActivityRecord.Elements.splice(r,1),r--):n.selectedCurrentActivityRecord.Elements[r].Name=="communication"?n.selectedCommunicationRecord=n.selectedCurrentActivityRecord.Elements[r]:n.selectedCurrentActivityRecord.Elements[r].Name=="custommethod"&&(n.customMethodsModel=n.selectedCurrentActivityRecord.Elements[r]);n.selectedCurrentActivityRecord&&(n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="User"||n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="Wait")&&(n.objWithNoRef||(n.objWithNoRef={Name:"form",Value:"",dictAttributes:{sfwMode:"new"},Elements:[],Children:[]},n.selectedCurrentActivityRecord.Elements.push(n.objWithNoRef)),n.objWithNoRef&&n.objWithNoRef.Elements.length>0&&(u=n.CreateDummyParamsList(n.objWithNoRef.Elements)),n.objWithRef||(n.objWithRef={Name:"form",Value:"",dictAttributes:{sfwMode:"update"},Elements:[],Children:[]},n.selectedCurrentActivityRecord.Elements.push(n.objWithRef)),n.objWithRef&&n.objWithRef.Elements.length>0&&(f=n.CreateDummyParamsList(n.objWithRef.Elements)));n.selectedCurrentActivityRecord&&n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="Code"&&(n.customMethodsModel||(n.customMethodsModel={Name:"custommethod",Value:"",dictAttributes:{},Elements:[],Children:[]}),n.customMethodsModel&&n.customMethodsModel.Elements.length>0&&(u=n.CreateDummyParamsList(n.customMethodsModel.Elements)));n.selectedCurrentActivityRecord&&(n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="SendCommunication"||n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="GenerateCommunication")&&n.selectedCommunicationRecord&&n.selectedCommunicationRecord.Elements.length>0&&(u=n.CreateDummyParamsList(n.selectedCommunicationRecord.Elements));n.onRemoteObjectChangedInWorkFlow();n.RetainParamValuesByActivity(u,f);i.IsLoading=!1}};n.CreateDummyParamsList=function(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t]);return i};n.RetainParamValuesByActivity=function(t,i){n.selectedCurrentActivityRecord&&(n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="User"||n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="Wait")?(n.objWithNoRef&&n.objWithNoRef.Elements.length>0&&n.RetainParamValues(t,n.objWithNoRef.Elements),n.objWithRef&&n.objWithRef.Elements.length>0&&n.RetainParamValues(i,n.objWithRef.Elements)):n.selectedCurrentActivityRecord&&(n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="SendCommunication"||n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="GenerateCommunication")?n.selectedCommunicationRecord&&n.selectedCommunicationRecord.Elements.length>0&&n.RetainParamValues(t,n.selectedCommunicationRecord.Elements):n.customMethodsModel&&n.customMethodsModel.Elements.length>0&&n.RetainParamValues(t,n.customMethodsModel.Elements)};n.RetainParamValues=function(n,t){for(var r,i=0;i<t.length;i++)r=n.filter(function(n){return n.dictAttributes.sfwParamaterName===t[i].dictAttributes.sfwParamaterName}),r&&r.length>0&&(t[i].dictAttributes.sfwValueSource=r[0].dictAttributes.sfwValueSource,t[i].dictAttributes.sfwParameterValue=r[0].dictAttributes.sfwParameterValue)};n.methodModeChange=function(t){var r="";n.showRefID?n.objWithNoRef&&(n.objWithNoRef.Elements=[],r=n.objWithNoRef.dictAttributes.sfwFormName):n.showRefID||n.objWithRef&&(n.objWithRef.Elements=[],n.objWithRef.dictAttributes&&(r=n.objWithRef.dictAttributes.sfwFormName));r&&$.connection.hubForm.server.getNewFormModel(r).done(function(t){n.receivenewformmodel(t)});n.receivenewformmodel=function(r){r&&n.$apply(function(){var a,f,h,e,p,l,o;i.IsLoading=!1;var s=r,w=s.dictAttributes.sfwType,b=w.toUpperCase().trim()=="LOOKUP",l={Name:"parameter",Value:"",dictAttributes:{},Elements:[]};if(b)a=GetCriteriaPanel(s.Elements[1]),a&&angular.forEach(a.Elements,function(t){angular.forEach(t.Elements,function(t){t&&angular.forEach(t.Elements,function(t){var r,f,u;"sfwDataField"in t.dictAttributes&&(r=t.dictAttributes.sfwDataField,f=t.dictAttributes.sfwDataType,r!=""&&r!=undefined&&(u={Name:"parameter",Value:"",dictAttributes:{sfwParameterSource:"Criteria Field",sfwParamaterName:r,sfwDataType:f,sfwFieldName:r,sfwParameterValue:"",sfwValueSource:""},Elements:[]},n.showRefID?i.PushItem(u,n.objWithNoRef.Elements):i.PushItem(u,n.objWithRef.Elements)))})})});else if(h=s.Elements.filter(function(n){return n.Name=="initialload"}),h&&h.length>0&&(f=h[0]),f)for(e=0;e<f.Elements.length;e++)if(f.Elements[e].Name=="callmethods"){if((!f.Elements[e].dictAttributes.sfwMode||f.Elements[e].dictAttributes.sfwMode&&f.Elements[e].dictAttributes.sfwMode.toLowerCase()==t)&&f.Elements[e].dictAttributes.sfwMethodName){var c=f.Elements[e].dictAttributes.sfwMethodName,y=u.getEntityIntellisense(),v=y.filter(function(n){return n.EntityName==s.dictAttributes.sfwEntity});if(v&&v.length>0&&(n.objBusinessObjectName=v[0].BusinessObjectName),s.dictAttributes.sfwRemoteObject!=undefined&&s.dictAttributes.sfwRemoteObject!=""){if(p=GetServerMethodObject(s.dictAttributes.sfwRemoteObject,n.objRemoteObjectCollection),o=GetSrvMethodParameters(p,c),o)for(j=0;j<o.length;j++)l={Name:"parameter",Value:"",dictAttributes:{sfwParameterSource:c,sfwParamaterName:o[j].dictAttributes.ID,sfwDataType:o[j].dictAttributes.sfwDataType,sfwFieldName:o[j].dictAttributes.ID,sfwParameterValue:"",sfwValueSource:""},Elements:[]},n.showRefID?i.PushItem(l,n.objWithNoRef.Elements):i.PushItem(l,n.objWithRef.Elements)}else o=GetEntityXMLMethodParameters(y,s.dictAttributes.sfwEntity,c),o&&angular.forEach(o,function(t){var r={Name:"parameter",Value:"",dictAttributes:{sfwParameterSource:c,sfwParamaterName:t.ID,sfwDataType:t.DataType,sfwFieldName:t.ID,sfwParameterValue:"",sfwValueSource:""},Elements:[]};n.showRefID?i.PushItem(r,n.objWithNoRef.Elements):i.PushItem(r,n.objWithRef.Elements)})}}else f.Elements[e].Name=="session"&&angular.forEach(f.Elements[e].Elements,function(t){var r={Name:"parameter",Value:"",dictAttributes:{sfwParameterSource:"Session Field",sfwParamaterName:t.dictAttributes.ID,sfwDataType:t.dictAttributes.sfwDataType,sfwFieldName:t.dictAttributes.ID,sfwParameterValue:"",sfwValueSource:""},Elements:[]};n.showRefID?i.PushItem(r,n.objWithNoRef.Elements):i.PushItem(r,n.objWithRef.Elements)})})}};n.changeTab=function(t){t&&t=="noRef"?n.showRefID=!0:t&&t=="withRef"&&(n.showRefID=!1)};n.ActiveTab=function(t){if(n.lstBusinessObject=["busActivityInstance"],t&&t=="Activities")n.objBusinessObjectTree.busObjectName="busActivityInstance",n.IsActivity=!0,n.changeTab("noRef");else if(t&&t=="ProcessVariable"){var i=undefined;n.lstBusinessObject.push("busProcessInstance");i=n.GetActivityForms();i.length>0&&$.connection.hubWorkflowMap.server.getRemoteObjectList(i).done(function(t){n.$evalAsync(function(){if(t)for(var i=0;i<t.length;i++)n.lstBusinessObject.push(t[i])})});n.IsActivity=!1}};n.OnActiveFormValueChangeInWorkFlow=function(){n.showRefID?n.objWithNoRef&&n.objWithNoRef.dictAttributes&&n.methodModeChange(n.objWithNoRef.dictAttributes.sfwFormMode):n.showRefID||n.methodModeChange("update")};n.onRemoteObjectChangedInWorkFlow=function(){var t;n.selectedCurrentActivityRecord&&(n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="SendCommunication"||n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="GenerateCommunication")?n.selectedCommunicationRecord&&n.selectedCommunicationRecord.dictAttributes&&n.selectedCommunicationRecord.dictAttributes.sfwRemoteObject&&n.objRemoteObjectCollection&&(t=n.objRemoteObjectCollection.filter(function(t){return t.dictAttributes.ID==n.selectedCommunicationRecord.dictAttributes.sfwRemoteObject}),t&&t.length>0&&(n.SrvMethodCollection=t[0].Elements,n.SrvMethodCollection.splice(0,0,{dictAttributes:{ID:""}})),n.getParametersonMethodChange()):n.customMethodsModel&&n.customMethodsModel.dictAttributes&&n.customMethodsModel.dictAttributes.sfwRemoteObject&&n.objRemoteObjectCollection&&(t=n.objRemoteObjectCollection.filter(function(t){return t.dictAttributes.ID==n.customMethodsModel.dictAttributes.sfwRemoteObject}),t&&t.length>0&&(n.SrvMethodCollection=t[0].Elements,n.SrvMethodCollection.splice(0,0,{dictAttributes:{ID:""}})),n.getParametersonMethodChange())};n.getParametersonMethodChange=function(){n.selectedCurrentActivityRecord&&(n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="SendCommunication"||n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="GenerateCommunication")?n.AddParameterToActivity(n.selectedCommunicationRecord):n.selectedCurrentActivityRecord&&n.selectedCurrentActivityRecord.dictAttributes.sfwActivityType=="Code"&&n.AddParameterToActivity(n.customMethodsModel)};n.AddParameterToActivity=function(t){var u,r,f;if(t&&t.dictAttributes.sfwRemoteObject&&t.dictAttributes.sfwMethodName){if(i.UndRedoBulkOp("Start"),i.EditPropertyValue(t.Elements,t,"Elements",[]),u=GetServerMethodObject(t.dictAttributes.sfwRemoteObject,n.objRemoteObjectCollection),r=GetSrvMethodParameters(u,t.dictAttributes.sfwMethodName),r)for(j=0;j<r.length;j++)f={Name:"parameter",Value:"",dictAttributes:{sfwParamaterName:r[j].dictAttributes.ID,sfwDataType:r[j].dictAttributes.sfwDataType,sfwFieldName:r[j].dictAttributes.ID,sfwParameterValue:"",sfwValueSource:""},Elements:[]},i.PushItem(f,t.Elements);i.UndRedoBulkOp("End")}};n.objWorkFlowDetail.PopulateCorrespondenceTemplate=function(){i.IsLoading=!0;$.connection.hubCreateNewObject.server.loadCorrespondenceTemplate(!0).done(function(t){n.objWorkFlowDetail.receiveCorrespondenceTemplate(t)})};n.objWorkFlowDetail.receiveCorrespondenceTemplate=function(t){n.$apply(function(){n.objWorkFlowDetail.CorTemplateCollection=t;i.IsLoading=!1})};n.selectAssociateFormClick=function(n){n&&hubMain.server.navigateToFile(n,"").done(function(n){i.openFile(n,!1)})};n.selectProcessVariable=function(t){t&&(n.selectedProcessVariable=t)};n.addProcessVariable=function(){i.PushItem({Name:"ProcessVariable",Value:"",dictAttributes:{},Elements:[],Children:[]},n.objProcessDetails.Elements,"selectProcessVariable")};n.deleteProcessVariable=function(){var t=-1;n.selectedProcessVariable&&(t=n.objProcessDetails.Elements.indexOf(n.selectedProcessVariable));i.DeleteItem(n.selectedProcessVariable,n.objProcessDetails.Elements);n.selectedProcessVariable=undefined;t<n.objProcessDetails.Elements.length?n.selectedProcessVariable=n.objProcessDetails.Elements[t]:n.objProcessDetails.Elements.length>0&&(n.selectedProcessVariable=n.objProcessDetails.Elements[t-1])};n.canDeleteRow=function(){return n.selectedProcessVariable?!0:!1};n.selectNoRefParamter=function(t){t&&(n.selectedNoRefParamter=t)};n.selectWithRefParamter=function(t){t&&(n.selectedWithRefParamter=t)};n.onDetailClick=function(){var t=n.$new();t.objWorkflowExtraFields=n.objWorkflowExtraFields;t.objDirFunctions={};t.showExtraFieldsTab=!1;t.formName="Workflow";t.objDirFunctions.getExtraFieldData&&(t.objWorkflowExtraFields=t.objDirFunctions.getExtraFieldData());t.dialog=i.showDialog(t,"WorkflowMap Details","WorkFlow/views/WorkflowMapDetails.html",{width:600,height:600});t.OkClick=function(){t.dialog&&(t.objDirFunctions.prepareExtraFieldData&&t.objDirFunctions.prepareExtraFieldData(),t.dialog.close())}};n.selectCustomModelParamter=function(t){t&&(n.selectedCustomModelParameter=t)};n.onChangeBusinessObject=function(t){t&&(n.objBusinessObjectTree.busObjectName=t)};n.RefreshWorkflowMap=function(){i.isLoading=!0;$.connection.hubWorkflowMap.server.refreshMap(n.WorkflowMapModel.dictAttributes.ID).done(function(t){n.$evalAsync(function(){var r,u,o,s,f,h,e;if(t){for(r=t,u=0;u<r.length;u++)o=r[u],s=o.dictAttributes.sfwActivityType,angular.forEach(n.WorkflowMapModel.Elements,function(n){o.dictAttributes.sfwDisplayName==n.dictAttributes.sfwDisplayName&&(n.dictAttributes.sfwActivityType=s,r[u]=n)});for(f=n.WorkflowMapModel.Elements.filter(function(n){return n.Name=="activity"});f.length>0;)h=f.indexOf(f[0]),n.WorkflowMapModel.Elements.splice(h,1),f.splice(0,1);for(e=0;e<r.length;e++)n.WorkflowMapModel.Elements.push(r[e])}i.isLoading=!1;toastr.success("Map Refreshed.")})})};n.ResetValues=function(n){n&&(n.dictAttributes.sfwParameterValue="")}}]);