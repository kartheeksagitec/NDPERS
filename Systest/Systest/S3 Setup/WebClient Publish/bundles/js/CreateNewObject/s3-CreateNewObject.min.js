app.controller("createNewObjectController",["$scope","$http","$rootScope","FormDetailsFactory","$EntityIntellisenseFactory","WizardHandler","$ValidationService","$getEnitityXmlMethods","$filter","$timeout","ConfigurationFactory",function(n,t,i,r,u,f,e,o,s,h,c){var l,p,v,y,a;n.wizardHandler=f;n.objNewItems={};n.objEntityDetail={};n.objUserCtrlDetails={};n.objTooltipDetails={};n.objOneToOne={};n.objOneToOne.ParentTableCollection=[];n.objOneToMany={};n.objOneToMany.ParentTableCollection=[];n.objCodeValues={};n.objEntityDetail.CanFinishDisable=!1;n.objRelatedProperties={};n.IsCodeValueDisable=!0;n.IsOneToOneOrManyDisable=!1;n.objCorrespondenceDetail={};n.objFileDetails={};n.objInboundOutboundDetails={};n.objNewItems.SelectedOption=n.SelectedCreationOption;n.objEntityDetail.validTableName=null;n.lstFolder=[];n.lstMainTable=[];n.lstBusinessObject=[];n.lstMessages=[];n.lstAllFiles=[];n.objDirFunctions={};n.IsSameAsNewDisabled=!0;n.IsSameAsNewForWizardDisabled=!1;n.objWorkflowMapDetails={};n.disableCreateNewFolderBtn=!0;l=c.getLastProjectDetails();l.BaseDirectory&&l.XmlFileLocation&&(n.xmlFileLocation=l.BaseDirectory.endsWith("\\")?l.BaseDirectory+l.XmlFileLocation:l.BaseDirectory+"\\"+l.XmlFileLocation);l=null;n.objLocationCallback={locationCallback:{}};$.connection.hubCreateNewObject.server.getCommonFieldList().done(function(t){t.length==5&&(n.lstMessages=t[0],n.lstFolder=t[1],n.lstMainTable=t[2],n.lstBusinessObject=t[3],n.lstAllFiles=t[4],n.SelectedEntity&&(n.objNewItems.SelectedOption=="Forms"?n.objFormsDetails.isNextDisable():n.objNewItems.SelectedOption=="Wizard"?n.objWizardDetails.isFinsihDisable():n.objNewItems.SelectedOption=="UserControl"?n.objUserCtrlDetails.isFinsihDisable():n.objNewItems.SelectedOption=="Correspondence"?n.objCorrespondenceDetail.isFinishDisable():n.objNewItems.SelectedOption=="HtxLookup"||n.objNewItems.SelectedOption=="HtxMaintenance"||n.objNewItems.SelectedOption=="HtxWizard"?n.objFormLinkDetails.isFormLinkFinish():n.objNewItems.SelectedOption=="Tooltip"&&n.objTooltipDetails.isFinsihDisable()))});$.connection.hubMain.server.getResources("").done(function(t){n.resourceList=e.getListByPropertyName(t,"ResourceID",!1)});p=function(n){return{Name:n,Value:"",dictAttributes:{},Elements:[]}};v=function(t){n.objExtraFields={};n.showExtraFieldsTab=!1;t=="Forms"||t=="Wizard"||t=="UserControl"||t=="Tooltip"?n.objName="Form":t=="BPM Map"||t=="BPMN Map Template"?n.objName="BPM":t=="Html Lookup"||t=="Html Maintenance"||t=="Html Wizard"?n.objName="HTML":t&&(n.objName=t);n.objExtraFields=p("ExtraFields")};n.OnNextPageLoad=function(){n.objNewItems.SelectedOption=="Entity"?(n.objEntityDetail.Init(),n.objEntityDetail.isNextDisableForEntity=!0):n.objNewItems.SelectedOption=="Correspondence"?n.objCorrespondenceDetail.InitCorrespondence():n.objNewItems.SelectedOption=="File"?(n.objFileDetails.InitFile(),n.PopulateBasePath(),n.populatePathCode(),$.connection.hubCreateNewObject.server.getIsPathKeyDetails().done(function(t){n.$evalAsync(function(){n.IsPathKey=t})}),$.connection.hubCreateNewObject.server.getIsFileIdValueValid().done(function(t){n.$evalAsync(function(){n.objFileDetails.IsFileIdValueValid=t})})):n.objNewItems.SelectedOption=="Forms"?n.objFormsDetails.InitForms():n.objNewItems.SelectedOption=="Wizard"?n.objWizardDetails.InitWizard():n.objNewItems.SelectedOption=="UserControl"?n.objUserCtrlDetails.InitUserControl():n.objNewItems.SelectedOption=="Tooltip"?n.objTooltipDetails.InitTooltip():n.objNewItems.SelectedOption=="Report"?n.objReportDetails.InitForms():n.objNewItems.SelectedOption=="BPMN"||n.objNewItems.SelectedOption=="BPMTemplate"?n.initializeBpmn():n.objNewItems.SelectedOption=="HtxLookup"||n.objNewItems.SelectedOption=="HtxMaintenance"||n.objNewItems.SelectedOption=="HtxWizard"?n.objFormLinkDetails.InitFormLink():n.objNewItems.SelectedOption=="PrototypeWizard"||n.objNewItems.SelectedOption=="PrototypeLookup"||n.objNewItems.SelectedOption=="PrototypeMaintenance"?n.objPrototypeFormDetails.InitWizard():n.objNewItems.SelectedOption=="WorkflowMap"&&n.objWorkflowMapDetails.InitWorkflowMap()};v("Forms");n.objFormsDetails={};n.objFormsDetails.IsShowMainQuery=!1;n.objLookupFieldsDetails={};n.IsMaintenance=!1;n.IsLookup=!1;n.objLookupResultFields={};n.objLookupResultFields.lstEntity=[];n.objLookupResultFields.SelecetdField=[];n.objLookupResultFields.IsNewButton="True";n.objLookupResultFields.IsOpenButton="True";n.objLookupResultFields.IsDeleteButton="True";n.objLookupResultFields.IsExportExcelButton="True";n.ControlTypes=["","TextBox","DropDownList"];n.lstControlTypes=["","Label"];n.lstDataFormat=["","{0:d}","{0:C}","{0:000-##-####}","{0:(###)###-####}"];n.lstDataKey=["","1","2","3","4","5"];n.lstColumns=["4","6","8","10"];n.objLookupFieldsDetails.lstFieldsProperties=[];n.objLookupResultFields.lstResultFieldsForGrid=[];n.objLookupFieldsDetails.lstselectedmultiplelevelfield=[];n.objLookupResultFields.lstselectedmultiplelevelfield=[];n.IsSameAsNewForMethod=!1;n.IsSameAsNewForWizard=!1;n.objLookupFieldsDetails.lstSelectedFields=[];n.objWizardDetails={};n.objPrototypeFormDetails={};n.objPrototypeLookupColumns={};n.objPrototypeLookupColumns.lstColumns=[];n.objPrototypeLookupColumns.ControlTypes=["","Label","HyperLink","CheckBox"];n.objReportDetails={};n.objFormLinkDetails={};n.objFormLinkDetails.lstSubqueries=[];n.objFormLinkDetails.NewMethod=[];n.objFormLinkDetails.UpdateMethod=[];n.OnFinishClick=function(){function e(n){n.dtDOColumnDetail=[];n.ForeigenKeyCollection=[];n.lstTableCodeValue=[];n.SortOrderCollection=[]}var f,u,t,o;i.IsLoading=!0;n.objNewItems.SelectedOption=="Entity"?(n.objDirFunctions.prepareExtraFieldData&&(n.objDirFunctions.prepareExtraFieldData(),n.objDirFunctions.getNewExtraFieldData&&(n.objExtraFields=n.objDirFunctions.getNewExtraFieldData())),n.objEntityDetail.TableName?(angular.forEach(n.objEntityDetail.OneToOneSelectedTableCollection,e),angular.forEach(n.objEntityDetail.OneToManySelectedTableCollection,e)):(n.objEntityDetail.dtDOTableColumns=[],n.objEntityDetail.lstTableCodeValue=[],n.objEntityDetail.OneToOneSelectedTableCollection=[],n.objEntityDetail.OneToManySelectedTableCollection=[]),n.CreateEntity(n.objEntityDetail.TableName,n.objEntityDetail.FormattedClassName,n.objEntityDetail.Path,n.objEntityDetail.lstCodeValues,!0,n.objEntityDetail.EntityID,n.objEntityDetail.Description,n.objEntityDetail.BusinessObjectName,n.objEntityDetail.ParentEntity,n.objEntityDetail.OneToOneSelectedTableCollection,n.objEntityDetail.OneToManySelectedTableCollection,n.blnShowConsolidatedBORelatedProperties)):n.objNewItems.SelectedOption=="Correspondence"?n.CreateCorrespondense():n.objNewItems.SelectedOption=="File"?n.CreateFile():n.objNewItems.SelectedOption=="Forms"?(n.Count=0,n.objFormsDetails.IsMaintenence&&n.objFormsDetails.IsMaintenence.toLowerCase()=="true"?(n.objFormsDetails.IsLookup&&n.objFormsDetails.IsLookup.toLowerCase()!="true"&&n.UpdateDataForMaintenance(),n.UpdateCenterMiddleForMaintenance(),f={},t={FileType:"Maintenance",FileName:"wfm"+n.objFormsDetails.ID+"Maintenance",FilePath:n.objFormsDetails.Path,FileID:"wfm"+n.objFormsDetails.ID+"Maintenance"},a(n.objFormsDetails.objSfxMaintenanceForm),i.SaveModelWithPackets(n.objFormsDetails.objSfxMaintenanceForm,t,undefined,!0),n.objFormsDetails.IsLookup&&n.objFormsDetails.IsLookup.toLowerCase()=="true"&&(n.UpdateResultFields(),n.UpdateResultPanel(),a(n.objFormsDetails.objSfxLookupForm),r.setFormDetails(n.objFormsDetails))):n.objFormsDetails.IsLookup&&n.objFormsDetails.IsLookup.toLowerCase()=="true"&&(n.UpdateResultFields(),n.UpdateResultPanel(),f={},t={FileType:"Lookup",FileName:"wfm"+n.objFormsDetails.ID+"Lookup",FilePath:n.objFormsDetails.Path,FileID:"wfm"+n.objFormsDetails.ID+"Lookup"},a(n.objFormsDetails.objSfxLookupForm),i.SaveModelWithPackets(n.objFormsDetails.objSfxLookupForm,t,undefined,!0))):n.objNewItems.SelectedOption=="UserControl"?(n.objUserCtrlDetails.UpdateData(),t={FileType:"UserControl",FileName:"udc"+n.objUserCtrlDetails.ID+"UserControl",FilePath:n.objUserCtrlDetails.Path,FileID:"udc"+n.objUserCtrlDetails.ID+"UserControl"},a(n.objUserCtrl),i.SaveModelWithPackets(n.objUserCtrl,t,undefined,!0)):n.objNewItems.SelectedOption=="Tooltip"?(n.objTooltipDetails.UpdateData(),t={FileType:"Tooltip",FileName:"wfm"+n.objTooltipDetails.ID+"Tooltip",FilePath:n.objTooltipDetails.Path,FileID:"wfm"+n.objTooltipDetails.ID+"Tooltip"},a(n.objTooltipForm),i.SaveModelWithPackets(n.objTooltipForm,t,undefined,!0)):n.objNewItems.SelectedOption=="Wizard"?(n.objWizardDetails.UpdateData(),t={FileType:"Wizard",FileName:"wfm"+n.objWizardDetails.ID+"Wizard",FilePath:n.objWizardDetails.Path,FileID:"wfm"+n.objWizardDetails.ID+"Wizard"},a(n.objSfxWizardForm),i.SaveModelWithPackets(n.objSfxWizardForm,t,undefined,!0)):n.objNewItems.SelectedOption=="Report"?(n.objReportDetails.UpdateData(),t={FileType:"Report",FileName:"rpt"+n.objReportDetails.ID,FilePath:n.objReportDetails.Path,FileID:"rpt"+n.objReportDetails.ID},a(n.objReport),i.SaveModelWithPackets(n.objReport,t,undefined,!0)):n.objNewItems.SelectedOption=="BPMN"||n.objNewItems.SelectedOption=="BPMTemplate"?(n.objDirFunctions.prepareExtraFieldData&&(n.objDirFunctions.prepareExtraFieldData(),n.objDirFunctions.getNewExtraFieldData&&(n.bpmDetails.bpmModel.ExtraFields=n.objDirFunctions.getNewExtraFieldData())),$.connection.hubBPMN.server.createNewBPMN(n.bpmDetails.bpmModel).done(function(t){var r=t;r&&i.$apply(function(){i.openFile(r,!0)});n.dialogForNew.close();i.IsLoading=!1})):n.objNewItems.SelectedOption=="HtxLookup"||n.objNewItems.SelectedOption=="HtxMaintenance"||n.objNewItems.SelectedOption=="HtxWizard"?(u="",n.objNewItems.SelectedOption=="HtxLookup"?u="FormLinkLookup":n.objNewItems.SelectedOption=="HtxMaintenance"?u="FormLinkMaintenance":n.objNewItems.SelectedOption=="HtxWizard"&&(u="FormLinkWizard"),t={FileType:u,FileName:"htx"+n.objFormLinkDetails.ID,FilePath:n.objFormLinkDetails.Path,FileID:"htx"+n.objFormLinkDetails.ID},f={},f.ID=n.objFormLinkDetails.ID,f.Path=n.objFormLinkDetails.Path,f.sfwEntity=n.objFormLinkDetails.sfwEntity,f.HtmlTemplatePath=n.objFormLinkDetails.HtmlTemplatePath,f.MainQueryID=n.objFormLinkDetails.MainQueryID,f.FileName=t.FileName,f.FileType=t.FileType,f.HtmlFolderTemplatePath=n.objFormLinkDetails.HtmlFolderTemplatePath,n.objDirFunctions.prepareExtraFieldData&&n.objDirFunctions.prepareExtraFieldData(),f.objExtraFields=n.objExtraFields,n.objFormLinkDetails.FormInfo=f,$.connection.hubCreateNewObject.server.populateMapUnmapControls(f).done(function(t){n.receiveMapUnmapControls(t[0],t[1])})):n.objNewItems.SelectedOption=="PrototypeLookup"||n.objNewItems.SelectedOption=="PrototypeMaintenance"||n.objNewItems.SelectedOption=="PrototypeWizard"?(u="",n.objNewItems.SelectedOption=="PrototypeLookup"?(u="Lookup",n.objPrototypeFormDetails.UpdateData(u)):n.objNewItems.SelectedOption=="PrototypeMaintenance"?(u="Maintenance",n.objPrototypeFormDetails.UpdateData(u)):n.objNewItems.SelectedOption=="PrototypeWizard"&&(u="Wizard",n.objPrototypeFormDetails.UpdateData(u)),t={FileType:u,FileName:"wfp"+n.objPrototypeFormDetails.ID+u,FileID:"wfp"+n.objPrototypeFormDetails.ID+u},a(n.objSfxPrototypeForm),i.SaveModelWithPackets(n.objSfxPrototypeForm,t,undefined,!0)):n.objNewItems.SelectedOption=="WorkflowMap"&&(o={FileID:n.objWorkflowMapDetails.FileID,ProcessType:n.objWorkflowMapDetails.ProcessType,Path:n.objWorkflowMapDetails.Path},$.connection.hubCreateNewObject.server.createWorkflowMap(o).done(function(t){var r=t;r&&i.$apply(function(){i.openFile(r,!0)});n.dialogForNew.close();i.IsLoading=!1}))};n.receiveModelForForms=function(t){var r=t;n.$evalAsync(function(){var t=getScopeByFileName(n.SelectedEntity);t!=undefined&&t&&t.lstItemsFormsList&&t.lstItemsFormsList.push(r);n.objFormsDetails&&n.objFormsDetails.IsMaintenence&&n.objFormsDetails.IsMaintenence.toLowerCase()=="true"&&n.objFormsDetails.IsLookup&&n.objFormsDetails.IsLookup.toLowerCase()=="true"?(n.Count++,n.Count==1?i.openFile(r,!0):n.Count==2&&(n.dialogForNew.close(),i.openFile(r,!0),i.IsLoading=!1)):(n.dialogForNew.close(),i.openFile(r,!0),i.IsLoading=!1)})};n.initializeBpmn=function(){n.bpmDetails={bpmModel:{},ErrorMessageForDisplay:"",isValid:!1,templates:[],templatePath:""};n.bpmDetails.bpmModel={FileID:"",Title:"",Template:"",Location:"",IsTemplate:n.objNewItems.SelectedOption=="BPMTemplate"};$.connection.hubBPMN.server.getBpmnTemplatePath().done(function(t){n.$apply(function(){n.objNewItems.SelectedOption=="BPMTemplate"&&(n.bpmDetails.bpmModel.Location=t);n.bpmDetails.templatePath=t;n.bpmDetails.templatePath&&n.bpmDetails.templatePath.trim().length>0&&(n.bpmDetails.templates=n.lstAllFiles.filter(function(t){return t.FilePath.indexOf(n.bpmDetails.templatePath)==0}).map(function(n){return n.FileName}));n.bpmDetails.isValidBpmDetails()})});n.bpmDetails.onTemplateKeyDown=function(t){var i=t.target;n.bpmDetails.templates&&n.bpmDetails.templates.length>0&&setSingleLevelAutoComplete($(i),n.bpmDetails.templates);t.ctrlKey&&t.keyCode==$.ui.keyCode.SPACE&&($(i).data("ui-autocomplete")&&$(i).autocomplete("search",$(i).val().trim()),t.preventDefault())};n.bpmDetails.showTemplateIntellisenseList=function(){$("#creatbpmtemplateinput").focus();n.bpmDetails.templates&&n.bpmDetails.templates.length>0&&(setSingleLevelAutoComplete($("#creatbpmtemplateinput"),n.bpmDetails.templates),$("#creatbpmtemplateinput").data("ui-autocomplete")&&$("#creatbpmtemplateinput").autocomplete("search",$("#creatbpmtemplateinput").val()))};n.bpmDetails.canFinishBpmStep=function(){return n.bpmDetails.isValid};n.bpmDetails.isValidBpmDetails=function(){return n.bpmDetails.isValid=!0,n.bpmDetails.ErrorMessageForDisplay="",n.objNewItems.SelectedOption!="BPMTemplate"||n.bpmDetails.templatePath&&n.bpmDetails.templatePath.trim().length>0?n.bpmDetails.bpmModel.FileID&&n.bpmDetails.bpmModel.FileID.trim().length>0?(n.bpmDetails.bpmModel.FileID!=undefined||n.bpmDetails.bpmModel.FileID!="")&&n.bpmDetails.bpmModel.FileID.length<=3?(n.bpmDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",n.bpmDetails.isValid=!1):n.bpmDetails.isExistingBpm()?(n.bpmDetails.ErrorMessageForDisplay="Error: A file with same name already exists. Please give a different file name.",n.bpmDetails.isValid=!1):isValidFileID(n.bpmDetails.bpmModel.FileID)?n.bpmDetails.bpmModel.Template&&n.bpmDetails.bpmModel.Template.trim().length>0&&n.bpmDetails.templates.indexOf(n.bpmDetails.bpmModel.Template)==-1?(n.bpmDetails.ErrorMessageForDisplay="Error: Invalid Template.",n.bpmDetails.isValid=!1):n.ValidatePath(n.bpmDetails.bpmModel,n.bpmDetails.bpmModel.Location)||(n.bpmDetails.ErrorMessageForDisplay="Error: Invalid Path or click to create new button.",n.bpmDetails.isValid=!1):(n.bpmDetails.ErrorMessageForDisplay="Error: File Name must not start with digits, contain space(s), special characters(except '-').",n.bpmDetails.isValid=!1):(n.bpmDetails.ErrorMessageForDisplay="Error: Please enter a File Name (ID).",n.bpmDetails.isValid=!1):(n.bpmDetails.ErrorMessageForDisplay="Error: Template Path not set in Project Settings.",n.bpmDetails.isValid=!1),n.bpmDetails.isBpmDetailsValid=n.bpmDetails.isValid,n.bpmDetails.isValid};n.bpmDetails.isValidBpmPath=function(){return n.bpmDetails.bpmModel.Location!=""&&n.bpmDetails.bpmModel.Location!=null&&n.bpmDetails.bpmModel.Location!=undefined?n.lstFolder.filter(function(t){return t.ID==n.bpmDetails.bpmModel.Location}).length>0||n.bpmDetails.bpmModel.Location==n.bpmDetails.templatePath:!1};n.bpmDetails.isExistingBpm=function(){return n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="sbp"+n.bpmDetails.bpmModel.FileID.toLowerCase()}).length>0};n.bpmDetails.isValidBpmDetails()};n.objEntityDetail.CanShowEntitySteps=function(){var t=!0;return n.objNewItems.SelectedOption=="Entity"&&(t=!1),t};n.LoadFolders=function(){};n.objEntityDetail.Init=function(){n.objEntityDetail.MasterTables=[];n.objEntityDetail.lstCodeValues=[];n.objEntityDetail.OneToOneSelectedTableCollection=[];n.objEntityDetail.OneToManySelectedTableCollection=[];n.objEntityDetail.lstTableCodeValue=[];n.objEntityDetail.TableName="";n.objEntityDetail.BusinessObjectName="";n.objEntityDetail.Path="";n.objEntityDetail.EntityID="";n.objEntityDetail.dtDOTableColumns=[];n.objEntityDetail.FormattedClassName="";n.validateEntTableSchema();n.objEntityDetail.isNextDisable()};n.ValidateTableName=function(){var t=!0,r,i;return n.objEntityDetail.TableName&&n.objEntityDetail.TableName.trim().length>0&&(n.lstMainTable.some(function(t){return t.ID==n.objEntityDetail.TableName})?(r=u.getEntityIntellisense(),i=r.filter(function(t){return t.TableName==n.objEntityDetail.TableName}),i.length>0&&(n.objEntityDetail.ErrorMessageForDisplay="Error: Table name is already binded with "+i[0].ID+". Select another table.",t=!1)):(n.objEntityDetail.ErrorMessageForDisplay="Error: Invalid Table Name.",t=!1)),n.objEntityDetail.validTableName=n.objEntityDetail.TableName?n.objEntityDetail.TableName:null,t};n.ValidateBusObject=function(t){var i=!0,r;return n.objEntityDetail.ErrorMessageForDisplay="",n.objEntityDetail.BusinessObjectName&&n.objEntityDetail.BusinessObjectName!=""&&(r=u.getEntityIntellisense(),n.objEntityDetail.IsExistingEntity?r.some(function(t){return t.ID=="ent"+n.objEntityDetail.EntityID&&t.BusinessObjectName==n.objEntityDetail.BusinessObjectName})||r.some(function(t){return t.BusinessObjectName==n.objEntityDetail.BusinessObjectName})&&(n.objEntityDetail.ErrorMessageForDisplay="Error: Invalid Business Object.The business object is used in another entity.",i=!1):r.some(function(t){return t.BusinessObjectName==n.objEntityDetail.BusinessObjectName})&&(n.objEntityDetail.ErrorMessageForDisplay="Error: Invalid Business Object.The business object is used in another entity.",i=!1),t&&(n.lstBusinessObject.some(function(t){return t.ID==n.objEntityDetail.BusinessObjectName})||(n.objEntityDetail.ErrorMessageForDisplay="Error: Invalid Business Object.",i=!1))),i};n.ValidateID=function(){var t=!0,r;return n.objEntityDetail.EntityID==undefined||n.objEntityDetail.EntityID==""?(n.objEntityDetail.ErrorMessageForDisplay="Error: ID cannot be empty.",t=!1):n.objEntityDetail.EntityID&&n.objEntityDetail.EntityID.toLowerCase().startsWith("ent")?(n.objEntityDetail.ErrorMessageForDisplay="Error: ID cannot start with ent.",t=!1):(n.objEntityDetail.EntityID!=undefined||n.objEntityDetail.EntityID!="")&&n.objEntityDetail.EntityID.length>90?(n.objEntityDetail.ErrorMessageForDisplay="Error: Invalid ID. The length of ID cannot exceed 90 characters.",t=!1):(n.objEntityDetail.EntityID!=undefined||n.objEntityDetail.EntityID!="")&&n.objEntityDetail.EntityID.length<=3?(n.objEntityDetail.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",t=!1):(n.objEntityDetail.EntityID!=undefined||n.objEntityDetail.EntityID!="")&&n.objEntityDetail.EntityID.toLowerCase()=="base"?(n.objEntityDetail.ErrorMessageForDisplay="Error: entBase can not be created.",t=!1):isValidFileID(n.objEntityDetail.EntityID)?(r=u.getEntityIntellisense(),n.objEntityDetail.TableName!=undefined&&n.objEntityDetail.TableName!=""?r.some(function(t){return t.ID.toLowerCase()=="ent"+n.objEntityDetail.EntityID.toLowerCase()&&n.objEntityDetail.TableName!=undefined&&n.objEntityDetail.TableName!=""&&t.TableName})?(n.objEntityDetail.ErrorMessageForDisplay="Error: The entity already exists. Please enter a different Name (ID).",t=!1):i.lstopenedfiles&&i.lstopenedfiles.some(function(t){return t.file&&t.file.FileName&&t.file.FileName.toLowerCase()=="ent"+n.objEntityDetail.EntityID.toLowerCase()})&&(n.objEntityDetail.ErrorMessageForDisplay="Error: The entity is already opened. Please close it first and then update.",t=!1):r.some(function(t){return t.ID.toLowerCase()=="ent"+n.objEntityDetail.EntityID.toLowerCase()})?(n.objEntityDetail.ErrorMessageForDisplay="Error: The entity already exists. Please enter a different Name (ID).",t=!1):i.lstopenedfiles&&i.lstopenedfiles.some(function(t){return t.file&&t.file.ID&&t.file.ID.toLowerCase()=="ent"+n.objEntityDetail.EntityID.toLowerCase()})&&(n.objEntityDetail.ErrorMessageForDisplay="Error: The entity is already opened. Please close it first and then update.",t=!1)):(n.objEntityDetail.ErrorMessageForDisplay="Error: File Name must not start with digits, contain space(s), special characters(except '-').",t=!1),t};n.validateParentEntity=function(){var i=!0,r,t;return n.objEntityDetail.ParentEntity&&n.objEntityDetail.ParentEntity!=""&&(r=u.getEntityIntellisense(),t=r.filter(function(t){if(t.ID&&t.ID.toLowerCase()==n.objEntityDetail.ParentEntity.toLowerCase())return t}),angular.isArray(t)&&t.length<=0?(n.objEntityDetail.ErrorMessageForDisplay="Error: Invalid Parent Entity.",i=!1):angular.isArray(t)&&t.length>0&&n.objEntityDetail.TableName&&t[0].TableName&&(n.objEntityDetail.ErrorMessageForDisplay="Error: Invalid Parent Entity.",i=!1)),i};n.ValidatePath=function(n,t){return t?n.errors&&n.errors.invalid_path?(n.ErrorMessageForDisplay=n.errors.invalid_path=="Folder Not Exist"?"Info: Folder doesn't exist. Please Click Create New Folder Button.":"Error: Invalid Folder Path.",!1):(n.ErrorMessageForDisplay="",!0):(n.ErrorMessageForDisplay="Error: Path / Folder cannot be empty.",!1)};y="";n.ValidateBoDoTemplate=function(){var t=!0;return n.objEntityDetail.TableName&&n.objEntityDetail.TableName.trim().length>0&&(y==undefined||y==""?$.connection.hubCreateNewObject.server.checkForBoDoFile().done(function(i){i&&i.length>0&&(n.objEntityDetail.ErrorMessageForDisplay=y="Error: "+i,t=!1)}):n.objEntityDetail.ErrorMessageForDisplay=y),t};n.ValidateEntityDetails=function(){var t=!1;return n.objEntityDetail.ErrorMessageForDisplay="",n.objEntityDetail.validTableName=null,!n.objEntityDetail.TableName&&!n.objEntityDetail.BusinessObjectName&&n.ValidateID()&&n.ValidatePath(n.objEntityDetail,n.objEntityDetail.Path)&&n.validateParentEntity()?t=!0:n.objEntityDetail.TableName&&!n.objEntityDetail.BusinessObjectName&&n.ValidateID()&&n.ValidateTableName()&&n.ValidatePath(n.objEntityDetail,n.objEntityDetail.Path)&&n.ValidateBoDoTemplate()&&n.validateParentEntity()?t=!0:!n.objEntityDetail.TableName&&n.objEntityDetail.BusinessObjectName&&n.ValidateID()&&n.ValidateBusObject(!0)&&n.ValidatePath(n.objEntityDetail,n.objEntityDetail.Path)&&n.ValidateBoDoTemplate()&&n.validateParentEntity()?t=!0:n.objEntityDetail.TableName&&n.objEntityDetail.BusinessObjectName&&n.ValidateTableName()&&n.ValidateID(!1)&&n.ValidateBusObject(!1)&&n.validateParentEntity()&&n.ValidatePath(n.objEntityDetail,n.objEntityDetail.Path)&&n.ValidateBoDoTemplate()&&(t=!0),t};n.TableNameChangedClick=function(){function i(i){i.FileName=="ent"+n.objEntityDetail.EntityID&&(t=i)}if(n.blnShowConsolidatedBORelatedProperties=!1,n.objEntityDetail.CanFinishDisable=!1,n.isLoadOneToManyData=!1,n.objEntityDetail.isBusObjectDisabled=!1,n.objEntityDetail.TableName!=undefined&&n.objEntityDetail.TableName!=""){if(n.ClearFields(),n.objEntityDetail.CanFinishDisable=!0,n.objEntityDetail.EntityID=GetFormattedTableName(n.objEntityDetail.TableName.toLowerCase()),n.objEntityDetail.FormattedClassName=n.objEntityDetail.EntityID,n.objFormsDetails.IsCreatewithbusinessobject&&(n.objEntityDetail.BusinessObjectName="bus"+n.objEntityDetail.EntityID,n.blnShowConsolidatedBORelatedProperties=!0),n.lstAllFiles!=undefined){var t;angular.forEach(n.lstAllFiles,i);t!=undefined&&(n.objEntityDetail.Path=t.Location)}n.IsOneToOneOrManyDisable=n.lstBusinessObject.some(function(t){return t.ID==n.objEntityDetail.BusinessObjectName})?!0:!1;n.objEntityDetail.TableName!=undefined&&n.objEntityDetail.TableName!=""&&(n.objEntityDetail.dtDOTableColumns=[]);n.objEntityDetail.CheckForExistingEntity();$.connection.hubCreateNewObject.server.updatedCodeValuesForMainTable(n.objEntityDetail.TableName).done(function(t){n.objEntityDetail.lstTableCodeValue=t;n.$apply(function(){n.objEntityDetail.lstTableCodeValue.length>0?(n.IsCodeValueDisable=!1,n.objEntityDetail.isNextDisable()):n.IsCodeValueDisable=!0})})}n.objEntityDetail.isNextDisable()};n.objEntityDetail.CheckForExistingEntity=function(){var i,t;n.objEntityDetail.IsExistingEntity=!1;n.objEntityDetail.isBusObjectDisabled=!1;n.objDirFunctions&&n.objDirFunctions.resetExtraField&&n.objDirFunctions.resetExtraField(n.objExtraFields);n.objEntityDetail.TableName!=undefined&&n.objEntityDetail.TableName!=""&&(i=u.getEntityIntellisense(),i.some(function(t){return t.ID.toLowerCase()=="ent"+n.objEntityDetail.EntityID.toLowerCase()&&n.objEntityDetail.TableName!=undefined&&n.objEntityDetail.TableName!=""})&&(n.objEntityDetail.IsExistingEntity=!0),t=i.filter(function(t){return t.ID=="ent"+n.objEntityDetail.EntityID&&t.BusinessObjectName==n.objEntityDetail.BusinessObjectName}),t&&t.length>0&&(n.objEntityDetail.BusinessObjectName=t[0].BusinessObjectName,n.objEntityDetail.BusinessObjectName&&(n.objEntityDetail.isBusObjectDisabled=!0)))};n.onbusObjectChange=function(){n.IsOneToOneOrManyDisable=n.lstBusinessObject.some(function(t){return t.ID==n.objEntityDetail.BusinessObjectName})?!0:!1};n.ClearFields=function(){n.objEntityDetail.EntityID="";n.objEntityDetail.BusinessObjectName="";n.objEntityDetail.FormattedClassName="";n.objEntityDetail.dtDOTableColumns=[]};n.UpdateOnNextFromEntityDetail=function(){var t=!1;n.objEntityDetail.PrevTableName&&n.objEntityDetail.PrevTableName==n.objEntityDetail.TableName||(n.objEntityDetail.PrevTableName=n.objEntityDetail.TableName,t=!0,n.isLoadOneToManyData=!0);n.objEntityDetail.TableName&&t&&(n.objEntityDetail.OneToManySelectedTableCollection=[],n.objEntityDetail.OneToOneSelectedTableCollection=[],n.IsOneToOneOrManyDisable&&(n.objCodeValues.lstTableCodeValue=[],n.UpdateMainTableCodeValues()),$.connection.hubCreateNewObject.server.getDoTableColumnDetails(n.objEntityDetail.TableName).done(function(t){n.$apply(function(){n.objEntityDetail.dtDOTableColumns=t})}),n.LoadDataForOneToOne(),n.objEntityDetail.IsExistingEntity&&$.connection.hubCreateNewObject.server.getEntityExtraFieldsByName("ent"+n.objEntityDetail.EntityID).done(function(t){n.$evalAsync(function(){t&&t.Elements&&t.Elements.length>0&&(n.objExtraFields=t,n.objDirFunctions&&n.objDirFunctions.resetExtraField&&n.objDirFunctions.resetExtraField(n.objExtraFields))})}))};n.CloseWizardClick=function(){n.dialogForNew.close()};n.CreateEntity=function(t,r,f,e,o,s,h,c,l,a,v,y){var p={TableName:t,FormattedClassName:r,FolderPath:f,lstCodeValue:e,IsMainEntity:o,EntityName:"ent"+s,Description:h,BusinessObjectName:c,ParentEntity:l,UserId:i.UserID,lstOneToOne:n.objEntityDetail.OneToOneSelectedTableCollection,lstOneToMany:v,ExtraFields:n.objExtraFields,isXMLCreated:!1};p!=undefined&&(y||(y=!1),$.connection.hubCreateNewObject.server.createEntity(p,y).done(function(t){i.IsFilesAddedDelete=!0;n.$apply(function(){var o=t,f,e,s,h,r;if(o.length>0){if(n.lstEntities=o[0],n.lstSummaryReport=o[1],f=o[2],f.length>0)for(e=0;e<f.length;e++)s=u.getEntityIntellisense().filter(function(n){return n.ID==f[e].ID}),s&&s.length>0&&u.getEntityIntellisense().splice(u.getEntityIntellisense().indexOf(s[0]),1),h=u.getEntityIntellisense().concat(f[e]),u.setEntityIntellisense(h);n.objEntityDetail.TableName&&n.objEntityDetail.TableName!=""?(r=n.$new(),r.lstSummaryReport=n.lstSummaryReport,r.beforeSummaryClose=function(){n.lstEntities.length>0&&i.openFile(n.lstEntities[0],!0);n.dialogForNew.close()},r.openCSFileClick=function(t){if(t&&t.FileContent&&t.FileContent!=""){n.strCSFileContent=t.FileContent;var u=r.$new();u.closeCsDialog=function(){u.csDialog.close()};u.csDialog=i.showDialog(u,"CS File Content","CreateNewObject/views/Entity/OpenCSFile.html")}},r.closeDialog=function(){r.summaryDialog.close()},r.lstSummaryReport&&r.lstSummaryReport.length>0?r.summaryDialog=i.showDialog(r,"Summary Report","CreateNewObject/views/Entity/FileSummaryReport.html",{beforeClose:r.beforeSummaryClose}):r.lstSummaryReport&&r.lstSummaryReport.length==0&&(n.lstEntities.length>0&&i.openFile(n.lstEntities[0],!0),n.dialogForNew.close())):(n.lstEntities.length>0&&i.openFile(n.lstEntities[0],!0),n.dialogForNew.close())}});n.$evalAsync(function(){i.IsLoading=!1})}))};n.CloseWizardClick=function(){n.dialogForNew.close()};n.checkAndExecuteLocationCallback=function(t){typeof n.objLocationCallback.locationCallback=="function"&&h(function(){t&&t.errors&&t.errors.invalid_path&&(t.errors.invalid_path="");n.objLocationCallback.locationCallback()})};n.objEntityDetail.onEntityNameChange=function(){n.objEntityDetail.CheckForExistingEntity()};n.CreatewithbusinessobjectChange=function(t){t&&t=="True"?(n.objEntityDetail&&n.objEntityDetail.EntityID&&(n.objEntityDetail.BusinessObjectName="bus"+n.objEntityDetail.EntityID),n.blnShowConsolidatedBORelatedProperties=!0):(n.objEntityDetail.BusinessObjectName="",n.blnShowConsolidatedBORelatedProperties=!1)};n.objEntityDetail.isNextDisable=function(){return(n.objEntityDetail.isValidEntity=!0,!n.ValidateEntityDetails())?(n.objEntityDetail.isNextDisableForEntity=!0,n.objEntityDetail.isValidEntity=!1,!0):n.objEntityDetail.TableName?n.showExtraFieldsTab?(n.IsOneToOneOrManyDisable=!1,n.objEntityDetail.isNextDisableForEntity=!1,!1):(n.blnShowConsolidatedBORelatedProperties&&!n.objEntityDetail.BusinessObjectName?(n.IsOneToOneOrManyDisable=!1,n.objEntityDetail.isNextDisableForEntity=!0):(n.IsOneToOneOrManyDisable=!1,n.objEntityDetail.isNextDisableForEntity=!1),!0):!n.objEntityDetail.TableName||n.objEntityDetail.TableName==""?n.showExtraFieldsTab?(n.IsOneToOneOrManyDisable=!0,n.objEntityDetail.isNextDisableForEntity=!1,!1):(n.IsOneToOneOrManyDisable=!1,n.objEntityDetail.isNextDisableForEntity=!0,!0):n.objEntityDetail.IsExistingEntity&&!n.showExtraFieldsTab&&n.IsCodeValueDisable?(n.objEntityDetail.isNextDisableForEntity=!0,!1):(n.objEntityDetail.isNextDisableForEntity=!1,!1)};n.objEntityDetail.isFinishDisable=function(){return n.objEntityDetail.TableName&&n.objEntityDetail.TableName!=""?!0:n.ValidateEntityDetails()?n.showExtraFieldsTab?!0:!1:!0};n.ResetOneToOneData=function(){n.objOneToOne.ParentTableCollection=[]};n.LoadDataForOneToOne=function(){n.ResetOneToOneData();n.objEntityDetail.TableName!=undefined&&n.objEntityDetail.TableName!=" "&&(i.IsLoading=!0,$.connection.hubCreateNewObject.server.getParentTables(n.objEntityDetail.TableName).done(function(t){n.$apply(function(){n.objOneToOne.ParentTableCollection=t;$.connection.hubCreateNewObject.server.getDoTableColumnDetails(n.objEntityDetail.TableName).done(function(t){n.$apply(function(){n.objEntityDetail.dtDOTableColumns=t;i.IsLoading=!1})})})}))};n.SelectParentTableClick=function(t){n.objOneToOne.SelectedParentTable=t};n.OnAddParentTable=function(){function r(t){if(t.key_no=="1"){n.objcol.ForeigenKey=t.column_name.toLowerCase();return}}function u(i){if(n.objOneToOne.SelectedParentTable.TableName==i.TableName){t=!0;return}}function f(t){n.objcol.ForeigenKeyCollection.push(t.column_name.toLowerCase())}if(n.objOneToOne.SelectedParentTable!=undefined){var t=!1;angular.forEach(n.objEntityDetail.OneToOneSelectedTableCollection,u);t||(n.objcol={ForeigenKey:"",TableName:n.objOneToOne.SelectedParentTable.TableName,FormattedClassName:n.objOneToOne.SelectedParentTable.FormattedClassName,EntityName:"ent"+n.objOneToOne.SelectedParentTable.FormattedClassName,ObjectName:n.objOneToOne.SelectedParentTable.ObjectName,BusinessObjectName:"bus"+n.objOneToOne.SelectedParentTable.FormattedClassName,BaseBusinessObjectName:"busBase"},n.objcol.ForeigenKeyCollection=[],n.objcol.SortOrderCollection=[],n.objcol.DefaultSortOrderLst=["asc","desc"],n.objcol.lstBusinessObjects=[],n.objcol.BusinessObjects=[],n.objcol.lstCodeValues=[],n.CheckEntityIsValidOrNot(n.objcol.EntityName)?(n.objcol.IsExistingEntity=!0,i.IsLoading=!0,$.connection.hubCreateNewObject.server.getChildEntityFolderPath("ent"+n.objOneToOne.SelectedParentTable.FormattedClassName).done(function(t){n.$evalAsync(function(){n.objcol.FolderName=t?t:n.objEntityDetail.Path;i.IsLoading=!1})})):(n.objcol.FolderName=n.objEntityDetail.Path,i.IsLoading=!0,$.connection.hubCreateNewObject.server.updatedCodeValuesForMainTable(n.objOneToOne.SelectedParentTable.TableName).done(function(t){n.$evalAsync(function(){n.objcol.lstTableCodeValue=t;n.objcol.lstTableCodeValue&&n.objcol.lstTableCodeValue.length>0&&(n.IsCodeValueDisable=!1);i.IsLoading=!1})})),n.objcol.dtDOColumnDetail=undefined,n.objcol.dtCDOXmlColumns=undefined,n.objcol.isFromTable=!0,n.objEntityDetail.dtDOTableColumns!=undefined&&angular.forEach(n.objEntityDetail.dtDOTableColumns,f),i.IsLoading=!0,$.connection.hubCreateNewObject.server.getDoTableColumnDetails(n.objcol.TableName).done(function(t){n.$apply(function(){n.objcol.dtDOColumnDetail=t;n.objcol.dtDOColumnDetail!=undefined&&angular.forEach(n.objcol.dtDOColumnDetail,r);n.objEntityDetail.OneToOneSelectedTableCollection.indexOf(n.objcol)<=-1&&n.objEntityDetail.OneToOneSelectedTableCollection.push(n.objcol);i.IsLoading=!1})}))}};n.SelectOneToOneParentTable=function(t,i){n.objOneToOne.SelectedOneToOneTable=t;var r=i.currentTarget;r.localName!="tr"?(r=$(r).parents("tr"),r.addClass("selected-row"),r.siblings("tr").removeClass("selected-row")):($(r).addClass("selected-row"),$(r).siblings("tr").removeClass("selected-row"))};n.DeleteParentTableRowCommand=function(){var t,r,i;if(n.objOneToOne.SelectedOneToOneTable!=undefined&&(t=n.objEntityDetail.OneToOneSelectedTableCollection.indexOf(n.objOneToOne.SelectedOneToOneTable),t>=0&&(n.objEntityDetail.OneToOneSelectedTableCollection.splice(t,1),t<n.objEntityDetail.OneToOneSelectedTableCollection.length?n.objOneToOne.SelectedOneToOneTable=n.objEntityDetail.OneToOneSelectedTableCollection[t]:n.objEntityDetail.OneToOneSelectedTableCollection.length>0&&(n.objOneToOne.SelectedOneToOneTable=n.objEntityDetail.OneToOneSelectedTableCollection[t-1])),n.objEntityDetail.OneToOneSelectedTableCollection)){for(r=0,i=0;i<n.objEntityDetail.OneToOneSelectedTableCollection.length;i++)n.objEntityDetail.OneToOneSelectedTableCollection[i].lstTableCodeValue&&(r+=n.objEntityDetail.OneToOneSelectedTableCollection[i].lstTableCodeValue.length);n.IsCodeValueDisable=r>0||n.objEntityDetail.lstTableCodeValue&&n.objEntityDetail.lstTableCodeValue.length>0?!1:!0}};n.UpdateOnNextFromOneToOne=function(){n.objEntityDetail.TableName&&n.isLoadOneToManyData&&n.LoadDataForOneToMany()};n.SetClassForOneToOne=function(n,t){if(n==t)return"selected"};n.ResetOneToManyData=function(){n.objOneToMany.ChildTableCollection=[]};n.LoadDataForOneToMany=function(){n.ResetOneToManyData();n.isLoadOneToManyData=!1;n.objEntityDetail.TableName!=undefined&&n.objEntityDetail.TableName!=" "&&(i.IsLoading=!0,$.connection.hubCreateNewObject.server.getChildTableDetails(n.objEntityDetail.TableName).done(function(t){n.$apply(function(){i.IsLoading=!1;n.objOneToMany.ChildTableCollection=t})}))};n.SelectChildTableClick=function(t){n.objOneToMany.SelectedChildTable=t};n.OnAddChildTable=function(){function r(i){if(n.objOneToMany.SelectedChildTable.TableName==i.TableName){t=!0;return}}if(n.objOneToMany.SelectedChildTable!=undefined&&!i.IsLoading){var t=!1;angular.forEach(n.objEntityDetail.OneToManySelectedTableCollection,r);t||(n.objcol={ForeigenKey:"",TableName:n.objOneToMany.SelectedChildTable.TableName,FormattedClassName:n.objOneToMany.SelectedChildTable.FormattedClassName,EntityName:"ent"+n.objOneToMany.SelectedChildTable.FormattedClassName,ObjectName:n.objOneToMany.SelectedChildTable.ObjectName,BusinessObjectName:"bus"+n.objOneToMany.SelectedChildTable.FormattedClassName,BaseBusinessObjectName:"busBase"},n.objcol.ForeigenKeyCollection=[],n.objcol.SortOrderCollection=[],n.objcol.DefaultSortOrderLst=["asc","desc"],n.objcol.lstBusinessObjects=[],n.objcol.BusinessObjects=[],n.objcol.lstCodeValues=[],n.CheckEntityIsValidOrNot(n.objcol.EntityName)?(n.objcol.IsExistingEntity=!0,i.IsLoading=!0,$.connection.hubCreateNewObject.server.getChildEntityFolderPath("ent"+n.objOneToMany.SelectedChildTable.FormattedClassName).done(function(t){n.$evalAsync(function(){n.objcol.FolderName=t?t:n.objEntityDetail.Path;i.IsLoading=!1})})):(n.objcol.FolderName=n.objEntityDetail.Path,i.IsLoading=!0,$.connection.hubCreateNewObject.server.updatedCodeValuesForMainTable(n.objOneToMany.SelectedChildTable.TableName).done(function(t){n.$evalAsync(function(){n.objcol.lstTableCodeValue=t;n.objcol.lstTableCodeValue&&n.objcol.lstTableCodeValue.length>0&&(n.IsCodeValueDisable=!1);n.objEntityDetail.isNextDisableForEntity=!n.IsCodeValueDisable||n.showExtraFieldsTab||n.blnShowConsolidatedBORelatedProperties?!1:!0;i.IsLoading=!1})})),!n.IsCodeValueDisable||n.showExtraFieldsTab||n.blnShowConsolidatedBORelatedProperties||(n.objEntityDetail.isNextDisableForEntity=!0),n.objcol.dtDOColumnDetail=undefined,n.objcol.dtCDOXmlColumns=undefined,n.objcol.isFromTable=!0,i.IsLoading=!0,$.connection.hubCreateNewObject.server.getDoTableColumnDetails(n.objcol.TableName).done(function(t){n.receiveDoTableColumnDetailsForChildTable(t)}))}};n.receiveDoTableColumnDetailsForChildTable=function(t){function r(t){if(t.key_no+""=="1"){n.objcol.ForeigenKey=t.column_name.toLowerCase();return}}function u(t){n.objcol.SortOrderCollection.push(t.column_name.toLowerCase());n.objcol.ForeigenKeyCollection.push(t.column_name.toLowerCase());t.key_no+""=="1"&&(n.objcol.SortOrder=t.column_name.toLowerCase())}n.$apply(function(){n.objcol.dtDOColumnDetail=t;n.objcol.dtDOColumnDetail!=undefined&&angular.forEach(n.objcol.dtDOColumnDetail,u);n.objcol.DefaultSortOrder="asc";n.objEntityDetail.dtDOTableColumns!=undefined&&angular.forEach(n.objEntityDetail.dtDOTableColumns,r);n.objEntityDetail.OneToManySelectedTableCollection.push(n.objcol);i.IsLoading=!1})};n.SelectOneToManyChildTable=function(t,i){n.objOneToMany.SelectedOneToManyTable=t;var r=i.currentTarget;r.localName!="tr"?(r=$(r).parents("tr"),r.addClass("selected-row"),r.siblings("tr").removeClass("selected-row")):($(r).addClass("selected-row"),$(r).siblings("tr").removeClass("selected-row"))};n.DeleteChildTableRowClick=function(){var t,r,i;if(n.objOneToMany.SelectedOneToManyTable!=undefined&&(t=n.objEntityDetail.OneToManySelectedTableCollection.indexOf(n.objOneToMany.SelectedOneToManyTable),t>=0&&(n.objEntityDetail.OneToManySelectedTableCollection.splice(t,1),t<n.objEntityDetail.OneToManySelectedTableCollection.length?n.objOneToMany.SelectedOneToManyTable=n.objEntityDetail.OneToManySelectedTableCollection[t]:n.objEntityDetail.OneToManySelectedTableCollection.length>0&&(n.objOneToMany.SelectedOneToManyTable=n.objEntityDetail.OneToManySelectedTableCollection[t-1])),n.objEntityDetail.OneToManySelectedTableCollection)){for(r=0,i=0;i<n.objEntityDetail.OneToManySelectedTableCollection.length;i++)n.objEntityDetail.OneToManySelectedTableCollection[i].lstTableCodeValue&&(r+=n.objEntityDetail.OneToManySelectedTableCollection[i].lstTableCodeValue.length);n.IsCodeValueDisable=r>0||n.objEntityDetail.lstTableCodeValue&&n.objEntityDetail.lstTableCodeValue.length>0?!1:!0}};n.UpdateOnNextFromOneToMany=function(){n.PopulateCodeValues();n.objRelatedProperties.isEntityFinishDisable=!1;n.objRelatedProperties.isFinishDisable()};n.PopulateCodeValues=function(){n.objCodeValues.lstTableCodeValue=[];n.UpdateMainTableCodeValues();n.UpdateCodeValues(n.objEntityDetail.OneToOneSelectedTableCollection);n.UpdateCodeValues(n.objEntityDetail.OneToManySelectedTableCollection);n.$evalAsync(function(){n.IsCodeValueDisable=n.objCodeValues.lstTableCodeValue.length>0?!1:!0})};n.UpdateMainTableCodeValues=function(){function t(t){n.objCodeValues.lstTableCodeValue.push(t)}angular.forEach(n.objEntityDetail.lstTableCodeValue,t)};n.UpdateCodeValues=function(t){function i(t){n.objCodeValues.lstTableCodeValue.push(t)}function r(n){angular.forEach(n.lstTableCodeValue,i)}angular.forEach(t,r)};n.SetClassForOneToMany=function(n,t){if(n==t)return"selected"};n.resetLstCodeValues=function(){function t(n){n.lstCodeValues&&(n.lstCodeValues=[])}n.objEntityDetail.lstCodeValues=[];angular.forEach(n.objEntityDetail.OneToOneSelectedTableCollection,t);angular.forEach(n.objEntityDetail.OneToManySelectedTableCollection,t)};n.UpdateOnNextFromCodeValueClick=function(){n.resetLstCodeValues();angular.forEach(n.objCodeValues.lstTableCodeValue,function(t){function r(n){if(n.TableName.toLowerCase()==t.TableName.toLowerCase()){i=n;return}}function u(n){if(n.TableName.toLowerCase()==t.TableName.toLowerCase()){i=n;return}}var i;t.TableName.toLowerCase()==n.objEntityDetail.TableName.toLowerCase()?n.objEntityDetail.lstCodeValues.push({FieldName:t.Description,CodeValue:t.Code}):(angular.forEach(n.objEntityDetail.OneToOneSelectedTableCollection,r),i!=undefined?i.lstCodeValues.push({FieldName:t.Description,CodeValue:t.Code}):(angular.forEach(n.objEntityDetail.OneToManySelectedTableCollection,u),i!=undefined&&i.lstCodeValues.push({FieldName:t.Description,CodeValue:t.Code})))})};n.OnAddNonCollectionRowClick=function(){function i(n){n.IsSelected&&(n.blnDetailsGridOpen=!1);n.IsSelected=!1}function r(n){t.ForeigenKeyCollection.push(n.column_name.toLowerCase())}var t={ForeigenKey:"",TableName:"",FormattedClassName:"",EntityName:"",ObjectName:"",BusinessObjectName:"",BaseBusinessObjectName:"busBase",FolderName:n.objEntityDetail.Path};t.ForeigenKeyCollection=[];t.SortOrderCollection=[];t.DefaultSortOrderLst=["asc","desc"];t.lstBusinessObjects=[];t.BusinessObjects=[];t.lstCodeValues=[];t.dtDOColumnDetail=undefined;t.dtCDOXmlColumns=undefined;t.isFromTable=!1;angular.forEach(n.objEntityDetail.OneToOneSelectedTableCollection,i);t.IsSelected=!0;t.blnDetailsGridOpen=!0;n.objEntityDetail.dtDOTableColumns!=undefined&&angular.forEach(n.objEntityDetail.dtDOTableColumns,r);n.objEntityDetail.OneToOneSelectedTableCollection.push(t);n.objRelatedProperties.isFinishDisable()};n.canDeleteOneToOne=function(){return n.objEntityDetail.OneToOneSelectedTableCollection?n.objEntityDetail.OneToOneSelectedTableCollection.some(function(n){return n.IsSelected}):!1};n.OnDeleteNonCollectionRowClick=function(){function r(i){t=n.objEntityDetail.OneToOneSelectedTableCollection.indexOf(i);n.objEntityDetail.OneToOneSelectedTableCollection.splice(n.objEntityDetail.OneToOneSelectedTableCollection.indexOf(i),1)}var t=0,i=n.objEntityDetail.OneToOneSelectedTableCollection.filter(function(n){return n.IsSelected});i.length&&(angular.forEach(i,r),t<n.objEntityDetail.OneToOneSelectedTableCollection.length?n.objEntityDetail.OneToOneSelectedTableCollection[t].IsSelected=!0:n.objEntityDetail.OneToOneSelectedTableCollection.length>0&&(n.objEntityDetail.OneToOneSelectedTableCollection[t-1].IsSelected=!0));n.objRelatedProperties.isFinishDisable()};n.OnSelectNonCollectionRow=function(t){function i(n){n.IsSelected=!1}angular.forEach(n.objEntityDetail.OneToOneSelectedTableCollection,i);t.IsSelected=!0};n.OnOpenOneToOneDetailClick=function(n){n.blnDetailsGridOpen=!0};n.OnCloseOneToOneDetailClick=function(n){n.blnDetailsGridOpen=!1;n.FormattedClassName=n.Attribute};n.OnAddCollectionRowClick=function(){function i(n){n.IsSelected&&(n.blnDetailsGridOpen=!1);n.IsSelected=!1}var t={ForeigenKey:"",TableName:"",FormattedClassName:"",EntityName:"",ObjectName:"",BusinessObjectName:"",BaseBusinessObjectName:"busBase",FolderName:n.objEntityDetail.Path};t.ForeigenKeyCollection=[];t.SortOrderCollection=[];t.DefaultSortOrderLst=["asc","desc"];t.lstBusinessObjects=[];t.BusinessObjects=[];t.lstCodeValues=[];t.dtDOColumnDetail=undefined;t.dtCDOXmlColumns=undefined;t.isFromTable=!1;angular.forEach(n.objEntityDetail.OneToManySelectedTableCollection,i);t.blnDetailsGridOpen=!0;t.IsSelected=!0;n.objEntityDetail.OneToManySelectedTableCollection.push(t);n.objRelatedProperties.isFinishDisable()};n.canDeleteOneToMany=function(){return n.objEntityDetail.OneToManySelectedTableCollection?n.objEntityDetail.OneToManySelectedTableCollection.some(function(n){return n.IsSelected}):!1};n.OnDeleteCollectionRowClick=function(){function r(i){t=n.objEntityDetail.OneToManySelectedTableCollection.indexOf(i);n.objEntityDetail.OneToManySelectedTableCollection.splice(n.objEntityDetail.OneToManySelectedTableCollection.indexOf(i),1)}var t=0,i=n.objEntityDetail.OneToManySelectedTableCollection.filter(function(n){return n.IsSelected});i.length&&(angular.forEach(i,r),t<n.objEntityDetail.OneToManySelectedTableCollection.length?n.objEntityDetail.OneToManySelectedTableCollection[t].IsSelected=!0:n.objEntityDetail.OneToManySelectedTableCollection.length>0&&(n.objEntityDetail.OneToManySelectedTableCollection[t-1].IsSelected=!0));n.objRelatedProperties.isFinishDisable()};n.OnSelectCollectionRow=function(t){function i(n){n.IsSelected=!1}angular.forEach(n.objEntityDetail.OneToManySelectedTableCollection,i);t.IsSelected=!0};n.OnOpenOneToManyDetailClick=function(n){n.blnDetailsGridOpen=!0};n.OnCloseOneToManyDetailClick=function(n){n.blnDetailsGridOpen=!1;n.FormattedClassName=n.Attribute};n.onOneToOneBusObjChange=function(){var t=n.objEntityDetail.OneToOneSelectedTableCollection.filter(function(n){return n.IsSelected}),i;t&&t.length>0&&(i=n.lstMainTable.filter(function(n){return n.BusinessObjectName==t[0].BusinessObjectName}),i.length&&i.length>0&&(t[0].ObjectName=i[0].FormattedClassName,t[0].TableName=i[0].ID,t[0].EntityName="ent"+i[0].FormattedClassName,t[0].FormattedClassName=i[0].FormattedClassName));n.objRelatedProperties.isFinishDisable()};n.onOneToManyBusObjChange=function(){var t=n.objEntityDetail.OneToManySelectedTableCollection.filter(function(n){return n.IsSelected}),i;t&&t.length>0&&(i=n.lstMainTable.filter(function(n){return n.BusinessObjectName==t[0].BusinessObjectName}),i.length&&i.length>0&&(t[0].ObjectName=i[0].FormattedClassName,t[0].TableName=i[0].ID,t[0].EntityName="ent"+i[0].FormattedClassName,t[0].FormattedClassName=i[0].FormattedClassName,t[0].SortOrderCollection=[],t[0].SortOrderCollection.push(""),t[0].ForeigenKeyCollection=[],t[0].ForeigenKeyCollection.push(""),t[0].SortOrder="",t[0].ForeigenKey="",$.connection.hubCreateNewObject.server.getDoTableColumnDetails(t[0].TableName).done(function(t){n.receiveDoTableColumnDetailsForChildTableWhileEditing(t)})));n.objRelatedProperties.isFinishDisable()};n.receiveDoTableColumnDetailsForChildTableWhileEditing=function(t){n.$apply(function(){function r(n){i[0].SortOrderCollection.push(n.column_name.toLowerCase());i[0].ForeigenKeyCollection.push(n.column_name.toLowerCase());n.key_no+""=="1"&&(i[0].SortOrder=n.column_name.toLowerCase())}var i=n.objEntityDetail.OneToManySelectedTableCollection.filter(function(n){return n.IsSelected});i&&i.length>0&&(i[0].dtDOColumnDetail=t,angular.forEach(i[0].dtDOColumnDetail,r),i[0].DefaultSortOrder="asc")})};n.objRelatedProperties.validateOneToOne=function(){var t=!0;return n.objRelatedProperties.ErrorMessageForDisplay="",n.objEntityDetail.OneToOneSelectedTableCollection&&n.objEntityDetail.OneToOneSelectedTableCollection.some(function(n){return!n.isFromTable&&(!n.Attribute||n.Attribute.trim()=="")})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Enter the Attribute Name for one of the One To One objects."),n.objEntityDetail.OneToOneSelectedTableCollection&&n.objEntityDetail.OneToOneSelectedTableCollection.some(function(n){return!n.ObjectName||n.ObjectName.trim()==""})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Enter the Object Name for one of the One To One objects."),n.objEntityDetail.OneToOneSelectedTableCollection&&n.objEntityDetail.OneToOneSelectedTableCollection.some(function(n){return!n.FolderName||n.FolderName.trim()==""})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Enter the Folder for one of the One To One objects."),n.objEntityDetail.OneToOneSelectedTableCollection&&n.objEntityDetail.OneToOneSelectedTableCollection.some(function(t){return!t.isFromTable&&(!t.EntityName||t.EntityName.trim()!=""&&!n.CheckEntityIsValidOrNot(t.EntityName.trim()))})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Invalid Entity Name for one of the One To One objects."),n.objEntityDetail.OneToOneSelectedTableCollection&&n.objEntityDetail.OneToOneSelectedTableCollection.some(function(n){return n.isFromTable&&!n.IsExistingEntity&&(!n.EntityName||n.EntityName.trim()!=""&&!n.EntityName.startsWith("ent"))})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Entity Name should start with 'ent' for One To One objects."),n.objEntityDetail.OneToOneSelectedTableCollection&&n.objEntityDetail.OneToOneSelectedTableCollection.some(function(t){return t.isFromTable&&!t.IsExistingEntity&&(!t.EntityName||t.EntityName.trim()!=""&&n.CheckEntityIsValidOrNot(t.EntityName.trim()))})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Entity is already associated with busisness object/table for one of the One To One objects."),n.objEntityDetail.OneToOneSelectedTableCollection&&n.objEntityDetail.OneToOneSelectedTableCollection.some(function(n){return!n.EntityName||n.EntityName.trim()==""})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Enter the Entity Name for one of the One To One objects."),t};n.CheckEntityIsValidOrNot=function(n){var t=!1,r=u.getEntityIntellisense(),i=r.filter(function(t){return t.ID&&t.ID==n});return i&&i.length>0&&(t=!0),t};n.objRelatedProperties.validateOneToMany=function(){var t=!0;return n.objRelatedProperties.ErrorMessageForDisplay="",n.objEntityDetail.OneToManySelectedTableCollection&&n.objEntityDetail.OneToManySelectedTableCollection.some(function(n){return!n.isFromTable&&(!n.Attribute||n.Attribute.trim()=="")})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Enter the Attribute Name for one of the One To Many objects."),n.objEntityDetail.OneToManySelectedTableCollection&&n.objEntityDetail.OneToManySelectedTableCollection.some(function(n){return!n.ObjectName||n.ObjectName.trim()==""})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Enter the Object Name for one of the One To Many objects."),n.objEntityDetail.OneToManySelectedTableCollection&&n.objEntityDetail.OneToManySelectedTableCollection.some(function(n){return!n.FolderName||n.FolderName.trim()==""})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Enter the Folder for one of the One To Many objects."),n.objEntityDetail.OneToManySelectedTableCollection&&n.objEntityDetail.OneToManySelectedTableCollection.some(function(t){return!t.isFromTable&&(!t.EntityName||t.EntityName.trim()!=""&&!n.CheckEntityIsValidOrNot(t.EntityName.trim()))})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Invalid Entity Name for one of the One To Many objects."),n.objEntityDetail.OneToManySelectedTableCollection&&n.objEntityDetail.OneToManySelectedTableCollection.some(function(n){return n.isFromTable&&!n.IsExistingEntity&&(!n.EntityName||n.EntityName.trim()!=""&&!n.EntityName.startsWith("ent"))})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Entity Name should start with 'ent' for One To Many objects."),n.objEntityDetail.OneToManySelectedTableCollection&&n.objEntityDetail.OneToManySelectedTableCollection.some(function(t){return t.isFromTable&&!t.IsExistingEntity&&(!t.EntityName||t.EntityName.trim()!=""&&n.CheckEntityIsValidOrNot(t.EntityName.trim()))})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Entity is already associated with busisness object/table for one of the One To Many objects."),n.objEntityDetail.OneToManySelectedTableCollection&&n.objEntityDetail.OneToManySelectedTableCollection.some(function(n){return!n.EntityName||n.EntityName.trim()==""})&&(t=!1,n.objRelatedProperties.ErrorMessageForDisplay="Enter the Entity Name for one of the One To Many objects."),t};n.objRelatedProperties.OnEntityFieldBlur=function(t){if(!t.isFromTable){var i=t.EntityName,f=u.getEntityIntellisense(),r=f.filter(function(n){return n.ID==i});r&&r.length>0&&(t.BusinessObjectName=r[0].BusinessObjectName);t.Attribute=i.substring(3);t.ObjectName=i.substring(3)}n.objRelatedProperties.isFinishDisable()};n.objRelatedProperties.isFinishDisable=function(){var t=!0;return n.objRelatedProperties.validateOneToOne()&&n.objRelatedProperties.validateOneToMany()&&(t=!1),n.objRelatedProperties.isEntityFinishDisable=t,t};n.validateEntTableSchema=function(){var i=u.getEntityIntellisense(),r=[];if(i&&angular.isArray(i)&&(r=i.filter(function(n){return n.EntityName=="entTableSchema"})),r.length>0){var t=r[0],n="",f="";t.Queries.some(function(n){return n.ID=="GetTableList"})||(n+=" GetTableList ,");t.Queries.some(function(n){return n.ID=="GetColumnDetailCDO"})||(n+=" GetColumnDetailCDO ,");t.Queries.some(function(n){return n.ID=="GetPrimaryKeyDetails"})||(n+=" GetPrimaryKeyDetails ,");t.Queries.some(function(n){return n.ID=="GetChildrenTables"})||(n+=" GetChildrenTables");n&&n.length>0&&(n=n.substring(0,n.length-1),f="entTableSchema does not contain Query-"+n+".",alert(f))}};n.objCorrespondenceDetail.CanShowCorrespondenceSteps=function(){var t=!0;return n.objNewItems.SelectedOption=="Correspondence"&&(t=!1),t};n.objCorrespondenceDetail.InitCorrespondence=function(){var r,t,i;n.objCorrespondenceDetail.CorTemplateCollection=[];n.objCorrespondenceDetail.MasterTemplateCollection=[];n.objCorrespondenceDetail.ConditionalRuleCollection=[];n.objCorrespondenceDetail.AssociatedFormCollection=[];n.objCorrespondenceDetail.SfwTemplate="";n.objCorrespondenceDetail.SfwEntity="";n.objCorrespondenceDetail.Path="";n.objCorrespondenceDetail.SfwResource="";n.objCorrespondenceDetail.SfwMasterTemplate="";n.objCorrespondenceDetail.SfwConditionalRule="";n.objCorrespondenceDetail.IsUpdateMasterTemplateEnable=!1;n.objCorrespondenceDetail.PopulateCorrespondenceTemplate();n.objCorrespondenceDetail.LoadMasterTemplate();n.objCorrespondenceDetail.PopulateAllCorrespondenceTemplate();n.SelectedEntity&&n.objNewItems.SelectedOption=="Correspondence"&&(n.objCorrespondenceDetail.SfwEntity=n.SelectedEntity,n.objCorrespondenceDetail.onEntityChange(),r=u.getEntityIntellisense(),t=r.filter(function(t){return t.ID==n.SelectedEntity}),t&&t.length>0&&t[0].FilePath.contains(".")&&(n.xmlFileLocation?i=t[0].FilePath.substring(n.xmlFileLocation.length+1,t[0].FilePath.lastIndexOf("\\")):(i=t[0].FilePath.substring(0,t[0].FilePath.lastIndexOf("\\")),i=i.substring(i.lastIndexOf("\\")+1)),n.objCorrespondenceDetail.Path=i));n.objCorrespondenceDetail.isFinishDisable()};n.objCorrespondenceDetail.PopulateCorrespondenceTemplate=function(){i.IsLoading=!0;$.connection.hubCreateNewObject.server.loadCorrespondenceTemplate(!1).done(function(t){n.objCorrespondenceDetail.receiveCorrespondenceTemplate(t)})};n.objCorrespondenceDetail.receiveCorrespondenceTemplate=function(t){n.$apply(function(){n.objCorrespondenceDetail.CorTemplateCollection=t;i.IsLoading=!1})};n.objCorrespondenceDetail.LoadMasterTemplate=function(){i.IsLoading=!0;$.connection.hubCreateNewObject.server.loadMasterTemplate().done(function(t){n.$apply(function(){n.objCorrespondenceDetail.MasterTemplateCollection=t;i.IsLoading=!1})})};n.objCorrespondenceDetail.PopulateAllCorrespondenceTemplate=function(){$.connection.hubCorrespondence.server.getListOfAllTemplates().done(function(t){n.$apply(function(){n.objCorrespondenceDetail.AllCorTemplateCollection=t})})};n.objCorrespondenceDetail.SelectAssociatedForm=function(t){n.objCorrespondenceDetail.SelectedAssociatedForm=t};n.objCorrespondenceDetail.OnAssociatedFormClick=function(t){if(n.objCorrespondenceDetail.SelectedAssociatedForm=t,n.objCorrespondenceDetail.SelectedAssociatedForm){var r=n.$new();r.SelectedAssociatedForm=n.objCorrespondenceDetail.SelectedAssociatedForm;r.selectedfield={};r.onCloseClick=function(){r.entityTreeDialog.close();n.objCorrespondenceDetail.isFinishDisable()};r.onOKClick=function(){if(r.SelectedAssociatedForm.SelectedField){var i=getDisplayedEntity(n.objCorrespondenceDetail.LstDisplayedEntities),t=i.strDisplayName;fieldName=r.SelectedAssociatedForm.SelectedField.ID;t!=""&&(fieldName=t+"."+r.SelectedAssociatedForm.SelectedField.ID);n.objCorrespondenceDetail.SelectedAssociatedForm.SfwTargetBusinessObject=fieldName;n.objCorrespondenceDetail.SelectedAssociatedForm.SfwSelectedEntity=r.SelectedAssociatedForm.SelectedField.Entity}r.onCloseClick()};r.entityTreeDialog=i.showDialog(r,"Associated Forms","CreateNewObject/views/Correspondence/AssociatedForms.html")}};n.objCorrespondenceDetail.onCorTemplateChange=function(){n.objCorrespondenceDetail.PopulateFormTemplate();n.objCorrespondenceDetail.isFinishDisable()};n.objCorrespondenceDetail.PopulateFormTemplate=function(){n.objCorrespondenceDetail.SfwTemplate&&n.objCorrespondenceDetail.CorTemplateCollection.some(function(t){return t==n.objCorrespondenceDetail.SfwTemplate})?(i.IsLoading=!0,n.objCorrespondenceDetail.AssociatedFormCollection=[],$.connection.hubCreateNewObject.server.loadFormTemplate(n.objCorrespondenceDetail.SfwTemplate).done(function(t){n.$evalAsync(function(){n.objCorrespondenceDetail.AssociatedFormCollection=t;n.objCorrespondenceDetail.PopulateDetails();i.IsLoading=!1;n.objCorrespondenceDetail.isFinishDisable()})})):n.objCorrespondenceDetail.AssociatedFormCollection=[]};n.objCorrespondenceDetail.PopulateDetails=function(){function r(n){if(n.SfwFormBusinessObject!=undefined&&n.SfwFormBusinessObject!=""){var i=n.SfwFormBusinessObject;if(t=="")t=i;else if(t!=i){t="";return}}}function u(n){i=n.FormLocation}var t="",i="";angular.forEach(n.objCorrespondenceDetail.AssociatedFormCollection,r);angular.forEach(n.objCorrespondenceDetail.AssociatedFormCollection,u);n.SelectedEntity||(n.objCorrespondenceDetail.SfwEntity="",n.objCorrespondenceDetail.SfwRemoteObject="",t!=undefined&&t!=""&&(n.objCorrespondenceDetail.SfwEntity=t));n.objCorrespondenceDetail.Path||(n.objCorrespondenceDetail.Path=i);n.objCorrespondenceDetail.SfwTemplate&&$.connection.hubCreateNewObject.server.isUpdateMasterTemplateEnable(n.objCorrespondenceDetail.SfwTemplate).done(function(t){n.$apply(function(){t&&(n.objCorrespondenceDetail.SfwMasterTemplate="");n.objCorrespondenceDetail.IsUpdateMasterTemplateEnable=t})})};n.CreateCorrespondense=function(){function r(n){n.SelectedField=undefined}var t=[];t.push(n.objCorrespondenceDetail.SfwTemplate);t.push(n.objCorrespondenceDetail.SfwRemoteObject);angular.forEach(n.objCorrespondenceDetail.AssociatedFormCollection,r);t.push(n.objCorrespondenceDetail.AssociatedFormCollection);t.push(n.objCorrespondenceDetail.SfwConditionalRule);t.push(n.objCorrespondenceDetail.SfwResource);t.push(n.objCorrespondenceDetail.Path);t.push(n.objCorrespondenceDetail.SfwMasterTemplate);t.push(n.objCorrespondenceDetail.IsUpdateMasterTemplateEnable);t.push(n.objCorrespondenceDetail.SfwEntity);t.push(n.objCorrespondenceDetail.sfwHeaderTemplate);t.push(n.objCorrespondenceDetail.sfwFooterTemplate);n.objDirFunctions.prepareExtraFieldData&&n.objDirFunctions.prepareExtraFieldData();t.push(n.objExtraFields);$.connection.hubCreateNewObject.server.createCorrespondence(t).done(function(t){var u=t,r;u&&(i.openFile(u,!0),r=getScopeByFileName(n.SelectedEntity),r!=undefined&&r&&r.lstItemsCorrList&&r.lstItemsCorrList.push(u),n.$evalAsync(function(){i.IsLoading=!1}),n.dialogForNew.close())})};n.objCorrespondenceDetail.onEntityChange=function(){n.objCorrespondenceDetail.isFinishDisable()};n.objCorrespondenceDetail.isFinishDisable=function(){var t=!1;if(n.objCorrespondenceDetail.ErrorMessageForDisplay="",n.objCorrespondenceDetail.ValidateCorrespondenceTemplate())if(n.objCorrespondenceDetail.ValidateEntityName())if(n.objCorrespondenceDetail.ValidateTargetBusObject())if(n.objCorrespondenceDetail.SfwResource&&n.objCorrespondenceDetail.SfwResource!=""){if(n.resourceList&&n.resourceList.indexOf(n.objCorrespondenceDetail.SfwResource.trim())<=-1)return n.objCorrespondenceDetail.ErrorMessageForDisplay="Error: invalid Resource id.",!1;n.ValidatePath(n.objCorrespondenceDetail,n.objCorrespondenceDetail.Path)?n.objCorrespondenceDetail.ValidateMasterTemplate()||(t=!0):t=!0}else n.objCorrespondenceDetail.ErrorMessageForDisplay="Error: Please select a resource.",t=!0;else t=!0;else t=!0;else t=!0;return n.objCorrespondenceDetail.isCorrespondenceDetailFinishDisable=t,t};n.objCorrespondenceDetail.ValidateCorrespondenceTemplate=function(){var t=!0;return n.objCorrespondenceDetail.SfwTemplate==undefined||n.objCorrespondenceDetail.SfwTemplate==""?(t=!1,n.objCorrespondenceDetail.ErrorMessageForDisplay="Error: Please select a Correspondence Template."):n.objCorrespondenceDetail.CorTemplateCollection.some(function(t){return t==n.objCorrespondenceDetail.SfwTemplate})||(n.objCorrespondenceDetail.ErrorMessageForDisplay="Error: Invalid Correspondence Template.",t=!1),t};n.objCorrespondenceDetail.ValidateEntityName=function(){var t=!0,i;return n.objCorrespondenceDetail.SfwEntity==undefined||n.objCorrespondenceDetail.SfwEntity==""?(t=!1,n.objCorrespondenceDetail.ErrorMessageForDisplay="Error: Please select a Entity."):(i=u.getEntityIntellisense(),i.some(function(t){return t.ID==n.objCorrespondenceDetail.SfwEntity})||(n.objCorrespondenceDetail.ErrorMessageForDisplay="Error: Invalid Entity.",t=!1)),t};n.objCorrespondenceDetail.ValidateTargetBusObject=function(){var t=!0;return n.objCorrespondenceDetail.AssociatedFormCollection.length>0&&angular.forEach(n.objCorrespondenceDetail.AssociatedFormCollection,function(i){var r,u;i.SfwFormBusinessObject!=undefined&&i.SfwFormBusinessObject!=""&&(i.SfwTargetBusinessObject==undefined||i.SfwTargetBusinessObject==""?(r=i.SfwFormBusinessObject,r!=n.objCorrespondenceDetail.SfwEntity&&(t=!1,n.objCorrespondenceDetail.ErrorMessageForDisplay="Please select a Target Entity for the form.")):(u=i.SfwSelectedEntity,u!=n.objCorrespondenceDetail.SfwEntity&&(t=!1,n.objCorrespondenceDetail.ErrorMessageForDisplay="The Target Entity must be of type main Entity.")))}),t};n.objCorrespondenceDetail.ValidateMasterTemplate=function(){var t=!0;return n.objCorrespondenceDetail.IsUpdateMasterTemplateEnable&&(n.objCorrespondenceDetail.SfwMasterTemplate==undefined||n.objCorrespondenceDetail.SfwMasterTemplate=="")&&(t=!1,n.objCorrespondenceDetail.ErrorMessageForDisplay="Error: Please select a Master Template for the Correspondence."),t};n.CreateFile=function(){var t={};t.FileName=n.objFileDetails.FileName;t.FileID=n.objFileDetails.FileID;t.Description=n.objFileDetails.Description;t.FileType=n.objFileDetails.FileType;n.objFileDetails.FileType=="Outbound"&&(t.QueryID=n.objFileDetails.QueryID,t.ObjectMethod=n.objFileDetails.ObjectMethod,t.FileCollection=n.objFileDetails.FileCollection,t.strFileName=n.objFileDetails.strFileName);t.Path=n.objFileDetails.Path;t.FileObject=n.objFileDetails.ObjectID;t.ProgressCounter=n.objFileDetails.ProgressCounter;t.RecordType=n.objFileDetails.RecordType;t.DelimitedCharacter=n.objFileDetails.DelimitedCharacter;t.TransactionCodePosition=n.objInboundOutboundDetails.TransactionCodePosition;t.TransactionCodeLength=n.objInboundOutboundDetails.TransactionCodeLength;t.HeaderGroupPosition=n.objInboundOutboundDetails.HeaderGroupPosition;t.HeaderGroupLength=n.objInboundOutboundDetails.HeaderGroupLength;t.InboundMask=n.objInboundOutboundDetails.InboundMask;t.BasePath=n.objInboundOutboundDetails.BasePath;t.MailBoxPathCode=n.objInboundOutboundDetails.MailBoxPathCode;t.MailBoxKey=n.objInboundOutboundDetails.MailBoxKey;t.MailBoxPath=n.objInboundOutboundDetails.MailBoxPath;t.ProcessPathCode=n.objInboundOutboundDetails.ProcessPathCode;t.ProcessPathKey=n.objInboundOutboundDetails.ProcessPathKey;t.ProcessPath=n.objInboundOutboundDetails.ProcessPath;t.StagingPathCode=n.objInboundOutboundDetails.StagingPathCode;t.StagingPathKey=n.objInboundOutboundDetails.StagingPathKey;t.StagingPath=n.objInboundOutboundDetails.StagingPath;t.ErrorPathCode=n.objInboundOutboundDetails.ErrorPathCode;t.ErrorPathKey=n.objInboundOutboundDetails.ErrorPathKey;t.ErrorPath=n.objInboundOutboundDetails.ErrorPath;t.RecordLayout=n.objInboundOutboundDetails.RecordLayout;t.sfwOutboundProcessDetail=n.objInboundOutboundDetails.SfwProcessDetail;t.SfwProcessDetail=n.objFileDetails.ProcessDetail;t.SfwRecieveToFileDetail=n.objFileDetails.RecieveToFileDetail;t.SfwUploadInParallel=n.objFileDetails.UploadInParallel;t.SfwUploadToFileDetail=n.objFileDetails.UploadToFileDetail;t.SfwGetGroupValueFromHeader=n.objFileDetails.GetGroupValueFromHeader;t.SfwProcessInParallel=n.objFileDetails.ProcessInParallel;t.SfwCommitSingle=n.objFileDetails.CommitSingle;t.IsProcessInGroup=n.objInboundOutboundDetails.IsProcessInGroup;n.objDirFunctions.prepareExtraFieldData&&n.objDirFunctions.prepareExtraFieldData();t.ExtraFields=n.objExtraFields;$.connection.hubCreateNewObject.server.createFiles(t).done(function(t){var r=t;r&&(i.openFile(r,!0),n.$evalAsync(function(){i.IsLoading=!1}),n.dialogForNew.close())})};n.objFileDetails.CanShowFileSteps=function(){var t=!0;return n.objNewItems.SelectedOption=="File"&&(t=!1),t};n.objFileDetails.InitFile=function(){n.objFileDetails.FileType="Inbound";n.objFileDetails.RecordType="FixedLength";n.objFileDetails.ObjectID="";n.objFileDetails.FileName="";n.objFileDetails.FileID="";n.objFileDetails.Description="";n.objFileDetails.Path="";n.objFileDetails.ProgressCounter="";n.objFileDetails.DelimitedCharacter="";n.objFileDetails.FileCollection="";n.objFileDetails.strFileName="";n.objFileDetails.ObjectMethod="";n.objFileDetails.QueryID="";n.objInboundOutboundDetails.SfwProcessDetail||(n.objInboundOutboundDetails.SfwProcessDetail="True");$.connection.hubCreateNewObject.server.getListOfFormName().done(function(t){n.lstFormsList=[];n.$apply(function(){n.lstFormsList=t})});$.connection.hubCreateNewObject.server.getListOfFormID().done(function(t){n.lstFormsIDList=[];n.$apply(function(){n.lstFormsIDList=t})});n.objFileDetails.isNextDisable()};n.objFileDetails.UpdateOnFileDetailsNext=function(){return n.objInboundOutboundDetails.isFinishDisable(),!1};n.objFileDetails.OnInboundObjectIdChange=function(){n.objFileDetails.IsChildOfInboundFileBase?(n.objFileDetails.UploadToFileDetail=!0,n.objFileDetails.CommitSingle=!0,n.objFileDetails.ProcessDetail=!0):(n.objFileDetails.RecieveToFileDetail=!1,n.objFileDetails.UploadInParallel=!1,n.objFileDetails.UploadToFileDetail=!1,n.objFileDetails.GetGroupValueFromHeader=!1,n.objFileDetails.ProcessInParallel=!1,n.objFileDetails.CommitSingle=!1,n.objFileDetails.ProcessDetail=!1);n.objFileDetails.isNextDisable()};n.objFileDetails.OnOutboundObjectIdChange=function(){$.connection.hubCreateNewObject.server.populateObjectMethod(n.objFileDetails.ObjectID).done(function(t){n.$evalAsync(function(){n.objFileDetails.lstObjectMethod=t})});$.connection.hubCreateNewObject.server.populateFileCollection(n.objFileDetails.ObjectID).done(function(t){n.$evalAsync(function(){n.objFileDetails.lstFileCollection=t})});n.objFileDetails.isNextDisable()};n.populatePathCode=function(){$.connection.hubCreateNewObject.server.populatePath().done(function(t){n.lstPopulateCode=[];n.$apply(function(){n.lstPopulateCode=t})})};n.PopulateBasePath=function(){$.connection.hubCreateNewObject.server.populateBasePath().done(function(t){n.$apply(function(){n.objInboundOutboundDetails.BasePath=t})})};n.SelectFileForPath=function(t){t&&(t=="MailBoxPath"?$.connection.hubCreateNewObject.server.openDialog(n.objInboundOutboundDetails.MailBoxPath,t):t=="ProcessPath"?$.connection.hubCreateNewObject.server.openDialog(n.objInboundOutboundDetails.ProcessPath,t):t=="StagingPath"?$.connection.hubCreateNewObject.server.openDialog(n.objInboundOutboundDetails.StagingPath,t):t=="ErrorPath"&&$.connection.hubCreateNewObject.server.openDialog(n.objInboundOutboundDetails.ErrorPath,t))};n.receiveFolderPathForFile=function(t,i){n.FilePath=undefined;n.$apply(function(){i=="MailBoxPath"?n.objInboundOutboundDetails.MailBoxPath=t:i=="ProcessPath"?n.objInboundOutboundDetails.ProcessPath=t:i=="StagingPath"?n.objInboundOutboundDetails.StagingPath=t:i=="ErrorPath"&&(n.objInboundOutboundDetails.ErrorPath=t)})};n.onChangeOfPathCode=function(t,i){var u=n.lstPopulateCode.filter(function(n){return n.codeValue.toLowerCase()==t.toLowerCase()}),r=u&&u.length>0?u[0].codePath:"";i=="MailBoxPath"?n.objInboundOutboundDetails.MailBoxPath=r:i=="ProcessPath"?n.objInboundOutboundDetails.ProcessPath=r:i=="StagingPath"?n.objInboundOutboundDetails.StagingPath=r:i=="ErrorPath"&&(n.objInboundOutboundDetails.ErrorPath=r);n.objInboundOutboundDetails.isFinishDisable()};n.isExistingPath=function(t){return n.lstPopulateCode&&n.lstPopulateCode.length>0&&t?n.lstPopulateCode.filter(function(n){return n.codeValue==t}).length>0:!1};n.objFileDetails.isNextDisable=function(){var t=!0;return n.objFileDetails.ErrorMessageForDisplay="",n.objFileDetails.ValidateFormName()?n.objFileDetails.ValidateFileID()?n.ValidatePath(n.objFileDetails,n.objFileDetails.Path)?n.objFileDetails.ValidateEntity()?n.objFileDetails.ValidateDelimitedCharacter()||(t=!1):t=!1:t=!1:t=!1:t=!1,n.objFileDetails.isFileDetailsNextDisable=t,t};n.objFileDetails.FileTypeChanged=function(){n.objFileDetails.ObjectID="";n.objFileDetails.IsChildOfInboundFileBase=!1;n.objFileDetails.isNextDisable()};n.objFileDetails.ValidateFormName=function(){var t=!0,i;return n.objFileDetails.FileName?n.objFileDetails.FileName&&n.objFileDetails.FileName.toLowerCase().startsWith("fle")?(n.objFileDetails.ErrorMessageForDisplay="Error: ID can not start with fle.",t=!1):n.objFileDetails.FileName&&n.objFileDetails.FileName.length<=3?(n.objFileDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",t=!1):(isValidFileID(n.objFileDetails.FileName)||(n.objFileDetails.ErrorMessageForDisplay="Error: File Name must not start with digits, contain space(s), special characters(except '-').",t=!1),angular.isArray(n.lstFormsList)&&n.lstFormsList.length>0&&(i=n.lstFormsList.filter(function(t){return t.toLowerCase()=="fle"+n.objFileDetails.FileName.toLowerCase()}),i.length>0&&(n.objFileDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different File Name (ID).",t=!1))):(n.objFileDetails.ErrorMessageForDisplay="Error: Please enter a File Name (ID).",t=!1),t};n.objFileDetails.ValidateFileID=function(){var t=!0,i,r;return n.objFileDetails.IsFileIdValueValid||(n.objFileDetails.FileID?(i=new RegExp("[^0-9]"),i.test(n.objFileDetails.FileID)?(n.objFileDetails.ErrorMessageForDisplay="Error: Invalid File ID.",t=!1):parseInt(n.objFileDetails.FileID)?(r=n.lstFormsIDList.filter(function(t){return t==n.objFileDetails.FileID}),r.length>0&&(n.objFileDetails.ErrorMessageForDisplay="Error: The File ID already exists.\nPlease enter a different File ID.",t=!1)):(n.objFileDetails.ErrorMessageForDisplay="Error: The File ID is too Long.\nPlease enter a different File ID.",t=!1)):(this.ErrorMessageForDisplay="Error: Please enter a File ID.",t=!1)),t};n.objFileDetails.ValidateEntity=function(){var t=!0;return n.objFileDetails.ObjectID||(n.objFileDetails.ErrorMessageForDisplay="Error: File Object cannot be empty.",t=!1),t};n.objFileDetails.ValidateDelimitedCharacter=function(){var t=!0;return n.objFileDetails.RecordType=="Delimited"&&(n.objFileDetails.DelimitedCharacter==undefined||n.objFileDetails.DelimitedCharacter=="")&&(n.objFileDetails.ErrorMessageForDisplay="Error: Please enter a Delimited Character.",t=!1),t};n.objInboundOutboundDetails.isFinishDisable=function(){var t=!0;return n.objInboundOutboundDetails.ErrorMessageForDisplay="",n.objInboundOutboundDetails.ValidateHeaderGroupPosition()?n.objInboundOutboundDetails.ValidateHeaderGroupLength()?n.objInboundOutboundDetails.ValidateTransactionCodePosition()?n.objInboundOutboundDetails.ValidateTransactionCodeLength()?n.objInboundOutboundDetails.ValidateMailBoxPath()?n.objInboundOutboundDetails.ValidateProcessPath()?n.objFileDetails.FileType=="Inbound"&&(n.objInboundOutboundDetails.ValidateStagingPath()?n.objInboundOutboundDetails.ValidateErrorPath()||(t=!1):t=!1):t=!1:t=!1:t=!1:t=!1:t=!1:t=!1,n.objInboundOutboundDetails.isFileFinishDisable=t,t};n.objInboundOutboundDetails.ValidateTransactionCodePosition=function(){var t=!0,i;return n.objFileDetails.FileType=="Inbound"&&n.objInboundOutboundDetails.TransactionCodePosition&&(i=new RegExp("[^0-9]"),i.test(n.objInboundOutboundDetails.TransactionCodePosition)&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Transaction Code Position should be number.",t=!1)),t};n.objInboundOutboundDetails.ValidateTransactionCodeLength=function(){var t=!0,i;return n.objFileDetails.FileType=="Inbound"&&n.objInboundOutboundDetails.TransactionCodeLength&&(i=new RegExp("[^0-9]"),i.test(n.objInboundOutboundDetails.TransactionCodeLength)&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Transaction Code Length should be number.",t=!1)),t};n.objInboundOutboundDetails.ValidateHeaderGroupPosition=function(){var t=!0,i;return n.objFileDetails.FileType=="Inbound"&&(n.objInboundOutboundDetails.HeaderGroupPosition?(i=new RegExp("[^0-9]"),i.test(n.objInboundOutboundDetails.HeaderGroupPosition)&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Header Group Position should be number.",t=!1)):(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Please enter a Header Group Position.",t=!1)),t};n.objInboundOutboundDetails.ValidateHeaderGroupLength=function(){var t=!0,i;return n.objFileDetails.FileType=="Inbound"&&n.objFileDetails.RecordType!="Delimited"&&(n.objInboundOutboundDetails.HeaderGroupLength?(i=new RegExp("[^0-9]"),i.test(n.objInboundOutboundDetails.HeaderGroupLength)&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Header Group Length should be number.",t=!1)):(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Please enter a Header Group Length.",t=!1)),t};n.objInboundOutboundDetails.ValidateMailBoxPath=function(){var t=!0,i;return(n.objInboundOutboundDetails.MailBoxPathCode==undefined||n.objInboundOutboundDetails.MailBoxPathCode=="")&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Please select or enter a Mail Box Path.",t=!1),n.IsPathKey||(n.objInboundOutboundDetails.MailBoxKey==undefined||n.objInboundOutboundDetails.MailBoxKey==""?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Please enter a MailBox Path Key.",t=!1):(i=n.lstPopulateCode.filter(function(t){return t.pathID&&t.pathID==n.objInboundOutboundDetails.MailBoxKey}),i.length>0?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The key '"+n.objInboundOutboundDetails.MailBoxKey+"' already exists.\nPlease enter a different Mail Box Path Key.",t=!1):n.objInboundOutboundDetails.MailBoxPathCode===n.objInboundOutboundDetails.ProcessPathCode?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.MailBoxPathCode+"' is already used for Process Path.\nPlease enter a different  MailBox Path.",t=!1):n.objFileDetails.FileType=="Inbound"&&(n.objInboundOutboundDetails.ProcessPathCode===n.objInboundOutboundDetails.StagingPathCode?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.MailBoxPathCode+"' is already used for Staging Path.\nPlease enter a different  MailBox Path.",t=!1):n.objInboundOutboundDetails.ProcessPathCode===n.objInboundOutboundDetails.ErrorPathCode&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.MailBoxPathCode+"' is already used for Error Path.\nPlease enter a different  MailBox Path.",t=!1)))),t};n.objInboundOutboundDetails.ValidateStagingPath=function(){var t=!0;return n.objInboundOutboundDetails.StagingPathCode==""||n.objInboundOutboundDetails.StagingPathCode==undefined?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Please select or enter a Staging Path.",t=!1):n.lstPopulateCode.some(function(t){return t.codeValue&&t.codeValue.toLowerCase()==n.objInboundOutboundDetails.StagingPathCode.toLowerCase()})&&n.objInboundOutboundDetails.StagingPathCode&&(n.objInboundOutboundDetails.StagingPathCode===n.objInboundOutboundDetails.MailBoxPathCode?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.StagingPathCode+"' is already used for MailBox Path.\nPlease enter a different Staging Path.",t=!1):n.objInboundOutboundDetails.StagingPathCode===n.objInboundOutboundDetails.ErrorPathCode?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.StagingPathCode+"' is already used for Error Path.\nPlease enter a different Staging Path.",t=!1):n.objInboundOutboundDetails.StagingPathCode===n.objInboundOutboundDetails.ProcessPathCode&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.StagingPathCode+"' is already used for Process Path.\nPlease enter a different Staging Path.",t=!1)),t};n.objInboundOutboundDetails.ValidateErrorPath=function(){var t=!0;return n.objInboundOutboundDetails.ErrorPathCode==undefined||n.objInboundOutboundDetails.ErrorPathCode==""?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Please select or enter a Error Path.",t=!1):n.lstPopulateCode.some(function(t){return t.codeValue&&t.codeValue.toLowerCase()==n.objInboundOutboundDetails.ErrorPathCode.toLowerCase()})&&(n.objInboundOutboundDetails.ErrorPathCode===n.objInboundOutboundDetails.MailBoxPathCode?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.ErrorPathCode+"' is already used for MailBox Path.\nPlease enter a different Error Path.",t=!1):n.objInboundOutboundDetails.ErrorPathCode===n.objInboundOutboundDetails.StagingPathCode?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.ErrorPathCode+"' is already used for Staging Path.\nPlease enter a different Error Path.",t=!1):n.objInboundOutboundDetails.ErrorPathCode===n.objInboundOutboundDetails.ProcessPathCode&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.ErrorPathCode+"' is already used for Process Path.\nPlease enter a different Error Path.",t=!1)),t};n.objInboundOutboundDetails.ValidateProcessPath=function(){var t=!0;return n.objInboundOutboundDetails.ProcessPathCode==undefined||n.objInboundOutboundDetails.ProcessPathCode==""?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: Please select or enter a Process Path.",t=!1):n.lstPopulateCode.some(function(t){return t.codeValue&&t.codeValue.toLowerCase()==n.objInboundOutboundDetails.ProcessPathCode.toLowerCase()})&&(n.objInboundOutboundDetails.ProcessPathCode===n.objInboundOutboundDetails.MailBoxPathCode?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.ProcessPathCode+"' is already used for MailBox Path.\nPlease enter a different Process Path.",t=!1):n.objInboundOutboundDetails.FileType=="Inbound"&&(n.objInboundOutboundDetails.ProcessPathCode===n.objInboundOutboundDetails.StagingPathCode?(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.ProcessPathCode+"' is already used for Staging Path.\nPlease enter a different Process Path.",t=!1):n.objInboundOutboundDetails.ProcessPathCode===n.objInboundOutboundDetails.ErrorPathCode&&(n.objInboundOutboundDetails.ErrorMessageForDisplay="Error: The path '"+n.objInboundOutboundDetails.ProcessPathCode+"' is already used for Error Path.\nPlease enter a different Process Path.",t=!1))),t};n.openQueryDialog=function(){n.strPath=n.objFileDetails.Path};n.$on("onQueryClick",function(t,i){n.objFileDetails.QueryID=i});n.objFormsDetails.InitForms=function(){n.objFormsDetails.lstWebSite=[];n.objFormsDetails.MethodType="XmlMethod";n.objFormsDetails.ID="";n.objFormsDetails.sfwResource="";n.objFormsDetails.Path="";n.objFormsDetails.sfwEntity="";n.SelectedEntity&&n.objNewItems.SelectedOption=="Forms"&&(n.objFormsDetails.sfwEntity=n.SelectedEntity,n.objFormsDetails.PopulateFormName());n.objFormsDetails.IsLookup="True";n.objFormsDetails.IsMaintenence="True";n.objFormsDetails.PrevEntityName="";n.objFormsDetails.SfwGridCollection="";n.objLookupFieldsDetails.lstFieldsProperties=[];n.objLookupResultFields.lstResultFields=[];n.objLookupFieldsDetails.lstselectedmultiplelevelfield=[];n.objFormsDetails.isNextDisable()};n.receiveRemoteObjectCollection=function(t){(n.objNewItems.SelectedOption=="HtxWizard"||n.objNewItems.SelectedOption=="HtxMaintenance"||n.objNewItems.SelectedOption=="HtxLookup")&&n.$evalAsync(function(){n.objFormLinkDetails.RemoteObjectCollection=t;n.objFormLinkDetails.RemoteObjectCollection&&n.objFormLinkDetails.RemoteObjectCollection.length>0&&(n.objFormLinkDetails.RemoteObjectCollection.splice(0,0,{dictAttributes:{ID:""}}),n.objFormLinkDetails.onRemoteObjectChange(),(n.objNewItems.SelectedOption=="HtxWizard"||n.objNewItems.SelectedOption=="HtxMaintenance")&&(n.objFormLinkDetails.populateSrvParamtersForNew(n.objFormLinkDetails.NewMethod.sfwMethodName),n.objFormLinkDetails.populateSrvParamtersForUpdate(n.objFormLinkDetails.UpdateMethod.sfwMethodName)))})};n.objFormLinkDetails.populateSrvParamtersForNew=function(t){function r(t){t.Name=="parameter"&&n.paramtersForNewMethod.push(t)}if(n.paramtersForNewMethod=[],t){var i=n.XmlNewMethodsCollection.filter(function(n){return n.dictAttributes.ID==t&&n.dictAttributes.sfwMode!="Update"});i&&i.length>0&&angular.forEach(i[0].Elements,r)}};n.objFormLinkDetails.populateSrvParamtersForUpdate=function(t){function r(t){t.Name=="parameter"&&n.paramtersForUpdateMethod.push(t)}if(n.paramtersForUpdateMethod=[],t){var i=n.XmlUpdateMethodsCollection.filter(function(n){return n.dictAttributes.ID==t&&n.dictAttributes.sfwMode!="New"});i&&i.length>0&&angular.forEach(i[0].Elements,r)}};n.objFormsDetails.onWebSiteChange=function(t){var i=$(t.target);setSingleLevelAutoComplete(i,n.objFormsDetails.lstWebSite)};n.objUserCtrlDetails.InitUserControl=function(){n.objUserCtrlDetails.ID="";n.objUserCtrlDetails.Path="";n.objUserCtrlDetails.sfwEntity="";n.SelectedEntity&&n.objNewItems.SelectedOption=="UserControl"&&(n.objUserCtrlDetails.sfwEntity=n.SelectedEntity,n.objUserCtrlDetails.PopulateFormName(),n.objUserCtrlDetails.sfwEntity==="entPrototype"&&(n.objUserCtrlDetails.isPrototype=!0));n.objUserCtrlDetails.isFinsihDisable()};n.objUserCtrlDetails.ValidateUserCtrl=function(){var t,i,r;if(n.objUserCtrlDetails.ID==undefined||n.objUserCtrlDetails.ID=="")return n.objUserCtrlDetails.ErrorMessageForDisplay="Error: Please enter a User Control ID.",!1;if(isValidFileID(n.objUserCtrlDetails.ID,!0)){if(n.objUserCtrlDetails.ID&&n.objUserCtrlDetails.ID.toLowerCase().startsWith("udc"))return n.objUserCtrlDetails.ErrorMessageForDisplay="Error: ID can not start with udc.",!1;if((n.objUserCtrlDetails.ID!=undefined||n.objUserCtrlDetails.ID!="")&&n.objUserCtrlDetails.ID.length<=3)return n.objUserCtrlDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",!1;if(n.objUserCtrlDetails.ID&&n.objUserCtrlDetails.ID.toLowerCase().endsWith("usercontrol"))return n.objUserCtrlDetails.ErrorMessageForDisplay="Error: ID can not ends with usercontrol.",!1;if(t="udc"+n.objUserCtrlDetails.ID+"UserControl",i=n.lstAllFiles.filter(function(n){return n.FileName.toLowerCase()==t.toLowerCase()}),i.length>0)return n.objUserCtrlDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different User control ID.",!1}else return n.objUserCtrlDetails.ErrorMessageForDisplay="Error: Numeric Values and Special characters are not allowed in Name.",!1;if(!n.ValidatePath(n.objUserCtrlDetails,n.objUserCtrlDetails.Path))return!1;if(n.objUserCtrlDetails.sfwEntity&&n.objUserCtrlDetails.sfwEntity!=""){if(n.objUserCtrlDetails.sfwEntity&&n.objUserCtrlDetails.sfwEntity!=""&&(r=u.getEntityIntellisense(),!r.some(function(t){return t.ID==n.objUserCtrlDetails.sfwEntity})))return n.objUserCtrlDetails.ErrorMessageForDisplay="Error: Invalid Entity.",!1}else return n.objUserCtrlDetails.ErrorMessageForDisplay="Error: Please enter a Entity.",!1;return!0};n.objUserCtrlDetails.isFinsihDisable=function(){var t=!0;return n.objUserCtrlDetails.ErrorMessageForDisplay="",n.objUserCtrlDetails.ValidateUserCtrl()||(t=!1),n.objUserCtrlDetails.isUserCtrlFinsihDisable=t,t};n.objUserCtrlDetails.PopulateFormName=function(){var r,t,i;n.objUserCtrlDetails.ID="";n.objUserCtrlDetails.sfwEntity!=undefined&&n.objUserCtrlDetails.sfwEntity!=""&&(n.objUserCtrlDetails.ID=n.objUserCtrlDetails.sfwEntity.substring(3),r=u.getEntityIntellisense(),t=r.filter(function(t){return t.ID==n.objUserCtrlDetails.sfwEntity}),t&&t.length>0&&t[0].FilePath.contains(".")&&(n.xmlFileLocation?i=t[0].FilePath.substring(n.xmlFileLocation.length+1,t[0].FilePath.lastIndexOf("\\")):(i=t[0].FilePath.substring(0,t[0].FilePath.lastIndexOf("\\")),i=i.substring(i.lastIndexOf("\\")+1)),n.objUserCtrlDetails.Path=i));n.checkAndExecuteLocationCallback(n.objUserCtrlDetails)};n.objUserCtrlDetails.UpdateData=function(){n.objUserCtrlDetails.updateDetails();n.objUserCtrlDetails.UpdateUserCtrlParameters()};n.objUserCtrlDetails.updateDetails=function(){var t="udc"+n.objUserCtrlDetails.ID+"UserControl";n.objUserCtrl={Name:"form",Value:"",dictAttributes:{},Elements:[],Children:[]};n.objUserCtrl.dictAttributes.ID=t;n.objUserCtrl.dictAttributes.sfwEntity=n.objUserCtrlDetails.sfwEntity;n.objUserCtrl.dictAttributes.sfwType="UserControl";n.objUserCtrl.dictAttributes.sfwTitle=t};n.objUserCtrlDetails.UpdateUserCtrlParameters=function(){var t={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i,r,u;for(t.dictAttributes.ID="Main",i={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},r=0;r<3;r++)u={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i.Elements.push(u);t.Elements.push(i);n.objUserCtrl.Elements.push(t)};n.objUserCtrlDetails.toggleIsPrototype=function(){n.objUserCtrlDetails.sfwEntity=n.objUserCtrlDetails.isPrototype?"entPrototype":""};n.objTooltipDetails.InitTooltip=function(){n.objTooltipDetails.ID="";n.objTooltipDetails.sfwResource="";n.objTooltipDetails.Path="";n.objTooltipDetails.sfwEntity="";n.objTooltipDetails.sfwMethodName="";n.objTooltipDetails.isFinsihDisable();n.SelectedEntity&&n.objNewItems.SelectedOption=="Tooltip"&&(n.objTooltipDetails.sfwEntity=n.SelectedEntity,n.objTooltipDetails.PopulateFormName())};n.objTooltipDetails.PopulateFormName=function(){var r,t,i;n.objTooltipDetails.ID="";n.objTooltipDetails.sfwEntity!=undefined&&n.objTooltipDetails.sfwEntity!=""&&(n.objTooltipDetails.ID=n.objTooltipDetails.sfwEntity.substring(3),r=u.getEntityIntellisense(),t=r.filter(function(t){return t.ID==n.objTooltipDetails.sfwEntity}),t&&t.length>0&&t[0].FilePath.contains(".")&&(n.xmlFileLocation?i=t[0].FilePath.substring(n.xmlFileLocation.length+1,t[0].FilePath.lastIndexOf("\\")):(i=t[0].FilePath.substring(0,t[0].FilePath.lastIndexOf("\\")),i=i.substring(i.lastIndexOf("\\")+1)),n.objTooltipDetails.Path=i));n.checkAndExecuteLocationCallback(n.objTooltipDetails)};n.objTooltipDetails.ValidateTooltip=function(){var t,i,r;if(n.objTooltipDetails.ErrorMessageForDisplay="",n.objTooltipDetails.ID==undefined||n.objTooltipDetails.ID=="")return n.objTooltipDetails.ErrorMessageForDisplay="Error: Please enter a Tooltip form ID.",!1;if(isValidFileID(n.objTooltipDetails.ID,!0)){if((n.objTooltipDetails.ID!=undefined||n.objTooltipDetails.ID!="")&&n.objTooltipDetails.ID.length<=3)return n.objTooltipDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",!1;if(n.objTooltipDetails.ID&&n.objTooltipDetails.ID.toLowerCase().startsWith("wfm"))return n.objTooltipDetails.ErrorMessageForDisplay="Error: ID can not start with wfm.",!1;if(n.objTooltipDetails.ID&&n.objTooltipDetails.ID.toLowerCase().endsWith("tooltip"))return n.objTooltipDetails.ErrorMessageForDisplay="Error: ID can not ends with tooltip.",!1;if(t="wfm"+n.objTooltipDetails.ID+"Tooltip",i=n.lstAllFiles.filter(function(n){return n.FileName.toLowerCase()==t.toLowerCase()}),i.length>0)return n.objTooltipDetails.ErrorMessageForDisplay="Error: The File Name "+t+" already exists.\nPlease enter a different tooltip form ID.",!1}else return n.objTooltipDetails.ErrorMessageForDisplay="Error: Numeric Values and Special characters are not allowed in Name.",!1;if(!n.ValidatePath(n.objTooltipDetails,n.objTooltipDetails.Path))return!1;if(n.objTooltipDetails.sfwEntity&&n.objTooltipDetails.sfwEntity!=""){if(n.objTooltipDetails.sfwEntity&&n.objTooltipDetails.sfwEntity!=""&&(r=u.getEntityIntellisense(),!r.some(function(t){return t.ID==n.objTooltipDetails.sfwEntity})))return n.objTooltipDetails.ErrorMessageForDisplay="Error: Invalid Entity.",!1}else return n.objTooltipDetails.ErrorMessageForDisplay="Error: Please enter a Entity.",!1;return!0};n.objTooltipDetails.isFinsihDisable=function(){var t=!0;return n.objTooltipDetails.ErrorMessageForDisplay="",n.objTooltipDetails.ValidateTooltip()||(t=!1),n.objTooltipDetails.isToolTipDetailsFinishDisable=t,t};n.objTooltipDetails.UpdateData=function(){n.objTooltipDetails.updateDetails();n.objTooltipDetails.UpdateCenterMiddle()};n.objTooltipDetails.updateDetails=function(){var t="wfm"+n.objTooltipDetails.ID+"Tooltip";n.objTooltipForm={Name:"form",Value:"",dictAttributes:{},Elements:[],Children:[]};n.objTooltipForm.dictAttributes.ID=t;n.objTooltipForm.dictAttributes.sfwResource=n.objTooltipDetails.sfwResource;n.objTooltipForm.dictAttributes.sfwEntity=n.objTooltipDetails.sfwEntity;n.objTooltipForm.dictAttributes.sfwActive="True";n.objTooltipForm.dictAttributes.sfwStatus="Review";n.objTooltipForm.dictAttributes.sfwType="Tooltip";n.objTooltipForm.dictAttributes.sfwTitle=t};n.objTooltipDetails.UpdateInitialLoad=function(){var t={Name:"initialload",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]},i={Name:"callmethods",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]};n.objTooltipDetails.sfwMethodName&&(i.dictAttributes.sfwMethodName=n.objTooltipDetails.sfwMethodName);t.Elements.push(i);n.objTooltipForm.Elements.push(t)};n.objTooltipDetails.UpdateCenterMiddle=function(){var f={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},e={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},o={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},r={Name:"sfwPanel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},t,i,u;r.dictAttributes.ID="pnlMainPanel";u={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.Elements.push(i);t.Elements.push(i);t.Elements.push(i);t.Elements.push(i);u.Elements.push(t);r.Elements.push(u);o.Elements.push(r);e.Elements.push(o);f.Elements.push(e);n.objTooltipForm.Elements.push(f)};n.objFormsDetails.CanShowFormsSteps=function(){var t=!0;return n.objNewItems.SelectedOption=="Forms"&&(t=!1),t};n.objFormsDetails.UpdateOnFormDetailsNext=function(){var i=!1,t=!1;return n.objFormsDetails.ShowLookupStep(),n.objFormsDetails.IsLookup&&n.objFormsDetails.IsLookup.toLowerCase()=="true"&&(n.UpdateData(),n.objFormsDetails.PrevEntityName&&n.objFormsDetails.PrevEntityName==n.objFormsDetails.sfwEntity||(n.objFormsDetails.PrevEntityName=n.objFormsDetails.sfwEntity,i=!0),n.objFormsDetails.IsShowMainQuery&&(!n.objFormsDetails.PrevMainQuery||n.objFormsDetails.PrevMainQuery!=n.objFormsDetails.MainQueryID)&&(n.objFormsDetails.PrevMainQuery=n.objFormsDetails.MainQueryID,t=!0),n.objFormsDetails.IsShowMainQuery&&n.objFormsDetails.MainQueryID&&n.objFormsDetails.IsShowMainQuery&&n.objFormsDetails.MainQueryID&&t&&(n.UpdateInitialLoad(),$.connection.hubForm.server.getEntityQueryColumns(n.objFormsDetails.MainQueryID,"").done(function(t){n.receiveQueryColumnsForLookup(t)})),n.objGridView={Name:"sfwGridView",prefix:"swc",Value:"",dictAttributes:{ID:"dgrResult",AllowPaging:"True",AllowSorting:"True",sfwSelection:"Many"},Elements:[],Children:[]}),n.objFormsDetails.IsMaintenence&&n.objFormsDetails.IsMaintenence.toLowerCase()=="true"&&n.UpdateDataForMaintenance(),(n.objFormsDetails.sfwEntity&&i||n.objFormsDetails.IsShowMainQuery&&n.objFormsDetails.MainQueryID&&t)&&(n.objLookupFieldsDetails.lstFieldsProperties=[],n.objFormsDetails.SfwGridCollection="",n.objLookupResultFields.lstResultFields=[],n.objLookupFieldsDetails.lstselectedmultiplelevelfield=[]),!1};n.receiveQueryColumnsForLookup=function(t){n.objLookupFieldsDetails.lstQueryColumn=[];n.$apply(function(){n.objLookupFieldsDetails.lstQueryColumn=t})};n.objFormsDetails.PopulateFormName=function(){var r,t,i;n.objFormsDetails.ID="";n.objFormsDetails.IsShowMainQuery=!1;n.objFormsDetails.sfwEntity!=undefined&&n.objFormsDetails.sfwEntity!=""&&(n.objFormsDetails.ID=n.objFormsDetails.sfwEntity.substring(3),r=u.getEntityIntellisense(),t=r.filter(function(t){return t.ID==n.objFormsDetails.sfwEntity}),t&&t.length>0&&(t[0].FilePath.contains(".")&&(n.xmlFileLocation?i=t[0].FilePath.substring(n.xmlFileLocation.length+1,t[0].FilePath.lastIndexOf("\\")):(i=t[0].FilePath.substring(0,t[0].FilePath.lastIndexOf("\\")),i=i.substring(i.lastIndexOf("\\")+1)),n.objFormsDetails.Path=i),t[0].TableName||(n.objFormsDetails.IsShowMainQuery=!0)));n.checkAndExecuteLocationCallback(n.objFormsDetails)};n.objFormsDetails.isNextDisable=function(t){n.objFormsDetails.isFormDetailsNextDisable=!0;var i=!0;return n.objFormsDetails.ErrorMessageForDisplay="",n.objFormsDetails.ValidateEntity()?n.objFormsDetails.ValidateFormName()?n.ValidatePath(n.objFormsDetails,n.objFormsDetails.Path)?n.objFormsDetails.ValidateFormObject()?n.objFormsDetails.ValidateMainQuery(t)||(i=!1):i=!1:i=!1:i=!1:i=!1,n.objFormsDetails.isFormDetailsNextDisable=i,n.objFormsDetails.ShowLookupStep(),i};n.objFormsDetails.ValidateFormObject=function(){var t=!0;return(n.objFormsDetails.IsLookup==undefined||n.objFormsDetails.IsLookup.toLowerCase()=="false")&&(n.objFormsDetails.IsMaintenence==undefined||n.objFormsDetails.IsMaintenence.toLowerCase()=="false")&&(n.objFormsDetails.ErrorMessageForDisplay="Error: Please Select atleast one Form object.",t=!1),t};n.objFormsDetails.ValidateEntity=function(){var t=!0,i;return n.objFormsDetails.sfwEntity==undefined||n.objFormsDetails.sfwEntity==""?(n.objFormsDetails.ErrorMessageForDisplay="Error: Entity cannot be empty.",t=!1):(i=u.getEntityIntellisense(),i.some(function(t){return t.ID==n.objFormsDetails.sfwEntity})||(n.objFormsDetails.ErrorMessageForDisplay="Error: The entity is not valid. Please enter a different Name (ID).",t=!1)),t};n.objFormsDetails.ValidateFormName=function(){var t=!0,i;return n.objFormsDetails.ID==undefined||n.objFormsDetails.ID==""?(n.objFormsDetails.ErrorMessageForDisplay="Error: Please enter a Form Name (ID).",t=!1):n.objFormsDetails.ID&&n.objFormsDetails.ID.toLowerCase().startsWith("wfm")?(n.objFormsDetails.ErrorMessageForDisplay="Error: ID can not start with wfm.",t=!1):(n.objFormsDetails.ID!=undefined||n.objFormsDetails.ID!="")&&n.objFormsDetails.ID.length<=3?(n.objFormsDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",t=!1):n.objFormsDetails.ID&&(n.objFormsDetails.ID.toLowerCase().endsWith("lookup")||n.objFormsDetails.ID.toLowerCase().endsWith("maintenance"))?(n.objFormsDetails.ErrorMessageForDisplay=n.objFormsDetails.ID.toLowerCase().endsWith("maintenance")?"Error: ID can not ends with maintenance.":"Error: ID can not ends with lookup.",t=!1):(isValidFileID(n.objFormsDetails.ID,!0)||(n.objFormsDetails.ErrorMessageForDisplay="Error: Numeric Values and Special characters are not allowed in Name.",t=!1),n.objFormsDetails.IsLookup&&n.objFormsDetails.IsLookup.toLowerCase()=="true"?(i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="wfm"+n.objFormsDetails.ID.toLowerCase()+"lookup"||t.FileID.toLowerCase()=="wfm"+n.objFormsDetails.ID.toLowerCase()+"lookup"}),i.length>0&&(n.objFormsDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Form Name (ID).",t=!1),n.objFormsDetails.IsMaintenence&&n.objFormsDetails.IsMaintenence.toLowerCase()=="true"&&(i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="wfm"+n.objFormsDetails.ID.toLowerCase()+"maintenance"||t.FileID.toLowerCase()=="wfm"+n.objFormsDetails.ID.toLowerCase()+"maintenance"}),i.length>0&&(n.objFormsDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Form Name (ID).",t=!1))):(i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="wfm"+n.objFormsDetails.ID.toLowerCase()+"maintenance"||t.FileID.toLowerCase()=="wfm"+n.objFormsDetails.ID.toLowerCase()+"maintenance"}),i.length>0&&(n.objFormsDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Form Name (ID).",t=!1))),t};n.objFormsDetails.ValidateMainQuery=function(t){var i=!0,o,r,s,f;if(t||(t=n.objFormsDetails.MainQueryID),n.objFormsDetails.IsShowMainQuery&&n.objFormsDetails.IsLookup=="True")if(t==undefined||t=="")n.objFormsDetails.ErrorMessageForDisplay="Error: Please select a Lookup Query.",i=!1;else if(t)if(t.contains(".")){if(o=t,r=o.split("."),r&&r.length==2){var h=r[0],c=r[1],l=u.getEntityIntellisense(),e=l.filter(function(n){return n.ID==h});e&&e.length>0?(s=e[0],f=s.Queries.filter(function(n){return n.ID==c}),f&&f.length>0?f[0].Parameters.length>0&&(n.objFormsDetails.ErrorMessageForDisplay="Error: Invalid Query.Parameterised query is not allowed.",i=!1):(n.objFormsDetails.ErrorMessageForDisplay="Error: Invalid Query",i=!1)):(n.objFormsDetails.ErrorMessageForDisplay="Error: Invalid Query",i=!1)}}else n.objFormsDetails.ErrorMessageForDisplay="Error: Invalid Query",i=!1;return i};n.UpdateInitialLoad=function(){n.objFormsDetails.objSfxLookupForm&&!n.objFormsDetails.objSfxLookupForm.Elements.some(function(n){return n.Name=="initialload"})?(n.objFormsDetails.objInitializeLoad={Name:"initialload",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]},n.objFormsDetails.objSfxLookupForm&&n.objFormsDetails.objSfxLookupForm.Elements.push(n.objFormsDetails.objInitializeLoad)):n.objFormsDetails.objInitializeLoad&&(n.objFormsDetails.objInitializeLoad.Elements=[]);n.objFormsDetails.objInitializeLoad&&(n.objFormsDetails.objInitializeLoad.Elements=[]);n.objFormsDetails.MainQueryID&&(n.objFormsDetails.objLink={Name:"query",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]},n.objFormsDetails.MainQueryID.length>0&&(n.objFormsDetails.objLink.dictAttributes.ID=n.objFormsDetails.MainQueryID.substring(0,n.objFormsDetails.MainQueryID.indexOf(".")),n.objFormsDetails.objLink.dictAttributes.sfwQueryRef=n.objFormsDetails.MainQueryID),n.objFormsDetails.objInitializeLoad.Elements.push(n.objFormsDetails.objLink))};n.objFormsDetails.ShowLookupStep=function(){var t=!0;return n.objFormsDetails.IsLookup&&n.objFormsDetails.IsLookup.toLowerCase()=="true"&&(t=!1),n.objFormsDetails.isShowLookupStep=t,t};n.IsLookupSelected=function(){var t=!1;return n.objFormsDetails.IsLookup&&n.objFormsDetails.IsLookup.toLowerCase()=="true"&&(t=!0),t||n.showExtraFieldsTab&&(t=!0),n.isFormDetailsLookUpSelected=t,t};n.tab=1;n.setTab=function(t){n.tab=t};n.isSet=function(t){return n.tab===t};n.UpdateDataForMaintenance=function(){var t="wfm"+n.objFormsDetails.ID+"Maintenance",i=GetFormTitle("Maintenance",n.objFormsDetails.ID);n.objFormsDetails.objSfxMaintenanceForm={Name:"form",Value:"",dictAttributes:{ID:t,sfwType:"Maintenance",sfwEntity:n.objFormsDetails.sfwEntity,sfwTitle:i,sfwActive:"True",sfwStatus:"Review",sfwAspNetCaching:"False",sfwMaxCount:"",sfwMenuItemID:"wfmDefaultLookup.aspx?FormID="+t.replace("Maintenance","Lookup")},Elements:[],Children:[]}};n.UpdateCenterMiddleForMaintenance=function(){var o,s,e,f,r,i,t,h=n.objFormsDetails.objSfxMaintenanceForm.Elements.filter(function(n){return n.Name=="sfwTable"}),y,c,v,w;h&&h.length>0&&(y=n.objFormsDetails.objSfxMaintenanceForm.Elements.indexOf(h),y>-1&&n.objFormsDetails.objSfxMaintenanceForm.Elements.splice(y,1));h={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};s={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};o={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};e={Name:"sfwPanel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};e.dictAttributes.ID="pnltoolbar";f.dictAttributes.ID="toolbar";f.dictAttributes.CellPadding="3";r={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnSave";t.dictAttributes.sfwMethodName="btnSave_Click";t.dictAttributes.Text="Save";i.Elements.push(t);t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnCancel";t.dictAttributes.sfwMethodName="btnCancel_Click";t.dictAttributes.Text="Refresh";i.Elements.push(t);t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnPrev";t.dictAttributes.sfwMethodName="btnPrev_Click";t.dictAttributes.Text="Prev";i.Elements.push(t);t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnNext";t.dictAttributes.sfwMethodName="btnNext_Click";t.dictAttributes.Text="Next";i.Elements.push(t);t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnCorrespondence";t.dictAttributes.sfwMethodName="btnCorrespondence_Click";t.dictAttributes.Text="Correspondence";i.Elements.push(t);r.Elements.push(i);o.Elements.push(e);f.Elements.push(r);e.Elements.push(f);s.Elements.push(o);h.Elements.push(s);s={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};o={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};e={Name:"sfwPanel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};e.dictAttributes.ID="pnlMain";f.dictAttributes.ID="tblMain";f.dictAttributes.CssClass="Table";c=n.objFormsDetails.objSfxMaintenanceForm.dictAttributes.ID;c=c.substring(0,c.indexOf("Maintenance"));c=c.substring(3);c=c+" Details";r={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};var p=u.getEntityIntellisense(),l=GetTableKeyFields(n.objFormsDetails.sfwEntity,p),a=l;l&&l.length>0&&l[0].contains(".")&&(a=a.substring(a.lastIndexOf(".")+1));v={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};v.dictAttributes.ID=CreateControlIDWithPrefix("",a,"sfwLabel",!1);v.dictAttributes.sfwEntityField=l;i.Elements.push(v);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};r.Elements.push(i);r.Elements.push(i);r.Elements.push(i);f.Elements.push(r);e.Elements.push(f);s.Elements.push(o);o.Elements.push(e);h.Elements.push(s);s={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};o={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};e={Name:"sfwPanel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};e.dictAttributes.ID="pnlAuditInfo";f.dictAttributes.ID="tblAuditInfo";f.dictAttributes.CssClass="Table";e.dictAttributes.sfwCaption="Audit Information";w=null;r={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="capCreate";t.dictAttributes.Text="Created : ";t.dictAttributes.sfwIsCaption="True";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblCreatedBy";t.dictAttributes.sfwEntityField="CreatedBy";i.Elements.push(t);r.Elements.push(i);t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblUpdateSeq";t.dictAttributes.sfwEntityField="UpdateSeq";t.dictAttributes.sfwTwoWayBinding="True";t.dictAttributes.Visible="False";i.Elements.push(t);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblCreatedDate";t.dictAttributes.sfwEntityField="CreatedDate";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="capModify";t.dictAttributes.Text="Modified : ";t.dictAttributes.sfwIsCaption="True";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblModifiedBy";t.dictAttributes.sfwEntityField="ModifiedBy";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblModifiedDate";t.dictAttributes.sfwEntityField="ModifiedDate";i.Elements.push(t);r.Elements.push(i);f.Elements.push(r);e.Elements.push(f);o.Elements.push(e);s.Elements.push(o);h.Elements.push(s);n.objFormsDetails.objSfxMaintenanceForm.Elements.push(h)};n.objLookupFieldsDetails.addAvailableFields=function(){function i(t){var i,r;t.FieldObject&&t.FieldObject.IsSelected&&t.FieldObject.IsSelected=="True"&&(n.objLookupFieldsDetails.lstFieldsProperties.some(function(n){return n.ID==t.FieldObject.Value})||(i={ID:t.FieldObject.Value},i.IsRangeVisible=!1,i.DataType=t.FieldObject.DataType,t.FieldObject.Value.indexOf("_value")>-1?(i.ControlClass="DropDownList",i.ControlName="ddl"+CreateControlIDInCamelCase(t.FieldObject.Value),t.FieldObject.Value.indexOf("_value")>-1?(r=u.getEntityIntellisense(),i.CodeGroup=GetCodeIDByValue(n.objFormsDetails.sfwEntity,t.FieldObject.Value,r)):i.CodeGroup="",i.Operator="="):(i.ControlClass="TextBox",i.ControlName="txt"+CreateControlIDInCamelCase(t.FieldObject.Value)),(t.FieldObject.DataType.toLowerCase()=="date"||t.FieldObject.DataType.toLowerCase()=="datetime"||t.FieldObject.DataType.toLowerCase()=="decimal"||t.FieldObject.DataType.toLowerCase()=="double"||t.FieldObject.DataType.toLowerCase()=="int")&&(i.IsRangeVisible=!0),i.strCaption=t.FieldObject.Caption&&t.FieldObject.Caption.trim().indexOf(":")==t.FieldObject.Caption.trim().length-1?GetCaptionFromField(t.FieldObject):GetCaptionFromField(t.FieldObject)+" : ",n.objLookupFieldsDetails.lstFieldsProperties.push(i)),t.FieldObject.IsSelected="False")}function r(i){if(i.IsSelected&&i.IsSelected==!0){if(!n.objLookupFieldsDetails.lstFieldsProperties.some(function(n){return n.CodeID==i.CodeID})){if(i.ID=i.CodeID,t&&i.CodeID&&i.CodeID.indexOf("_value")>-1){if(i.ControlClass="DropDownList",i.ControlName="ddl"+CreateControlIDInCamelCase(i.CodeID),i.CodeID.indexOf("_value")>-1){var r=u.getEntityIntellisense();i.CodeGroup=GetCodeIDByValue(t,i.CodeID,r)}else i.CodeGroup="";i.Operator="="}else i.ControlClass="TextBox",i.ControlName="txt"+CreateControlIDInCamelCase(i.CodeID);(i.DataType.toLowerCase()=="date"||i.DataType.toLowerCase()=="datetime"||i.DataType.toLowerCase()=="decimal"||i.DataType.toLowerCase()=="double"||i.DataType.toLowerCase()=="int")&&(i.IsRangeVisible=!0);i.strCaption=i.CodeID.Caption&&i.CodeID.Caption.trim().indexOf(":")==i.CodeID.Caption.trim().length-1?GetCaptionFromFieldName(i.CodeID):GetCaptionFromFieldName(i.CodeID)+" : ";n.objLookupFieldsDetails.lstFieldsProperties.push(i)}i.IsSelected=!1}}if(n.objFormsDetails.IsShowMainQuery){var t=n.objFormsDetails.MainQueryID.split(".")[0];angular.forEach(n.objLookupFieldsDetails.lstQueryColumn,r)}else angular.forEach(n.objLookupFieldsDetails.lstselectedmultiplelevelfield,i),n.objLookupFieldsDetails.lstselectedmultiplelevelfield=[]};n.objLookupFieldsDetails.getAvailableFields=function(t,i){i&&(i.stopPropagation(),i.stopImmediatePropagation());t&&(n.objLookupFieldsDetails.SelectedAvailableFields=t)};n.objLookupFieldsDetails.UpdateOnFormDetailsNext=function(){return n.UpdateCenterMiddle(),n.objLookupResultFields.LoadData(),!1};n.objLookupFieldsDetails.SelectedFieldPropRow=function(t){t&&(n.objLookupFieldsDetails.SelectedFieldRow=t)};n.objLookupFieldsDetails.moveSelectedRowUp=function(){if(n.objLookupFieldsDetails.SelectedFieldRow){var t=n.objLookupFieldsDetails.lstFieldsProperties.indexOf(n.objLookupFieldsDetails.SelectedFieldRow),i=n.objLookupFieldsDetails.lstFieldsProperties[t-1];n.objLookupFieldsDetails.lstFieldsProperties[t-1]=n.objLookupFieldsDetails.SelectedFieldRow;n.objLookupFieldsDetails.lstFieldsProperties[t]=i;n.scrollBySelectedField(".lookup-field-details-search-table",".selected")}};n.objLookupFieldsDetails.canmoveSelectedRowUp=function(){if(n.Flag=!0,n.objLookupFieldsDetails.SelectedFieldRow)for(var t=0;t<n.objLookupFieldsDetails.lstFieldsProperties.length;t++)n.objLookupFieldsDetails.lstFieldsProperties[t]==n.objLookupFieldsDetails.SelectedFieldRow&&t>0&&(n.Flag=!1);return n.Flag};n.scrollBySelectedField=function(n,t){h(function(){var i=$(n);if(i&&i.hasScrollBar())return i.scrollTo(i.find(t),{offsetTop:300,offsetLeft:0},null),!1})};n.objLookupFieldsDetails.moveSelectedRowDown=function(){if(n.objLookupFieldsDetails.SelectedFieldRow){var t=n.objLookupFieldsDetails.lstFieldsProperties.indexOf(n.objLookupFieldsDetails.SelectedFieldRow),i=n.objLookupFieldsDetails.lstFieldsProperties[t+1];n.objLookupFieldsDetails.lstFieldsProperties[t+1]=n.objLookupFieldsDetails.SelectedFieldRow;n.objLookupFieldsDetails.lstFieldsProperties[t]=i;n.scrollBySelectedField(".lookup-field-details-search-table",".selected")}};n.objLookupFieldsDetails.canmoveSelectedRowDown=function(){if(n.Flag=!0,n.objLookupFieldsDetails.SelectedFieldRow)for(var t=0;t<n.objLookupFieldsDetails.lstFieldsProperties.length;t++)n.objLookupFieldsDetails.lstFieldsProperties[t]==n.objLookupFieldsDetails.SelectedFieldRow&&t<n.objLookupFieldsDetails.lstFieldsProperties.length-1&&(n.Flag=!1);return n.Flag};n.objLookupFieldsDetails.deleteSelectedRow=function(){var t=n.objLookupFieldsDetails.lstFieldsProperties.indexOf(n.objLookupFieldsDetails.SelectedFieldRow);t>=0&&(n.objLookupFieldsDetails.lstFieldsProperties.splice(t,1),t<n.objLookupFieldsDetails.lstFieldsProperties.length?n.objLookupFieldsDetails.SelectedFieldRow=n.objLookupFieldsDetails.lstFieldsProperties[t]:n.objLookupFieldsDetails.lstFieldsProperties.length>0&&(n.objLookupFieldsDetails.SelectedFieldRow=n.objLookupFieldsDetails.lstFieldsProperties[t-1]))};n.objLookupResultFields.LoadData=function(){function s(i){var u,f;u=n.objFormsDetails.IsShowMainQuery?t[0].Attributes.filter(function(n){return n.ID==i.ID}):t[0].Attributes.filter(function(n){return n.Value==i.ID});u&&u.length>0&&(u[0].Value&&u[0].Value.endsWith("_value")&&(f=t[0].Attributes.filter(function(n){return n.Value==u[0].Value.replace("_value","_description")}),f&&f.length>0&&(u=f)),r.some(function(n){return n.ID==u[0].ID})||r.push(u[0]))}var e,t,f,r,h,i;if(n.objLookupResultFields.preselectedfields=[],e=u.getEntityIntellisense(),t=e.filter(function(t){return t.ID==n.objFormsDetails.sfwEntity}),t&&t.length>0&&(t[0].Attributes.length>0&&(f=t[0].Attributes.filter(function(n){return n.Type=="Column"&&n.KeyNo=="1"}),f.length>0&&(f[0].EntityName=t[0].ID,n.objLookupResultFields.preselectedfields.push(f[0]),n.objLookupResultFields.LoadGridDataForResultFields(n.objLookupResultFields.preselectedfields,!0))),r=[],n.objLookupFieldsDetails.lstFieldsProperties&&n.objLookupFieldsDetails.lstFieldsProperties.length>0&&(angular.forEach(n.objLookupFieldsDetails.lstFieldsProperties,s),n.objLookupResultFields.LoadGridDataForResultFields(r,!0),!n.objFormsDetails.IsShowMainQuery)))for(h=[],i=0;i<n.objLookupResultFields.lstResultFieldsForGrid.length>0;i++){function o(t){return t.ID==n.objLookupResultFields.lstResultFieldsForGrid[i].strFieldName}r.some(o)||n.objLookupResultFields.preselectedfields.some(o)||n.objLookupResultFields.lstResultFieldsForGrid[i].IsAddFromResultFieldScreen||(n.objLookupResultFields.lstResultFieldsForGrid.splice(i,1),i--)}n.LoadSort();n.LoadOrder()};n.LoadSort=function(){if(n.ArrSort=[],n.ArrSort.push(""),n.objLookupResultFields.lstResultFieldsForGrid.length>0)for(var t=0;t<n.objLookupResultFields.lstResultFieldsForGrid.length;t++)n.ArrSort.push(t+1)};n.LoadOrder=function(){n.ArrOrder=[];n.ArrOrder.push("");n.ArrOrder.push("asc");n.ArrOrder.push("desc")};n.objLookupResultFields.addResultFields=function(){n.objLookupResultFields.LoadGridDataForResultFields(n.objLookupResultFields.lstselectedmultiplelevelfield);n.objLookupResultFields.lstResultFieldsForGrid&&n.objLookupResultFields.lstResultFieldsForGrid.length>0&&(n.objLookupResultFields.SelectedResultGridRow(n.objLookupResultFields.lstResultFieldsForGrid[n.objLookupResultFields.lstResultFieldsForGrid.length-1]),n.objLookupResultFields.lstselectedmultiplelevelfield=[],n.LoadSort())};n.objLookupResultFields.UpdateOnFormDetailsNext=function(){return!1};n.objLookupResultFields.LoadGridDataForResultFields=function(t,i){function e(t){for(var u,f,e,s=!1,o=0;o<n.objLookupResultFields.lstResultFieldsForGrid.length;o++)if(n.objLookupResultFields.lstResultFieldsForGrid[o].strFieldName==t.EntityField){s=!0;break}s||(u={},f=t.FieldObject,u.strFieldName=t.EntityField,i?(f=t,u.strFieldName=t.ID):u.IsAddFromResultFieldScreen=!0,u.strDataType=f.DataType,f.DataType&&(f.DataType.toLowerCase()=="int"?u.strDataType="int":f.DataType.toLowerCase()=="string"&&(u.strDataType="string")),u.strHeaderText=f.Value.substring(f.Value.lastIndexOf(".")+1),u.strHeaderText=GetCaptionFromField(f),u.strDataFormat=u.strDataType&&(u.strDataType.toLowerCase()=="datetime"||u.strDataType.toLowerCase()=="date")?"{0:d}":u.strDataType&&u.strDataType.toLowerCase()=="decimal"&&(f.Value.indexOf("_amt")>-1||f.Value.indexOf("_amount")>-1)?"{0:C}":f.Value.contains("ssn")?"{0:000-##-####}":f.Value.contains("phone")||f.Value.contains("fax")?"{0:(###)###-####}":"",u.IsVisible="True",u.strControlType="Label",r.length>0&&(e=r.filter(function(n){return n.ID.toLowerCase()==f.ID.toLowerCase()}),e&&e.length>0&&(u.strDataKey=e[0].KeyNo)),n.objLookupResultFields.lstResultFieldsForGrid.some(function(n){return n.strFieldName==t.ID})||n.objLookupResultFields.lstResultFieldsForGrid.push(u));i||n.objLookupResultFields.preselectedfields.some(function(n){return n.ID==t.EntityField})||t.FieldObject&&(t.FieldObject.IsSelected="False")}n.objLookupResultFields.lstResultFieldsForGrid||(n.objLookupResultFields.lstResultFieldsForGrid=[]);var f=u.getEntityIntellisense(),r=getPrimarykey(f,n.objFormsDetails.sfwEntity);t.length>0&&angular.forEach(t,e)};n.objLookupResultFields.UpdateGridProperties=function(){function s(n){f=n.istrKey;f&&(i.length==0?i=f+";"+n.strFieldName:i+=","+f+";"+n.strFieldName);r=n.strSort;r&&(t.length==0?t=n.strOrder?r+";"+n.strFieldName+" "+n.strOrder:r+";"+n.strFieldName:t+=n.strOrder?","+r+";"+n.strFieldName+" "+n.strOrder:","+r+";"+n.strFieldName)}function h(n){var i=n.substring(n.indexOf(";")+1),t={};t.key=n;t.Value=i;u.push(t)}function c(n){i.length==0?i=n.Value:i+=","+n.Value}function l(n){var i=n.substring(n.indexOf(";")+1),t={};t.key=n;t.Value=i;u.push(t)}function a(n){t.length==0?t=n.Value:t+=","+n.Value}var f,i="",r,t="",u,e,o;n.objLookupResultFields.lstResultFieldsForGrid.length>0&&angular.forEach(n.objLookupResultFields.lstResultFieldsForGrid,s);u=[];e=i.split(",");angular.forEach(e,h);i="";angular.forEach(u,c);n.objGridView.dictAttributes.sfwDataKeyNames=i;u=[];o=t.split(",");angular.forEach(o,l);t="";angular.forEach(u,a);n.objGridView.dictAttributes.sfwSortExpression=t};n.objLookupResultFields.SelectedResultGridRow=function(t){t&&(n.objLookupResultFields.SelectedCurrentResultGridRow=t)};n.objLookupResultFields.ChangeSortExpression=function(n){n&&!n.strSort&&(n.strOrder="")};n.objLookupResultFields.moveSelectedRowUp=function(){if(n.objLookupResultFields.SelectedCurrentResultGridRow){var t=n.objLookupResultFields.lstResultFieldsForGrid.indexOf(n.objLookupResultFields.SelectedCurrentResultGridRow),i=n.objLookupResultFields.lstResultFieldsForGrid[t-1];n.objLookupResultFields.lstResultFieldsForGrid[t-1]=n.objLookupResultFields.SelectedCurrentResultGridRow;n.objLookupResultFields.lstResultFieldsForGrid[t]=i;n.scrollBySelectedField("#lookup-result-grid",".selected")}};n.objLookupResultFields.canmoveSelectedRowUp=function(){if(n.Flag=!0,n.objLookupResultFields.SelectedCurrentResultGridRow)for(var t=0;t<n.objLookupResultFields.lstResultFieldsForGrid.length;t++)n.objLookupResultFields.lstResultFieldsForGrid[t]==n.objLookupResultFields.SelectedCurrentResultGridRow&&t>0&&(n.Flag=!1);return n.Flag};n.objLookupResultFields.moveSelectedRowDown=function(){if(n.objLookupResultFields.SelectedCurrentResultGridRow){var t=n.objLookupResultFields.lstResultFieldsForGrid.indexOf(n.objLookupResultFields.SelectedCurrentResultGridRow),i=n.objLookupResultFields.lstResultFieldsForGrid[t+1];n.objLookupResultFields.lstResultFieldsForGrid[t+1]=n.objLookupResultFields.SelectedCurrentResultGridRow;n.objLookupResultFields.lstResultFieldsForGrid[t]=i;n.scrollBySelectedField("#lookup-result-grid",".selected")}};n.objLookupResultFields.canmoveSelectedRowDown=function(){if(n.Flag=!0,n.objLookupResultFields.SelectedCurrentResultGridRow)for(var t=0;t<n.objLookupResultFields.lstResultFieldsForGrid.length;t++)n.objLookupResultFields.lstResultFieldsForGrid[t]==n.objLookupResultFields.SelectedCurrentResultGridRow&&t<n.objLookupResultFields.lstResultFieldsForGrid.length-1&&(n.Flag=!1);return n.Flag};n.objLookupResultFields.deleteSelectedRow=function(){if(n.objLookupResultFields.SelectedCurrentResultGridRow)if(n.objLookupResultFields.preselectedfields.some(function(t){return t.ID==n.objLookupResultFields.SelectedCurrentResultGridRow.strFieldName}))alert("Primary Key Can not  be deleted");else{var t=n.objLookupResultFields.lstResultFieldsForGrid.indexOf(n.objLookupResultFields.SelectedCurrentResultGridRow);t>=0&&(n.objLookupResultFields.lstResultFieldsForGrid.splice(t,1),t<n.objLookupResultFields.lstResultFieldsForGrid.length?n.objLookupResultFields.SelectedCurrentResultGridRow=n.objLookupResultFields.lstResultFieldsForGrid[t]:n.objLookupResultFields.lstResultFieldsForGrid.length>0&&(n.objLookupResultFields.SelectedCurrentResultGridRow=n.objLookupResultFields.lstResultFieldsForGrid[t-1]),n.LoadSort())}};n.UpdateData=function(){var t="wfm"+n.objFormsDetails.ID+"Lookup",i=GetFormTitle("Lookup",n.objFormsDetails.ID);n.objFormsDetails.objSfxLookupForm={Name:"form",Value:"",dictAttributes:{ID:t,sfwType:"Lookup",sfwEntity:n.objFormsDetails.sfwEntity,sfwTitle:i,sfwActive:"True",sfwStatus:"Review",sfwAspNetCaching:"False",sfwMaxCount:"",sfwMenuItemID:"wfmDefaultLookup.aspx?FormID="+t.replace("Maintenance","Lookup")},Elements:[],Children:[]}};n.UpdateCenterMiddle=function(){var i=n.objFormsDetails.objSfxLookupForm.Elements.filter(function(n){return n.Name=="sfwTable"}),r;i&&i.length>0&&(r=n.objFormsDetails.objSfxLookupForm.Elements.indexOf(i[0]),r>-1&&n.objFormsDetails.objSfxLookupForm.Elements.splice(r,1));var u={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},f={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},e={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},t={Name:"sfwPanel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="pnlCriteria";t.dictAttributes.sfwCaption="Criteria";n.UpdateSearchCriteria(t);e.Elements.push(t);f.Elements.push(e);u.Elements.push(f);n.objFormsDetails.objSfxLookupForm.Elements.push(u)};n.UpdateSearchCriteria=function(t){function c(n){n.Elements.length>o&&(o=n.Elements.length)}function l(n){while(n.Elements.length<o)n.Elements.push({Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]})}var u,r,i,e={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},f,s,h,o;e.dictAttributes.ID="tblCriteria";f=0;angular.forEach(n.objLookupFieldsDetails.lstFieldsProperties,function(t){var o,c;f==0&&(u={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},e.Elements.push(u));f<parseInt(n.objLookupFieldsDetails.noOfColumns)&&(s=t.strCaption?t.strCaption:GetCaptionFromFieldName(t.ID)+" : ",h="cap"+CreateControlIDInCamelCase(t.ID),t.IsRangeCheck&&t.IsRangeCheck==!0?(o=parseInt(n.objLookupFieldsDetails.noOfColumns)-f,o<4&&(u={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},e.Elements.push(u)),f=f+4,n.AddRange(parseInt(n.objLookupFieldsDetails.noOfColumns),t,u)):(r={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i.dictAttributes.ID=h,i.dictAttributes.Text=s,i.dictAttributes.AssociatedControlID=t.ControlName,i.dictAttributes.sfwIsCaption="True",r.Elements.push(i),u.Elements.push(r),f++,r={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},c="sfw"+t.ControlClass,i={Name:"sfw"+t.ControlClass,prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i.dictAttributes.ID=t.ControlName,n.objFormsDetails.IsShowMainQuery&&(i.dictAttributes.sfwQueryID=n.objFormsDetails.MainQueryID.split(".")[0]),i.dictAttributes.sfwDataField=t.ID,i.dictAttributes.sfwOperator=t.Operator,i.dictAttributes.sfwCarryOver=t.IsCarryOverCheck,t.ControlClass=="TextBox"?(i.dictAttributes.sfwDataType=t.DataType.toLowerCase()=="datetime"||t.DataType.toLowerCase()=="date"?"DateTime":t.DataType.toLowerCase()=="decimal"||t.DataType.toLowerCase().indexOf("int")>-1?"Numeric":"String",t.DataType.toLowerCase()=="datetime"||t.DataType.toLowerCase()=="date"?i.dictAttributes.sfwDataFormat="{0:d}":t.DataType.toLowerCase()=="decimal"&&(t.ID.indexOf("_amt")>-1||t.ID.indexOf("_amount")>-1)?i.dictAttributes.sfwDataFormat="{0:C}":t.ID.contains("ssn")?i.dictAttributes.sfwDataFormat="{0:000-##-####}":(t.ID.contains("phone")||t.ID.contains("fax"))&&(i.dictAttributes.sfwDataFormat="{0:(###)###-####}")):(t.ControlClass=="DropDownList"||t.ControlClass=="CheckBoxList")&&(i.dictAttributes.sfwLoadType="CodeGroup",i.dictAttributes.DataTextField=t.DataTextField,i.dictAttributes.DataValueField=t.DataValueField),r.Elements.push(i),u.Elements.push(r),f++));f>=parseInt(n.objLookupFieldsDetails.noOfColumns)&&(f=0)});u={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};r={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i.dictAttributes.ID="btnSearch";i.dictAttributes.sfwMethodName="btnSearch_Click";i.dictAttributes.sfwOperateOn="tblCriteria";i.dictAttributes.Text="Search";r.Elements.push(i);i={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i.dictAttributes.ID="btnReset";i.dictAttributes.sfwMethodName="btnReset_Click";i.dictAttributes.sfwOperateOn="tblCriteria";i.dictAttributes.Text="Reset";r.Elements.push(i);u.Elements.push(r);r={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i.dictAttributes.ID="btnStoreSearch";i.dictAttributes.sfwMethodName="btnStoreUserDefaults_Click";i.dictAttributes.sfwOperateOn="tblCriteria";i.dictAttributes.Text="Store Search";r.Elements.push(i);u.Elements.push(r);e.Elements.push(u);o=0;angular.forEach(e.Elements,c);angular.forEach(e.Elements,l);t.Elements.push(e)};n.AddRange=function(t,i,r){var e,o,f,u;(i.DataType.toLowerCase()=="date"||i.DataType.toLowerCase()=="datetime"||i.DataType.toLowerCase()=="decimal"||i.DataType.toLowerCase()=="double"||i.DataType.toLowerCase().indexOf("int")>-1)&&(e=CreateControlIDInCamelCase(i.ID),o=0,o<t&&(o++,f={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u.dictAttributes.ID="cap"+e+"From",u.dictAttributes.sfwIsCaption="True",i.strCaption?i.strCaption.trim().indexOf(":")==i.strCaption.trim().length-1&&(i.strCaption=i.strCaption.trim(),u.dictAttributes.Text=i.strCaption.slice(0,i.strCaption.length-1)+" From : "):u.dictAttributes.Text=GetCaptionFromFieldName(i.ID)+" From : ",f.Elements.push(u),r.Elements.push(f)),o<t&&(o++,f={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u={Name:"sfwTextBox",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u.dictAttributes.ID="txt"+e+"From",n.objFormsDetails.IsShowMainQuery&&(u.dictAttributes.sfwQueryID=n.objFormsDetails.MainQueryID.split(".")[0]),u.dictAttributes.sfwDataField=i.ID,u.dictAttributes.sfwOperator="between",u.dictAttributes.sfwRelatedControl="txt"+e+"To",i.DataType.toLowerCase()=="datetime"||i.DataType.toLowerCase()=="date"?(u.dictAttributes.sfwDataType="datetime",u.dictAttributes.sfwDataFormat="{0:d}"):u.dictAttributes.sfwDataType="numeric",f.Elements.push(u),u={Name:"CompareValidator",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u.dictAttributes.ID="val"+e+"From",u.dictAttributes.Text="*",u.dictAttributes.Operator="DataTypeCheck",u.dictAttributes.ControlToValidate="txt"+e+"From",i.DataType.toLowerCase()=="datetime"||i.DataType.toLowerCase()=="date"?(u.dictAttributes.Type="Date",u.dictAttributes.ErrorMessage=i.strCaption?i.strCaption+" From must be in mm/dd/yyyy format. ":GetCaptionFromFieldName(i.ID)+" From must be in mm/dd/yyyy format."):(u.dictAttributes.Type="Integer",u.dictAttributes.ErrorMessage=i.strCaption?i.strCaption+" From must be an Integer value.":GetCaptionFromFieldName(i.ID)+" From must be an Integer value."),f.Elements.push(u),r.Elements.push(f)),o<t&&(o++,f={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u.dictAttributes.ID="cap"+e+"To",u.dictAttributes.sfwIsCaption="True",i.strCaption?i.strCaption.trim().indexOf(":")==i.strCaption.trim().length-1&&(i.strCaption=i.strCaption.trim(),u.dictAttributes.Text=i.strCaption.slice(0,i.strCaption.length-1)+" To : "):u.dictAttributes.Text=GetCaptionFromFieldName(i.ID)+" To : ",f.Elements.push(u),r.Elements.push(f)),o<t&&(o++,f={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u={Name:"sfwTextBox",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u.dictAttributes.ID="txt"+e+"To",n.objFormsDetails.IsShowMainQuery&&(u.dictAttributes.sfwQueryID=n.objFormsDetails.MainQueryID.split(".")[0]),u.dictAttributes.sfwDataField=i.ID,u.dictAttributes.sfwOperator="between",i.DataType.toLowerCase()=="datetime"||i.DataType.toLowerCase()=="date"?(u.dictAttributes.sfwDataType="datetime",u.dictAttributes.sfwDataFormat="{0:d}"):u.dictAttributes.sfwDataType="numeric",f.Elements.push(u),u={Name:"CompareValidator",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u.dictAttributes.ID="val"+e+"To",u.dictAttributes.Text="*",u.dictAttributes.Operator="DataTypeCheck",u.dictAttributes.ControlToValidate="txt"+e+"To",i.DataType.toLowerCase()=="datetime"||i.DataType.toLowerCase()=="date"?(u.dictAttributes.Type="Date",u.dictAttributes.ErrorMessage=i.strCaption?i.strCaption+" To must be in mm/dd/yyyy format.":GetCaptionFromFieldName(i.ID)+" To must be in mm/dd/yyyy format."):(u.dictAttributes.Type="Integer",u.dictAttributes.ErrorMessage=i.strCaption?i.strCaption+" From must be an Integer value.":GetCaptionFromFieldName(i.ID)+" To must be an Integer value."),f.Elements.push(u),u={Name:"CompareValidator",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u.dictAttributes.ID="val"+e+"Range",u.dictAttributes.Text="*",u.dictAttributes.Operator="GreaterThanEqual",u.dictAttributes.ControlToValidate="txt"+e+"To",u.dictAttributes.ControlToCompare="txt"+e+"From",u.dictAttributes.ErrorMessage=i.strCaption?i.strCaption+" To cannot be less than "+i.strCaption+" From.":GetCaptionFromFieldName(i.ID)+" To cannot be less than "+GetCaptionFromFieldName(i.ID)+" From.",u.dictAttributes.Type=i.DataType.toLowerCase()=="datetime"||i.DataType.toLowerCase()=="date"?"Date":"Integer",f.Elements.push(u),r.Elements.push(f)))};n.UpdateResultFields=function(){function r(t){var e=t.strFieldName,s=t.strDataType,h=t.strHeaderText,c=t.strControlType,l=t.strDataFormat,f,o,r;strVisible=e.substring(e.lastIndexOf(".")+1);strVisible=IsAuditField(strVisible)?"False":"True";f={Name:"TemplateField",prefix:"asp",Value:"",dictAttributes:{},Elements:[],Children:[]};f.dictAttributes.HeaderText=h;f.dictAttributes.Visible=strVisible;o={Name:"ItemTemplate",prefix:"asp",Value:"",dictAttributes:{},Elements:[],Children:[]};switch(c){case"HyperLink":r={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};r.dictAttributes.sfwLinkable="True";r.dictAttributes.sfwRelatedControl="btnOpen";break;case"TextBox":r={Name:"sfwTextBox",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};s.toLowerCase()=="datetime"&&(r.dictAttributes.sfwDataType=s.toLowerCase());break;case"DropDownList":var r={Name:"sfwDropDownList",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},a=u.getEntityIntellisense(),v=GetCodeID(n.objFormsDetails.sfwEntity,e,a);v&&(r.dictAttributes.sfwLoadType="CodeGroup");break;case"Checkbox":r={Name:"sfwCheckBox",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};break;default:r={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]}}r.dictAttributes.sfwEntityField=t.strFieldName;r.dictAttributes.sfwDataFormat=l;t.IsVisible=="False"&&(r.dictAttributes.Visible=t.IsVisible);o.Elements.push(r);f.Elements.push(o);i.Elements.push(f)}var t,i;if(n.objLookupResultFields.lstResultFieldsForGrid&&n.objLookupResultFields.lstResultFieldsForGrid.length>0){for(t=0;t<n.objGridView.Elements.length;t++)if(n.objGridView.Elements[t].Name=="Columns"){n.objGridView.Elements.splice(t,1);break}i={Name:"Columns",Value:"",dictAttributes:{},Elements:[],Children:[]};angular.forEach(n.objLookupResultFields.lstResultFieldsForGrid,r);n.objLookupResultFields.UpdateGridProperties();n.objGridView.Elements.push(i)}};n.UpdateResultPanel=function(){var e=n.objFormsDetails.objSfxLookupForm.Elements.filter(function(n){return n.Name=="sfwTable"}),o,s,f,r,i,t,u;e&&e.length>0&&(u=e[0]);o={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};s={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};n.DeleteResultPanel();f={Name:"sfwPanel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};objSfxTable={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f.dictAttributes.ID="pnlResult";f.dictAttributes.sfwCaption="Search Results";objSfxTable.dictAttributes.ID="tblResult";objSfxTable.dictAttributes.CssClass="Table";r={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};n.objLookupResultFields.IsNewButton&&n.objLookupResultFields.IsNewButton.toLowerCase()=="true"&&(t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},t.dictAttributes.ID="btnNew",t.dictAttributes.ImageUrl="~/Image/gNew.gif",t.dictAttributes.sfwMethodName="btnNew_Click",t.dictAttributes.sfwOperateOn="tblCriteria",t.dictAttributes.Text="New",i.Elements.push(t));n.objLookupResultFields.IsOpenButton&&n.objLookupResultFields.IsOpenButton.toLowerCase()=="true"&&(t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},t.dictAttributes.ID="btnOpen",t.dictAttributes.ImageUrl="~/Image/gOpen.gif",t.dictAttributes.sfwMethodName="btnOpen_Click",t.dictAttributes.sfwRelatedControl="dgrResult",t.dictAttributes.Text="Open",i.Elements.push(t));n.objLookupResultFields.IsDeleteButton&&n.objLookupResultFields.IsDeleteButton.toLowerCase()=="true"&&(t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},t.dictAttributes.ID="btnDelete",t.dictAttributes.ImageUrl="~/Image/gDelete.gif",t.dictAttributes.sfwMethodName="btnDelete_Click",t.dictAttributes.sfwRelatedControl="dgrResult",t.dictAttributes.Text="Delete",i.Elements.push(t));n.objLookupResultFields.IsExportExcelButton&&n.objLookupResultFields.IsExportExcelButton.toLowerCase()=="true"&&(t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},t.dictAttributes.ID="btnExportExcel",t.dictAttributes.ImageUrl="~/Image/gExport.gif",t.dictAttributes.sfwMethodName="btnColumnsToExport_Click",t.dictAttributes.sfwRelatedControl="dgrResult",t.dictAttributes.Text="Export To Excel",i.Elements.push(t));r.Elements.push(i);objSfxTable.Elements.push(r);r={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i.Elements.push(n.objGridView);r.Elements.push(i);objSfxTable.Elements.push(r);f.Elements.push(objSfxTable);u==null&&(u={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},n.objFormsDetails.objSfxLookupForm.Elements.push(u));s.Elements.push(f);o.Elements.push(s);u.Elements.push(o)};n.DeleteResultPanel=function(){function f(n){function t(t){if(t.Elements.length>0&&t.Elements[0].Name=="sfwPanel"){var r=t.Elements[0];r.dictAttributes.ID=="pnlResult"&&(i=n)}}angular.forEach(n.Elements,t);i!=null}var t,i,r=n.objFormsDetails.objSfxLookupForm.Elements.filter(function(n){return n.Name=="sfwTable"}),u;r&&r.length>0&&(t=r[0],angular.forEach(t.Elements,f),i!=null&&(u=t.Elements.indexOf(i),u>-1&&t.Elements.splice(u,1)))};n.objWizardDetails.InitWizard=function(){n.objWizardDetails.ID="";n.objWizardDetails.sfwTitle="";n.objWizardDetails.sfwDescription="";n.objWizardDetails.Path="";n.objWizardDetails.sfwEntity="";n.SelectedEntity&&n.objNewItems.SelectedOption=="Wizard"&&(n.objWizardDetails.sfwEntity=n.SelectedEntity,n.objWizardDetails.PopulateFormName());n.objWizardDetails.isFinsihDisable()};n.objWizardDetails.PopulateFormName=function(){var r,t,i;n.objWizardDetails.ID="";n.objWizardDetails.sfwEntity!=undefined&&n.objWizardDetails.sfwEntity!=""&&(n.objWizardDetails.ID=n.objWizardDetails.sfwEntity.substring(3),r=u.getEntityIntellisense(),t=r.filter(function(t){return t.ID==n.objWizardDetails.sfwEntity}),t&&t.length>0&&t[0].FilePath.contains(".")&&(n.xmlFileLocation?i=t[0].FilePath.substring(n.xmlFileLocation.length+1,t[0].FilePath.lastIndexOf("\\")):(i=t[0].FilePath.substring(0,t[0].FilePath.lastIndexOf("\\")),i=i.substring(i.lastIndexOf("\\")+1)),n.objWizardDetails.Path=i));n.checkAndExecuteLocationCallback(n.objWizardDetails)};n.objWizardDetails.CanShowWizardSteps=function(){var t=!0;return n.objNewItems.SelectedOption=="Wizard"&&(t=!1),t};n.objWizardDetails.UpdateData=function(){n.objWizardDetails.UpdateFormAttributes();n.objWizardDetails.UpdateCenterMiddle()};n.objWizardDetails.UpdateFormAttributes=function(){n.objSfxWizardForm={Name:"form",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]};var t="wfm"+n.objWizardDetails.ID+"Wizard";n.objSfxWizardForm.dictAttributes.ID=t;n.objSfxWizardForm.dictAttributes.sfwTitle=n.objWizardDetails.sfwTitle?n.objWizardDetails.sfwTitle:GetFormTitle("Wizard",n.objWizardDetails.ID);n.objSfxWizardForm.dictAttributes.sfwDescription=n.objWizardDetails.sfwDescription;n.objSfxWizardForm.dictAttributes.sfwEntity=n.objWizardDetails.sfwEntity;n.objSfxWizardForm.dictAttributes.sfwType="Wizard";n.objSfxWizardForm.dictAttributes.sfwActive="True";n.objSfxWizardForm.dictAttributes.sfwMenuItemID="";n.objSfxWizardForm.dictAttributes.sfwAspNetCaching=""};n.objWizardDetails.UpdateCenterMiddle=function(){var c={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},e={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},l={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u={Name:"sfwWizard",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},o,f,i,t,s,h,r;u.dictAttributes.ID="wizMain";u.dictAttributes.Width="100%";o={Name:"WizardSteps",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]};f={Name:"sfwWizardStep",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f.dictAttributes.ID="wzsStep";f.dictAttributes.sfwShowInHeader="True";f.dictAttributes.Title="New Step";s={Name:"HeaderTemplate",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]};r={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};r.dictAttributes.ID="tblHeaderTemplate";r.dictAttributes.CssClass="Table";i={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i.Elements.push(t);i.Elements.push(t);i.Elements.push(t);i.Elements.push(t);r.Elements.push(i);s.Elements.push(r);r={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};r.dictAttributes.ID="tblStep";r.dictAttributes.CssClass="Table";i={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i.Elements.push(t);i.Elements.push(t);i.Elements.push(t);i.Elements.push(t);r.Elements.push(i);f.Elements.push(r);o.Elements.push(f);u.Elements.push(o);u.Elements.push(s);h={Name:"SideBarTemplate",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]};r={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};h.Elements.push(r);u.Elements.push(h);t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};l.Elements.push(u);e.Elements.push(t);e.Elements.push(l);e.Elements.push(t);c.Elements.push(e);n.objSfxWizardForm.Elements.push(c)};n.objWizardDetails.isFinsihDisable=function(){var t=!0;return n.objWizardDetails.ErrorMessageForDisplay="",n.objWizardDetails.ValidateEntity()?n.objWizardDetails.ValidateFormName()?n.ValidatePath(n.objWizardDetails,n.objWizardDetails.Path)||(t=!1):t=!1:t=!1,n.objWizardDetails.isWizardFinsihDisable=t,t};n.objWizardDetails.ValidateFormName=function(){var t=!0,i;return n.objWizardDetails.ID==undefined||n.objWizardDetails.ID==""?(n.objWizardDetails.ErrorMessageForDisplay="Error: Please enter a Wizard Name (ID).",t=!1):n.objWizardDetails.ID&&n.objWizardDetails.ID.toLowerCase().startsWith("wfm")?(n.objWizardDetails.ErrorMessageForDisplay="Error: ID can not start with wfm.",t=!1):(n.objWizardDetails.ID!=undefined||n.objWizardDetails.ID!="")&&n.objWizardDetails.ID.length<=3?(n.objWizardDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",t=!1):n.objWizardDetails.ID&&n.objWizardDetails.ID.toLowerCase().endsWith("wizard")?(n.objWizardDetails.ErrorMessageForDisplay="Error: ID can not ends with wizard.",t=!1):(isValidFileID(n.objWizardDetails.ID,!0)||(n.objWizardDetails.ErrorMessageForDisplay="Error: Numeric Values and Special characters are not allowed in Name.",t=!1),i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="wfm"+n.objWizardDetails.ID.toLowerCase()+"wizard"||t.FileID.toLowerCase()=="wfm"+n.objWizardDetails.ID.toLowerCase()+"wizard"}),i.length>0&&(n.objWizardDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Wizard Name (ID).",t=!1)),t};n.objWizardDetails.ValidateEntity=function(){var t=!0,i;return n.objWizardDetails.sfwEntity==undefined||n.objWizardDetails.sfwEntity==""?(n.objWizardDetails.ErrorMessageForDisplay="Error: Entity cannot be empty.",t=!1):(i=u.getEntityIntellisense(),i.some(function(t){return t.ID==n.objWizardDetails.sfwEntity})||(n.objWizardDetails.ErrorMessageForDisplay="Error: The entity is not valid. Please enter a different Name (ID).",t=!1)),t};n.objReportDetails.CanShowReportSteps=function(){var t=!0;return n.objNewItems.SelectedOption=="Report"&&(t=!1),t};n.objReportDetails.isFinsihDisable=function(){var t=!0;return n.objReportDetails.ErrorMessageForDisplay="",n.objReportDetails.ValidateReportID()?n.objReportDetails.ValidateReportName()?n.ValidatePath(n.objReportDetails,n.objReportDetails.Path)?n.objReportDetails.ValidateInputFields()?n.objReportDetails.ValidateQuery()||(t=!1):t=!1:t=!1:t=!1:t=!1,n.objReportDetails.isReportFinsihDisable=t,t};n.objReportDetails.ValidateReportID=function(){var t=!0,i;return n.objReportDetails.ID==undefined||n.objReportDetails.ID==""?(n.objReportDetails.ErrorMessageForDisplay="Error: Please enter a Report ID.",t=!1):n.objReportDetails.ID&&n.objReportDetails.ID.toLowerCase().startsWith("rpt")?(n.objReportDetails.ErrorMessageForDisplay="Error: ID can not start with rpt.",t=!1):(n.objReportDetails.ID!=undefined||n.objReportDetails.ID!="")&&n.objReportDetails.ID.length<=3?(n.objReportDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",t=!1):(isValidFileID(n.objReportDetails.ID)||(n.objReportDetails.ErrorMessageForDisplay="Error: File Name must not start with digits, contain space(s), special characters(except '-').",t=!1),i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="rpt"+n.objReportDetails.ID.toLowerCase()}),i.length>0&&(n.objReportDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Report ID.",t=!1)),t};n.objReportDetails.ValidateReportName=function(){var t=!0;return n.objReportDetails.sfwReportName==undefined||n.objReportDetails.sfwReportName==""?(n.objReportDetails.ErrorMessageForDisplay="Error: Please select a Report Name.",t=!1):n.objReportDetails.lstReportData.length>0&&(n.objReportDetails.lstReportData.some(function(t){return t!=undefined&&t==n.objReportDetails.sfwReportName})||(n.objReportDetails.ErrorMessageForDisplay="Error: Invalid Report Name.",t=!1)),t};n.objReportDetails.ValidateInputFields=function(){if(angular.isArray(n.objReportDetails.lstReportCategory)&&n.objReportDetails.sfwReportCategory){var t=e.getListByPropertyName(n.objReportDetails.lstReportCategory,"CodeValue",!1);if(t.indexOf(n.objReportDetails.sfwReportCategory.trim())<=-1)return n.objReportDetails.ErrorMessageForDisplay="Error: invalid Report category.",!1}return angular.isArray(n.resourceList)&&n.objReportDetails.sfwResource&&n.resourceList.indexOf(n.objReportDetails.sfwResource.trim())<=-1?(n.objReportDetails.ErrorMessageForDisplay="Error: invalid Resource id.",!1):!0};n.objReportDetails.ValidateQuery=function(){var t=!0,f,i,e;if(n.objReportDetails.sfwType=="Query"){if(n.objReportDetails.sfwQueryRef==undefined||n.objReportDetails.sfwQueryRef=="")n.objReportDetails.ErrorMessageForDisplay="Error: Please select a Query.",t=!1;else if(n.objReportDetails.sfwQueryRef){if(n.objReportDetails.sfwQueryRef.contains(".")){if(f=n.objReportDetails.sfwQueryRef,i=f.split("."),i&&i.length==2){var o=i[0],s=i[1],h=u.getEntityIntellisense(),r=h.filter(function(n){return n.ID==o});r&&r.length>0?(e=r[0],e.Queries.some(function(n){return n.ID==s})||(n.objReportDetails.ErrorMessageForDisplay="Error: Invalid Query",t=!1)):(n.objReportDetails.ErrorMessageForDisplay="Error: Invalid Query",t=!1)}return t}n.objReportDetails.ErrorMessageForDisplay="Error: Invalid Query";t=!1}}else n.objReportDetails.sfwType=="Method"&&(n.objReportDetails.sfwMethodName==undefined||n.objReportDetails.sfwMethodName=="")&&(n.objReportDetails.ErrorMessageForDisplay="Error: Please select a Method.",t=!1);return t};n.objReportDetails.InitForms=function(){n.objReportDetails.ID="";n.objReportDetails.sfwReportName="";n.objReportDetails.sfwDescription="";n.objReportDetails.Path="";n.objReportDetails.sfwQueryRef="";n.objReportDetails.sfwMethodName="";n.objReportDetails.sfwReportCategory="";n.objReportDetails.sfwResource="";n.objReportDetails.sfwType="Query";$.connection.hubCreateNewObject.server.loadReportData().done(function(t){n.$apply(function(){n.objReportDetails.lstReportData=t})});$.connection.hubCreateNewObject.server.loadMethodList().done(function(t){t&&(n.objReportDetails.lstReportMethod=JSON.parse(t))});$.connection.hubCreateNewObject.server.loadReportCategory().done(function(t){n.$evalAsync(function(){t&&(n.objReportDetails.lstReportCategory=JSON.parse(t))})});n.objReportDetails.isFinsihDisable()};n.objReportDetails.onReportNameChange=function(t){var i=$(t.target);setSingleLevelAutoComplete(i,n.objReportDetails.lstReportData);t.ctrlKey&&t.keyCode==$.ui.keyCode.SPACE&&$(i).data("ui-autocomplete")&&($(i).autocomplete("search",$(i).val().trim()),t.preventDefault())};n.objReportDetails.onReportNameClick=function(t){var i=$(t.target).prevAll("input[type='text']");i&&(i.focus(),setSingleLevelAutoComplete(i,n.objReportDetails.lstReportData),$(i).data("ui-autocomplete")&&$(i).autocomplete("search",$(i).val()));t&&t.stopPropagation()};n.objReportDetails.openQueryDialog=function(){};n.$on("onQueryClick",function(t,i){n.objReportDetails.sfwQueryRef=i});n.objReportDetails.GetMethodParameters=function(t){function f(n){var t=n.ParameterType.FullName;t=t.substring(t.lastIndexOf(".")+1);r.push({ID:" "+n.ParameterName,DataType:t})}var r=[],i=n.objReportDetails.lstReportMethod.filter(function(n){return n.ShortName==t}),u;return i&&i.length>0&&(u=i[0],angular.forEach(u.Parameters,f)),r};n.objReportDetails.UpdateData=function(){n.objReportDetails.UpdateReportDetails();n.objReportDetails.UpdateReportParameters()};n.objReportDetails.UpdateReportDetails=function(){var t="rpt"+n.objReportDetails.ID;n.objReport={Name:"form",Value:"",dictAttributes:{},Elements:[],Children:[]};n.objReport.dictAttributes.ID=t;n.objReport.dictAttributes.sfwReportName=n.objReportDetails.sfwReportName;n.objReport.dictAttributes.sfwReportCategory=n.objReportDetails.sfwReportCategory;n.objReport.dictAttributes.sfwResource=n.objReportDetails.sfwResource;n.objReport.dictAttributes.sfwDescription=n.objReportDetails.sfwDescription;n.objReport.dictAttributes.sfwType="Report";n.objReport.dictAttributes.sfwActive="True";n.objReport.dictAttributes.sfwStatus="Review";n.objReport.dictAttributes.version="4.0"};n.objReportDetails.UpdateReportParameters=function(){var o={Name:"initialload",Value:"",dictAttributes:{},Elements:[],Children:[]},s={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},f,c,l,u,t,i,e,r,h;if(s.dictAttributes.ID="Main",f=[],n.objReportDetails.sfwType&&n.objReportDetails.sfwType=="Query"?(c={Name:"query",Value:"",dictAttributes:{},Elements:[],Children:[]},c.dictAttributes.sfwQueryRef=n.objReportDetails.sfwQueryRef,o.Elements.push(c),f=n.objReportDetails.onQueryChange()):n.objReportDetails.sfwType&&n.objReportDetails.sfwType=="Method"&&(l={Name:"custommethod",Value:"",dictAttributes:{},Elements:[],Children:[]},l.dictAttributes.sfwMethodName=n.objReportDetails.sfwMethodName,o.Elements.push(l),f=n.objReportDetails.GetMethodParameters(n.objReportDetails.sfwMethodName)),o&&f.length>0)for(e=0;e<f.length;)u={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},r=f[e],r=r.ID.substr(1),h=GetCaptionFromFieldName(r)+" : ",t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{sfwIsCaption:"True"},Elements:[],Children:[]},i.dictAttributes.Text=h,t.Elements.push(i),u.Elements.push(t),t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i={Name:"sfwTextBox",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i.dictAttributes.ID=r,i.dictAttributes.sfwObjectField=r,t.Elements.push(i),u.Elements.push(t),e++,e<f.length&&(r=f[e],r=r.ID.substr(1),h=GetCaptionFromFieldName(r)+" : ",t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{sfwIsCaption:"True"},Elements:[],Children:[]},i.dictAttributes.Text=h,t.Elements.push(i),u.Elements.push(t),t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i={Name:"sfwTextBox",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},i.dictAttributes.ID=r,i.dictAttributes.sfwObjectField=r,t.Elements.push(i),u.Elements.push(t),e++),s.Elements.push(u);else u={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},u.Elements.push(t),s.Elements.push(u);n.objReport.Elements.push(o);n.objReport.Elements.push(s)};n.objReportDetails.onQueryChange=function(){function s(t){n.lstQryField.push(t)}var f,t,e,i,o;if(n.lstQryField=[],n.objReportDetails.sfwQueryRef&&(f=n.objReportDetails.sfwQueryRef,t=f.split("."),t&&t.length==2)){var h=t[0],c=t[1],l=u.getEntityIntellisense(),r=l.filter(function(n){return n.ID==h});r&&r.length>0&&(e=r[0],i=e.Queries.filter(function(n){return n.ID==c}),i&&i.length>0&&(o=i[0],angular.forEach(o.Parameters,s)))}return n.lstQryField};n.objFormLinkDetails.InitFormLink=function(){n.objFormLinkDetails.lstWebSite=[];n.objFormLinkDetails.ID="";n.objFormLinkDetails.HtmlTemplatePath="";n.objFormLinkDetails.Path="";n.objFormLinkDetails.MainQueryID="";n.objFormLinkDetails.sfwEntity="";(n.SelectedEntity&&n.objNewItems.SelectedOption=="HtxLookup"||n.objNewItems.SelectedOption=="HtxMaintenance"||n.objNewItems.SelectedOption=="HtxWizard")&&(n.objFormLinkDetails.sfwEntity=n.SelectedEntity,n.objFormLinkDetails.PopulateFormName());n.objFormLinkDetails.sfwEntity&&$.connection.hubForm.server.getFormEntityModel(n.objFormLinkDetails.sfwEntity).done(function(t){n.$apply(function(){n.objFormLinkDetails.objEntityModel=t;var i=n.objFormLinkDetails.objEntityModel.Elements.filter(function(n){return n.Name=="groupslist"});i&&i.length>0&&(n.objFormLinkDetails.GroupList=i[0])})});n.objFormLinkDetails.isFormLinkFinish()};n.objFormLinkDetails.CanShowFormLinkStep=function(){var t=!0;return(n.objNewItems.SelectedOption=="HtxLookup"||n.objNewItems.SelectedOption=="HtxMaintenance"||n.objNewItems.SelectedOption=="HtxWizard")&&(t=!1),t};n.objFormLinkDetails.isFormLinkFinish=function(){var t=!0;return n.objFormLinkDetails.ErrorMessageForDisplay="",n.objFormLinkDetails.ValidateFormName()?n.objFormLinkDetails.ValidateHtmlTemplatePath()?n.ValidatePath(n.objFormLinkDetails,n.objFormLinkDetails.Path)?n.objFormLinkDetails.ValidateMainQuery()?n.objFormLinkDetails.ValidateEntity()||(t=!1):t=!1:t=!1:t=!1:t=!1,n.objFormLinkDetails.isFormLinkDetailsFinishDisable=t,t};n.objFormLinkDetails.ValidateFormName=function(){var t=!0,i;return n.objFormLinkDetails.ID==undefined||n.objFormLinkDetails.ID==""?(n.objFormLinkDetails.ErrorMessageForDisplay="Error: Please enter a Form Name (ID).",t=!1):n.objFormLinkDetails.ID&&n.objFormLinkDetails.ID.toLowerCase().startsWith("htx")?(n.objFormLinkDetails.ErrorMessageForDisplay="Error: ID can not start with htx.",t=!1):(n.objFormLinkDetails.ID!=undefined||n.objFormLinkDetails.ID!="")&&n.objFormLinkDetails.ID.length<=3?(n.objFormLinkDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",t=!1):n.objFormLinkDetails.ID&&n.objFormLinkDetails.ID.toLowerCase().endsWith("lookup")?(n.objFormLinkDetails.ErrorMessageForDisplay="Error: ID can not ends with lookup.",t=!1):n.objFormLinkDetails.ID&&n.objFormLinkDetails.ID.toLowerCase().endsWith("maintenance")?(n.objFormLinkDetails.ErrorMessageForDisplay="Error: ID can not ends with maintenance.",t=!1):n.objFormLinkDetails.ID&&n.objFormLinkDetails.ID.toLowerCase().endsWith("wizard")?(n.objFormLinkDetails.ErrorMessageForDisplay="Error: ID can not ends with wizard.",t=!1):(isValidFileID(n.objFormLinkDetails.ID,!0)||(n.objFormLinkDetails.ErrorMessageForDisplay="Error: Numeric Values and Special characters are not allowed in Name.",t=!1),n.objNewItems.SelectedOption=="HtxLookup"?(i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="htx"+n.objFormLinkDetails.ID.toLowerCase()+"lookup"}),i.length>0&&(n.objFormLinkDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Form Name (ID).",t=!1)):n.objNewItems.SelectedOption=="HtxMaintenance"?(i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="htx"+n.objFormLinkDetails.ID.toLowerCase()+"maintenance"}),i.length>0&&(n.objFormLinkDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Form Name (ID).",t=!1)):n.objNewItems.SelectedOption=="HtxWizard"&&(i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="htx"+n.objFormLinkDetails.ID.toLowerCase()+"wizard"}),i.length>0&&(n.objFormLinkDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Form Name (ID).",t=!1))),t};n.objFormLinkDetails.ValidateEntity=function(){var t=!0,i;return n.objFormLinkDetails.sfwEntity==undefined||n.objFormLinkDetails.sfwEntity==""?(n.objFormLinkDetails.ErrorMessageForDisplay="Error: Entity cannot be empty.",t=!1):(i=u.getEntityIntellisense(),i.some(function(t){return t.ID==n.objFormLinkDetails.sfwEntity})||(n.objFormLinkDetails.ErrorMessageForDisplay="Error: The entity is not valid. Please enter a different Name (ID).",t=!1)),t};n.objFormLinkDetails.ValidateHtmlTemplatePath=function(){var t=!0;return(n.objFormLinkDetails.HtmlTemplatePath==undefined||n.objFormLinkDetails.HtmlTemplatePath=="")&&(n.objFormLinkDetails.ErrorMessageForDisplay="Error: Please enter a Html Template Path.",t=!1),t};n.objFormLinkDetails.ValidateMainQuery=function(){var t=!0,f,i,e;if(n.objNewItems.SelectedOption=="HtxLookup"&&n.objFormLinkDetails.IsShowMainQuery)if(n.objFormLinkDetails.MainQueryID==undefined||n.objFormLinkDetails.MainQueryID=="")n.objFormLinkDetails.ErrorMessageForDisplay="Error: Please select a Lookup Query.",t=!1;else if(n.objFormLinkDetails.MainQueryID){if(n.objFormLinkDetails.MainQueryID.contains(".")){if(f=n.objFormLinkDetails.MainQueryID,i=f.split("."),i&&i.length==2){var o=i[0],s=i[1],h=u.getEntityIntellisense(),r=h.filter(function(n){return n.ID==o});r&&r.length>0?(e=r[0],e.Queries.some(function(n){return n.ID==s})||(n.objFormLinkDetails.ErrorMessageForDisplay="Error: Invalid Query",t=!1)):(n.objFormLinkDetails.ErrorMessageForDisplay="Error: Invalid Query",t=!1)}return t}n.objFormLinkDetails.ErrorMessageForDisplay="Error: Invalid Query";t=!1}return t};n.objFormLinkDetails.getSelectedDetails=function(t,i,r){if(n.selectedProperty=t,i=="FilePath")n.IsSingleOrMultiple=r,$.connection.hubFormLink.server.getHtmlTemplateFilePath().done(function(t){n.HtmlTemplatePath=t;n.objFormLinkDetails.HtmlFolderTemplatePath=t;$.connection.hubMain.server.getFilePath(!1,"CreateNewObject",n.HtmlTemplatePath,"html")})};n.objFormLinkDetails.PopulateFormName=function(){var r,t,i;n.objFormLinkDetails.ID="";n.objFormLinkDetails.IsShowMainQuery=!1;n.objFormLinkDetails.sfwEntity!=undefined&&n.objFormLinkDetails.sfwEntity!=""&&(n.objFormLinkDetails.ID=n.objFormLinkDetails.sfwEntity.substring(3),r=u.getEntityIntellisense(),t=r.filter(function(t){return t.ID==n.objFormLinkDetails.sfwEntity}),t&&t.length>0&&(t[0].FilePath.contains(".")&&(n.xmlFileLocation?i=t[0].FilePath.substring(n.xmlFileLocation.length+1,t[0].FilePath.lastIndexOf("\\")):(i=t[0].FilePath.substring(0,t[0].FilePath.lastIndexOf("\\")),i=i.substring(i.lastIndexOf("\\")+1)),n.objFormLinkDetails.Path=i),t[0].TableName||(n.objFormLinkDetails.IsShowMainQuery=!0)));n.checkAndExecuteLocationCallback(n.objFormLinkDetails)};n.receiveNewHtmlFilePath=function(t){n.$apply(function(){n.objFormLinkDetails.HtmlTemplatePath=t[0];n.objFormLinkDetails.isFormLinkFinish()})};n.receiveMapUnmapControls=function(t,r){function f(t){var i={ControlID:t.ControlID,HtmlControlType:t.HtmlControlType,ControlType:t.ControlType,IsValid:t.IsValid};n.objFormLinkDetails.InvalidControlList.push(i)}function e(t){var i={ControlID:t.ControlID,HtmlControlType:t.HtmlControlType,ControlType:t.ControlType,IsValid:t.IsValid};n.objFormLinkDetails.IgnoredControlList.push(i)}function o(t){var i={ControlID:t.ControlID,HtmlControlType:t.HtmlControlType,ControlType:t.ControlType,IsValid:t.IsValid};n.objFormLinkDetails.RemovedControlList.push(i)}function s(t){var i={ControlID:t.ControlID,HtmlControlType:t.HtmlControlType,ControlType:t.ControlType,IsValid:t.IsValid};n.objFormLinkDetails.MappedControlList.push(i)}function h(t){var i={ControlID:t.ControlID,HtmlControlType:t.HtmlControlType,ControlType:t.ControlType,IsValid:t.IsValid};n.objFormLinkDetails.MapControlList.push(i)}var u;i.IsLoading=!1;u=t;n.objFormLinkDetails.MapControlList=[];n.objFormLinkDetails.MappedControlList=[];n.objFormLinkDetails.IgnoredControlList=[];n.objFormLinkDetails.RemovedControlList=[];n.objFormLinkDetails.InvalidControlList=[];u.Map&&u.Map.length>0&&angular.forEach(u.Map,h);u.Mapped&&u.Mapped.length>0&&angular.forEach(u.Mapped,s);u.Removed&&u.Removed.length>0&&angular.forEach(u.Removed,o);u.Ignored&&u.Ignored.length>0&&angular.forEach(u.Ignored,e);u.Invalid&&u.Invalid.length>0&&angular.forEach(u.Invalid,f);u=r;n.$apply(function(){var t=n.$new(),r,f;n.activeTab="MAP";t.isMappedControlClick=!1;t.MapControls=n.objFormLinkDetails.MapControlList;t.MappedControls=n.objFormLinkDetails.MappedControlList;t.RemovedControls=n.objFormLinkDetails.RemovedControlList;t.IgnoredControls=n.objFormLinkDetails.IgnoredControlList;t.InvalidControls=n.objFormLinkDetails.InvalidControlList;t.ControlTypes=u;t.FormObject=n.objFormLinkDetails.FormInfo;n.objFormLinkDetails.FormInfo.FileType=="FormLinkLookup"&&(r=t.ControlTypes.indexOf("sfwHyperLink"),t.ControlTypes.splice(r,1),r=t.ControlTypes.indexOf("sfwJSONData"),r>=0&&t.ControlTypes.splice(r,1),r=t.ControlTypes.indexOf("sfwCalendar"),r>=0&&t.ControlTypes.splice(r,1),r=t.ControlTypes.indexOf("sfwScheduler"),r>=0&&t.ControlTypes.splice(r,1));(n.objFormLinkDetails.FormInfo.FileType=="FormLinkMaintenance"||n.objFormLinkDetails.FormInfo.FileType=="FormLinkWizard")&&t.ControlTypes.push("sfwListView");t.onOKClick=function(){n.objFormLinkDetails.MapControlList=t.MapControls;t.isOkClick=!0;t.SaveModelWithPackets(t.MapControls,"Map");t.closeDialog()};t.closeDialog=function(){t.dialog&&(t.isOkClick=!1,i.IsLoading=!1,t.dialog.close())};t.setActiveTab=function(n){t.activeTab=n;n=="MAPPED"&&(t.isMappedControlClick=!0)};t.SaveModelWithPackets=function(r,u){var h=JSON.stringify(r),s;if(i.IsLoading=!0,h.length<32e3)$.connection.hubCreateNewObject.server.populateCreationControls(r,u).done($.connection.hubCreateNewObject.server.createHtxModel(t.isOkClick,t.FormObject,t.ControlTypes).done(function(t){var r=t;n.$evalAsync(function(){n.dialogForNew.close();i.openFile(r,!0);var t=getScopeByFileName(n.SelectedEntity);t!=undefined&&t&&t.lstItemsHtxList&&t.lstItemsHtxList.push(r);i.IsLoading=!1})}));else{var e="",c=[],o=0;for(s=0;s<h.length;s++)o++,e=e+h[s],o==32e3&&(o=0,c.push(e),e="");o!=0&&c.push(e);f(c,u);$.connection.hubCreateNewObject.server.createHtxModel(t.isOkClick,t.FormObject,t.ControlTypes).done(function(t){var r=t;n.$evalAsync(function(){n.dialogForNew.close();i.openFile(r,!0);var t=getScopeByFileName(n.SelectedEntity);t!=undefined&&t&&t.lstItemsHtxList&&t.lstItemsHtxList.push(r);i.IsLoading=!1})})}};f=function(n,t){for(var i=0;i<n.length;i++)$.connection.hubCreateNewObject.server.receiveNewHtxDataPackets(n[i],n.length,i,t)};t.dialog=i.showDialog(t,"Control Mapping","CreateNewObject/views/FormLink/FormLinkMapUnmapControls.html",{width:600,height:400})});i.IsLoading=!1};n.objPrototypeFormDetails.InitWizard=function(){n.objPrototypeFormDetails.ID="";n.objPrototypeFormDetails.sfwTitle="";n.objPrototypeFormDetails.isFinsihDisable()};n.objPrototypeFormDetails.isNextDisable=function(){var t=!0;n.objPrototypeFormDetails.ErrorMessageForDisplay="";n.objPrototypeFormDetails.ValidateFormName()||(t=!1);t&&n.objNewItems.SelectedOption.toLowerCase()!="prototypelookup"&&(t=!1);n.objPrototypeFormDetails.isPrototypeFormDetailsNextDisable=t;n.objPrototypeLookupColumns.isFinsihDisable()};n.objPrototypeFormDetails.isFinsihDisable=function(){var t=!0;return n.objPrototypeFormDetails.ErrorMessageForDisplay="",n.objPrototypeFormDetails.ValidateFormName()||(t=!1),n.objPrototypeFormDetails.isPrototypeFormDetailsFinishDisable=t,t};n.objPrototypeLookupColumns.isFinsihDisable=function(){var t=!0;return n.objPrototypeLookupColumns.ErrorMessageForDisplay="",n.objPrototypeLookupColumns.ValidateGridColumn()||(t=!1),n.objPrototypeLookupColumns.isPrototypeFormDetailsFinishDisable=t,t};n.objPrototypeLookupColumns.ValidateGridColumn=function(){var t=!0;return n.objPrototypeLookupColumns.lstColumns.length==0&&(n.objPrototypeLookupColumns.ErrorMessageForDisplay="Error: Atleast One Column should be there.",t=!1),t};n.objPrototypeFormDetails.ValidateFormName=function(){var t=!0,i;return n.objPrototypeFormDetails.ID==undefined||n.objPrototypeFormDetails.ID==""?(n.objPrototypeFormDetails.ErrorMessageForDisplay="Error:Pleaseentera"+n.objNewItems.SelectedOption.substring(9)+"Name(ID).",t=!1):isValidFileID(n.objPrototypeFormDetails.ID,!0)?n.objPrototypeFormDetails.ID&&n.objPrototypeFormDetails.ID.toLowerCase().startsWith("wfp")?(n.objPrototypeFormDetails.ErrorMessageForDisplay="Error: ID can not start with wfp.",t=!1):(n.objPrototypeFormDetails.ID!=undefined||n.objPrototypeFormDetails.ID!="")&&n.objPrototypeFormDetails.ID.length<=3?(n.objPrototypeFormDetails.ErrorMessageForDisplay="Error: Invalid ID. Minimum 4 characters are required.",t=!1):n.objPrototypeFormDetails.ID&&n.objPrototypeFormDetails.ID.toLowerCase().endsWith(n.objNewItems.SelectedOption.substring(9).toLowerCase())?(n.objPrototypeFormDetails.ErrorMessageForDisplay="Error: ID can not end with "+n.objNewItems.SelectedOption.substring(9)+" .",t=!1):(i=n.lstAllFiles.filter(function(t){return t.FileName.toLowerCase()=="wfp"+n.objPrototypeFormDetails.ID.toLowerCase()+n.objNewItems.SelectedOption.substring(9).toLowerCase()}),i.length>0&&(n.objPrototypeFormDetails.ErrorMessageForDisplay="Error: The File Name already exists.\nPlease enter a different Wizard Name (ID).",t=!1)):(n.objPrototypeFormDetails.ErrorMessageForDisplay="Error: Numeric Values and Special characters are not allowed in Name.",t=!1),t};n.objPrototypeLookupColumns.onSelectLookupColumns=function(t){n.objPrototypeLookupColumns.SelectedColumn=t};n.objPrototypeLookupColumns.AddColumn=function(){var t={ColumnName:"",ControlType:"Label"};n.objPrototypeLookupColumns.lstColumns.push(t);n.objPrototypeLookupColumns.onSelectLookupColumns(t);n.objPrototypeLookupColumns.isFinsihDisable();n.scrollBySelectedField("#prototype-lookup-column-details",".selected")};n.objPrototypeLookupColumns.deleteColumn=function(){if(n.objPrototypeLookupColumns.SelectedColumn){var t=n.objPrototypeLookupColumns.lstColumns.indexOf(n.objPrototypeLookupColumns.SelectedColumn);t>=0&&(n.objPrototypeLookupColumns.lstColumns.splice(t,1),t<n.objPrototypeLookupColumns.lstColumns.length?n.objPrototypeLookupColumns.SelectedColumn=n.objPrototypeLookupColumns.lstColumns[t]:n.objPrototypeLookupColumns.lstColumns.length>0&&(n.objPrototypeLookupColumns.SelectedColumn=n.objPrototypeLookupColumns.lstColumns[t-1]))}n.objPrototypeLookupColumns.isFinsihDisable()};n.objPrototypeLookupColumns.canDeleteColumn=function(){return n.objPrototypeLookupColumns.SelectedColumn?!0:!1};n.objPrototypeLookupColumns.moveSelectedGridColumnUp=function(){if(n.objPrototypeLookupColumns.SelectedColumn){var t=n.objPrototypeLookupColumns.lstColumns.indexOf(n.objPrototypeLookupColumns.SelectedColumn),i=n.objPrototypeLookupColumns.lstColumns[t-1];n.objPrototypeLookupColumns.lstColumns[t-1]=n.objPrototypeLookupColumns.SelectedColumn;n.objPrototypeLookupColumns.lstColumns[t]=i;n.scrollBySelectedField("#prototype-lookup-column-details",".selected")}};n.objPrototypeLookupColumns.canmoveSelectedGridColumnUp=function(){var i=!0,t;if(n.objPrototypeLookupColumns.SelectedColumn)for(t=0;t<n.objPrototypeLookupColumns.lstColumns.length;t++)n.objPrototypeLookupColumns.lstColumns[t]==n.objPrototypeLookupColumns.SelectedColumn&&t>0&&(i=!1);return i};n.objPrototypeLookupColumns.moveSelectedGridColumnDown=function(){if(n.objPrototypeLookupColumns.SelectedColumn){var t=n.objPrototypeLookupColumns.lstColumns.indexOf(n.objPrototypeLookupColumns.SelectedColumn),i=n.objPrototypeLookupColumns.lstColumns[t+1];n.objPrototypeLookupColumns.lstColumns[t+1]=n.objPrototypeLookupColumns.SelectedColumn;n.objPrototypeLookupColumns.lstColumns[t]=i;n.scrollBySelectedField("#prototype-lookup-column-details",".selected")}};n.objPrototypeLookupColumns.canmoveSelectedGridColumnDown=function(){var i=!0,t;if(n.objPrototypeLookupColumns.SelectedColumn)for(t=0;t<n.objPrototypeLookupColumns.lstColumns.length;t++)n.objPrototypeLookupColumns.lstColumns[t]==n.objPrototypeLookupColumns.SelectedColumn&&t<n.objPrototypeLookupColumns.lstColumns.length-1&&(i=!1);return i};n.objPrototypeFormDetails.UpdateData=function(t){n.objPrototypeFormDetails.UpdateFormAttributes(t);t=="Wizard"?n.objPrototypeFormDetails.UpdateCenterMiddle():t=="Lookup"?n.objPrototypeFormDetails.UpdateCenterMiddleForLookup():t=="Maintenance"&&n.objPrototypeFormDetails.UpdateCenterMiddleForMaintenance()};n.objPrototypeFormDetails.UpdateFormAttributes=function(t){n.objSfxPrototypeForm={Name:"form",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]};var i="wfp"+n.objPrototypeFormDetails.ID+t;n.objSfxPrototypeForm.dictAttributes.ID=i;n.objSfxPrototypeForm.dictAttributes.sfwTitle=n.objPrototypeFormDetails.sfwTitle;n.objSfxPrototypeForm.dictAttributes.sfwEntity="entPrototype";n.objSfxPrototypeForm.dictAttributes.sfwType=t;n.objSfxPrototypeForm.dictAttributes.sfwActive="True";n.objSfxPrototypeForm.dictAttributes.sfwAspNetCaching="False"};n.objPrototypeFormDetails.UpdateCenterMiddle=function(){var h={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},e={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},c={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},f={Name:"sfwWizard",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]},o,u,i,t,r,s;f.dictAttributes.ID="wizMain";f.dictAttributes.Width="100%";o={Name:"WizardSteps",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]};u={Name:"sfwWizardStep",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};u.dictAttributes.ID="wzsStep";u.dictAttributes.sfwShowInHeader="True";u.dictAttributes.Title="New Step";s={Name:"HeaderTemplate",prefix:"",Value:"",dictAttributes:{},Elements:[],Children:[]};r={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};r.dictAttributes.ID="tblHeaderTemplate";r.dictAttributes.CssClass="Table";i={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i.Elements.push(t);i.Elements.push(t);i.Elements.push(t);i.Elements.push(t);r.Elements.push(i);s.Elements.push(r);r={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};r.dictAttributes.ID="tblStep";r.dictAttributes.CssClass="Table";i={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i.Elements.push(t);i.Elements.push(t);i.Elements.push(t);i.Elements.push(t);r.Elements.push(i);u.Elements.push(r);o.Elements.push(u);f.Elements.push(o);f.Elements.push(s);t={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};c.Elements.push(f);e.Elements.push(t);e.Elements.push(c);e.Elements.push(t);h.Elements.push(e);n.objSfxPrototypeForm.Elements.push(h)};n.objPrototypeFormDetails.UpdateCenterMiddleForMaintenance=function(){var o,s,f,u,r,i,t,e=n.objSfxPrototypeForm.Elements.filter(function(n){return n.Name=="sfwTable"}),h,c;e&&e.length>0&&(h=n.objSfxPrototypeForm.Elements.indexOf(e),h>-1&&n.objSfxPrototypeForm.Elements.splice(h,1));e={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};s={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};o={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f={Name:"sfwPanel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};u={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f.dictAttributes.ID="pnltoolbar";u.dictAttributes.ID="toolbar";u.dictAttributes.CellPadding="3";r={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnSave";t.dictAttributes.sfwMethodName="btnSave_Click";t.dictAttributes.Text="Save";i.Elements.push(t);t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnCancel";t.dictAttributes.sfwMethodName="btnCancel_Click";t.dictAttributes.Text="Refresh";i.Elements.push(t);t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnPrev";t.dictAttributes.sfwMethodName="btnPrev_Click";t.dictAttributes.Text="Prev";i.Elements.push(t);t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnNext";t.dictAttributes.sfwMethodName="btnNext_Click";t.dictAttributes.Text="Next";i.Elements.push(t);t={Name:"sfwButton",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="btnCorrespondence";t.dictAttributes.sfwMethodName="btnCorrespondence_Click";t.dictAttributes.Text="Correspondence";i.Elements.push(t);r.Elements.push(i);o.Elements.push(f);u.Elements.push(r);f.Elements.push(u);s.Elements.push(o);e.Elements.push(s);s={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};o={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f={Name:"sfwPanel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};u={Name:"sfwTable",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};f.dictAttributes.ID="pnlAuditInfo";u.dictAttributes.ID="tblAuditInfo";u.dictAttributes.CssClass="Table";f.dictAttributes.sfwCaption="Audit Information";c=null;r={Name:"sfwRow",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="capCreate";t.dictAttributes.Text="Created : ";t.dictAttributes.sfwIsCaption="True";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblCreatedBy";t.dictAttributes.Text="Created By";t.dictAttributes.sfwIsCaption="True";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblCreatedDate";t.dictAttributes.Text="Created Date";t.dictAttributes.sfwIsCaption="True";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="capModify";t.dictAttributes.Text="Modified : ";t.dictAttributes.sfwIsCaption="True";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblModifiedBy";t.dictAttributes.Text="Modified By";t.dictAttributes.sfwIsCaption="True";i.Elements.push(t);r.Elements.push(i);i={Name:"sfwColumn",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t={Name:"sfwLabel",prefix:"swc",Value:"",dictAttributes:{},Elements:[],Children:[]};t.dictAttributes.ID="lblModifiedDate";t.dictAttributes.Text="Modified Date";t.dictAttributes.sfwIsCaption="True";i.Elements.push(t);r.Elements.push(i);u.Elements.push(r);f.Elements.push(u);o.Elements.push(f);s.Elements.push(o);e.Elements.push(s);n.objSfxPrototypeForm.Elements.push(e)};n.objPrototypeFormDetails.UpdateCenterMiddleForLookup=function(){var t={Name:"sfwTable",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},u={Name:"sfwPanel",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},i={Name:"sfwRow",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},r={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},u=n.objPrototypeFormDetails.UpdateSearchCriteria();r.Elements.push(u);i.Elements.push(r);t.Elements.push(i);n.objSfxPrototypeForm.Elements.push(t);n.objPrototypeLookupColumns.UpdateResultGrid();n.objPrototypeLookupColumns.UpdateResultPanel(t)};n.objPrototypeFormDetails.UpdateSearchCriteria=function(){var u,i,t,n,r,o,s,f,e,h;for(u={Name:"sfwPanel",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},u.dictAttributes.ID="pnlCriteria",r={Name:"sfwTable",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},r.dictAttributes.ID="tblCriteria",o=3,s=4,f=0;f<o;f++){for(i={Name:"sfwRow",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},e=0;e<s;e++)h={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},i.Elements.push(h);r.Elements.push(i)}return i={Name:"sfwRow",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},t={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},n={Name:"sfwButton",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},n.dictAttributes.ID="btnSearch",n.dictAttributes.ImageUrl="~/Image/gSearch.gif",n.dictAttributes.sfwMethodName="btnPrototypeSearch_Click",n.dictAttributes.sfwOperatorOn="tblCriteria",n.dictAttributes.Text="Search",t.Elements.push(n),n={Name:"sfwButton",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},n.dictAttributes.ID="btnReset",n.dictAttributes.ImageUrl="~/Image/gReset.gif",n.dictAttributes.sfwMethodName="btnReset_Click",n.dictAttributes.sfwOperatorOn="tblCriteria",n.dictAttributes.Text="Reset",t.Elements.push(n),i.Elements.push(t),t={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},n={Name:"sfwButton",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},n.dictAttributes.ID="btnStoreSearch",n.dictAttributes.ImageUrl="~/Image/gSave.gif",n.dictAttributes.sfwMethodName="btnStoreUserDefaults_Click",n.dictAttributes.sfwOperatorOn="tblCriteria",n.dictAttributes.Text="Store Search",t.Elements.push(n),i.Elements.push(t),t={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},i.Elements.push(t),t={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},i.Elements.push(t),r.Elements.push(i),u.Elements.push(r),u};n.objPrototypeLookupColumns.UpdateResultGrid=function(){var r,u,i,t;for(n.objPrototypeLookupColumns.objGridView={Name:"sfwGridView",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},n.objPrototypeLookupColumns.objGridView.dictAttributes.ID="dgrResult",n.objPrototypeLookupColumns.objGridView.dictAttributes.AllowPaging="True",n.objPrototypeLookupColumns.objGridView.dictAttributes.AllowSorting="True",n.objPrototypeLookupColumns.objGridView.dictAttributes.sfwSelection="Many",u={Name:"Columns",Value:"",dictAttributes:{},Elements:[]},i=0;i<n.objPrototypeLookupColumns.lstColumns.length>0;i++){var e=n.objPrototypeLookupColumns.lstColumns[i],o=e.ColumnName,s=e.ControlType,f={Name:"TemplateField",Value:"",prefix:"asp",dictAttributes:{},Elements:[]};f.dictAttributes.HeaderText=o;r={Name:"ItemTemplate",Value:"",prefix:"asp",dictAttributes:{},Elements:[]};switch(s){case"HyperLink":t={Name:"sfwLabel",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};t.dictAttributes.sfwLinkable="True";break;case"TextBox":t={Name:"sfwTextBox",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};break;case"DropDownList":t={Name:"sfwDropDownList",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};break;case"CheckBox":t={Name:"sfwCheckBox",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};t.dictAttributes.sfwTwoWayBinding="False";break;default:t={Name:"sfwLabel",Value:"",prefix:"swc",dictAttributes:{},Elements:[]}}t.dictAttributes.sfwEntityField="Property"+i;r.Elements.push(t);f.Elements.push(r);u.Elements.push(f)}n.objPrototypeLookupColumns.objGridView.Elements.push(u)};n.objPrototypeLookupColumns.UpdateResultPanel=function(t){var f,e,u,r,i,o={Name:"sfwRow",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};sfxCell={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};n.objPrototypeLookupColumns.DeleteResultPanel(t);f={Name:"sfwPanel",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};f.dictAttributes.ID="pnlResult";f.dictAttributes.sfwCaption="Search Results";e={Name:"sfwTable",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};e.dictAttributes.ID="tblResult";u={Name:"sfwRow",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};r={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};i={Name:"sfwButton",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};i.dictAttributes.ID="btnNew";i.dictAttributes.ImageUrl="~/Image/gNew.gif";i.dictAttributes.sfwMethodName="btnNew_Click";i.dictAttributes.sfwOperatorOn="tblCriteria";i.dictAttributes.Text="New";r.Elements.push(i);i={Name:"sfwButton",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};i.dictAttributes.ID="btnOpen";i.dictAttributes.ImageUrl="~/Image/gOpen.gif";i.dictAttributes.sfwMethodName="btnOpen_Click";i.dictAttributes.sfwRelatedControl="dgrResult";i.dictAttributes.Text="Open";r.Elements.push(i);i={Name:"sfwButton",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};i.dictAttributes.ID="btnDelete";i.dictAttributes.ImageUrl="~/Image/gDelete.gif";i.dictAttributes.sfwMethodName="btnDelete_Click";i.dictAttributes.sfwRelatedControl="dgrResult";i.dictAttributes.Text="Delete";r.Elements.push(i);i={Name:"sfwButton",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};i.dictAttributes.ID="btnExportExcel";i.dictAttributes.ImageUrl="~/Image/gExport.gif";i.dictAttributes.sfwMethodName="btnColumnsToExport_Click";i.dictAttributes.sfwRelatedControl="dgrResult";i.dictAttributes.Text="Export To Excel";r.Elements.push(i);u.Elements.push(r);e.Elements.push(u);u={Name:"sfwRow",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};r={Name:"sfwColumn",Value:"",prefix:"swc",dictAttributes:{},Elements:[]};r.Elements.push(n.objPrototypeLookupColumns.objGridView);u.Elements.push(r);e.Elements.push(u);f.Elements.push(e);t==null&&(t={Name:"sfwTable",Value:"",prefix:"swc",dictAttributes:{},Elements:[]},n.objSfxPrototypeForm.Elements.push(t));sfxCell.Elements.push(f);o.Elements.push(sfxCell);t.Elements.push(o)};n.objPrototypeLookupColumns.DeleteResultPanel=function(t){function u(n){}var i,r;n.objSfxPrototypeForm.Elements.length>0&&t&&(angular.forEach(t.Elements,u),i&&(r=sfwMainTable.Elements.indexOf(i),t.Elements.splice(r,1)))};n.onFileTypeChanged=function(){var t="";n.objNewItems.SelectedOption=="BPMN"||n.objNewItems.SelectedOption=="BPMTemplate"?(t=n.objNewItems.SelectedOption=="BPMN"?"BPM Map":"BPMN Map Template",v(t)):n.objNewItems.SelectedOption=="HtxLookup"||n.objNewItems.SelectedOption=="HtxMaintenance"||n.objNewItems.SelectedOption=="HtxWizard"?(t=n.objNewItems.SelectedOption=="HtxLookup"?"Html Lookup":n.objNewItems.SelectedOption=="HtxMaintenance"?"Html Maintenance":"Html Wizard",v(t)):(t=n.objNewItems.SelectedOption,v(t))};n.setTitle=function(t){n.$parent.title&&(n.$parent.title=t,n.$parent.dialogForNew.updateTitle(n.$parent.title))};n.validateExtraFields=function(){var t=!1;return n.objDirFunctions.validateExtraFieldsData&&(t=n.objDirFunctions.validateExtraFieldsData()),t};a=function(t){n.objDirFunctions.prepareExtraFieldData&&n.objDirFunctions.prepareExtraFieldData();t.Elements.push(n.objExtraFields)};n.objDirFunctions.showExtraFields=function(t){n.showExtraFieldsTab=t};n.checkCodeValues=function(t){var i=!1;return angular.forEach(t.lstTableCodeValue,function(n){n.errors&&e.isEmptyObj(n.errors)&&(i=!0)}),n.IsOneToOneOrManyDisable&&!i&&n.showExtraFields&&(i=!0),i};n.objWorkflowMapDetails.InitWorkflowMap=function(){n.objWorkflowMapDetails.isFinsihDisable();n.objWorkflowMapDetails.ID="";n.objWorkflowMapDetails.LoadWorkflowMapFile()};n.objWorkflowMapDetails.LoadWorkflowMapFile=function(){$.connection.hubCreateNewObject.server.loadMapFiles().done(function(t){n.$apply(function(){n.objWorkflowMapDetails.lstWorkflowMapFiles=t})});$.connection.hubCreateNewObject.server.loadProcessType().done(function(t){n.$apply(function(){n.objWorkflowMapDetails.lstWorkflowMapProcessType=t})})};n.CreateWorkflowMap=function(){var t={};t.FileID=n.objWorkflowMapDetails.FileID;t.ProcessType=n.objWorkflowMapDetails.ProcessType;t.Path=n.objWorkflowMapDetails.Path};n.objWorkflowMapDetails.isFinsihDisable=function(){var t=!0;return n.objWorkflowMapDetails.ErrorMessageForDisplay="",n.objWorkflowMapDetails.ValidateMapID()?n.objWorkflowMapDetails.ValidateprocessType()?n.ValidatePath(n.objWorkflowMapDetails,n.objWorkflowMapDetails.Path)||(t=!1):t=!1:t=!1,n.objWorkflowMapDetails.isWorkflowMapFinsihDisable=t,t};n.objWorkflowMapDetails.ValidateMapID=function(){var t=!0;return(n.objWorkflowMapDetails.FileID==undefined||n.objWorkflowMapDetails.FileID=="")&&(n.objWorkflowMapDetails.ErrorMessageForDisplay="Error: Please select a Map File.",t=!1),t};n.objWorkflowMapDetails.ValidateprocessType=function(){var t=!0;return(n.objWorkflowMapDetails.ProcessType==undefined||n.objWorkflowMapDetails.ProcessType=="")&&(n.objWorkflowMapDetails.ErrorMessageForDisplay="Error: Please select a Workflow Process Type.",t=!1),t};n.CloseWorkflowMapClick=function(){n.dialogForNew.close()};n.OnNextPageLoad();n.onFileTypeChanged()}]);