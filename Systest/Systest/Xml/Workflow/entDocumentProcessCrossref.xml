<?xml version="1.0" encoding="utf-8"?>
<entity ID="entDocumentProcessCrossref" sfwActive="True" sfwStatus="Review" sfwType="BusinessRule" sfwMainCDO="icdoDocumentProcessCrossref" sfwObjectID="busDocumentProcessCrossref" sfwTableName="sgt_document_process_crossref" sfwView="False">
  <rules>
    <rule ID="ActivityProfileIDIsRequired" sfwMessageId="4204" sfwExpression="(!string.IsNullOrEmpty(this.icdoDocumentProcessCrossref.document_type_action_value)) &amp;&amp; &#xA;(this.icdoDocumentProcessCrossref.document_type_action_value In[&quot;ALIN&quot;, &quot;REIN&quot;]) &amp;&amp; &#xA;(this.icdoDocumentProcessCrossref.process_id == 0)" sfwObjectBased="True" />
    <rule ID="CheckCombinationDocumentCodeAndProcessDuplicationInNewMode" sfwMessageId="4202" sfwExpression="(RFunc.ExecuteQuery&lt;Int32&gt;(&quot;entDocumentProcessCrossref.GetCountOfActivityProfileForDocumentCodeInNewMode&quot;, this.icdoDocumentProcessCrossref.process_id, this.ibusDocument.icdoDocument.document_code) &gt; 0)" sfwObjectBased="True" />
    <rule ID="CheckCombinationDocumentCodeAndProcessDuplicationInUpdateMode" sfwMessageId="4202" sfwExpression="(RFunc.ExecuteQuery&lt;Int32&gt;(&quot;entDocumentProcessCrossref.GetCountOfActivityProfileForDocumentCodeInUpdateMode&quot;, this.icdoDocumentProcessCrossref.process_id, this.ibusDocument.icdoDocument.document_code, this.icdoDocumentProcessCrossref.document_process_crossref_id) &gt; 0)" sfwObjectBased="True" />
    <rule ID="DocumentcodeNotEntered" sfwMessageId="4198" sfwExpression="(string.IsNullOrEmpty(this.istrDocumentCode))" sfwObjectBased="True" />
    <rule ID="ISDocumentMappedToProcessWithAlwaysInitiateMoreThanOnce" sfwMessageId="4203" sfwExpression="!(string.IsNullOrEmpty(this.istrDocumentCode)) &amp;&amp; &#xA;(RFunc.ExecuteQuery&lt;Int32&gt;(&quot;entDocumentProcessCrossref.GetCountOfDocumentCodeWithAlwaysInitiateByDocumentId&quot;, this.icdoDocumentProcessCrossref.document_id) &gt; 1)" sfwObjectBased="True" />
    <rule ID="IsValidDocumentCode" sfwMessageId="4201" sfwExpression="!(string.IsNullOrEmpty(this.istrDocumentCode)) &amp;&amp; &#xA;(RFunc.ExecuteQuery&lt;Int32&gt;(&quot;entDocumentProcessCrossref.CheckDocumentCodeIsValid&quot;, this.istrDocumentCode) == 0)" sfwObjectBased="True" />
  </rules>
  <delete />
  <checklist />
  <initialload />
  <softerror />
  <harderror>
    <item ID="CheckCombinationDocumentCodeAndProcessDuplicationInUpdateMode" sfwMode="Update" sfwStatus="Active" />
    <item ID="CheckCombinationDocumentCodeAndProcessDuplicationInNewMode" sfwMode="New" sfwStatus="Active" />
    <item ID="ISDocumentMappedToProcessWithAlwaysInitiateMoreThanOnce" sfwMode="All" sfwStatus="Active" />
    <item ID="IsValidDocumentCode" sfwMode="All" sfwStatus="Active" />
    <item ID="DocumentcodeNotEntered" sfwMode="All" sfwStatus="Active" />
    <item ID="ActivityProfileIDIsRequired" sfwMode="All" sfwStatus="Active" />
  </harderror>
  <validatedelete />
  <groupslist />
  <updateablecdo />
  <commonproperties />
  <queries>
    <query ID="Looukp" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select dpc.*,p.*,d.* FROM sgt_document_process_crossref dpc&#xD;&#xA;INNER JOIN SGT_DOCUMENT d on dpc.DOCUMENT_ID = d.DOCUMENT_ID&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS p on dpc.PROCESS_ID = p.PROCESS_ID&#xD;&#xA;order by dpc.DOCUMENT_PROCESS_CROSSREF_ID desc">
      <parameters />
    </query>
    <query ID="GetCountOfActivityProfileForDocumentCodeInNewMode" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select count(*) from sgt_document_process_crossref docpro&#xD;&#xA;left outer join sgt_document doc on docpro.document_id = doc.document_id&#xD;&#xA;where docpro.process_id = @process_id&#xD;&#xA;and doc.document_code = @document_code &#xD;&#xA;&#xD;&#xA;&#xD;&#xA;">
      <parameters>
        <parameter ID="@process_id" sfwDataType="int" />
        <parameter ID="@document_code" sfwDataType="string" />
      </parameters>
    </query>
    <query ID="GetCountOfActivityProfileForDocumentCodeInUpdateMode" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select count(*) from sgt_document_process_crossref docpro&#xD;&#xA;left outer join sgt_document doc on docpro.document_id = doc.document_id&#xD;&#xA;where docpro.process_id = @process_id&#xD;&#xA;and doc.document_code = @document_code &#xD;&#xA;and document_process_crossref_id &lt;&gt; @document_process_crossref_id&#xD;&#xA;">
      <parameters>
        <parameter ID="@process_id" sfwDataType="int" />
        <parameter ID="@document_code" sfwDataType="string" />
        <parameter ID="@document_process_crossref_id" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetCountOfDocumentCodeWithAlwaysInitiateByDocumentId" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select count(*) from sgt_document_process_crossref &#xD;&#xA;where document_id =@document_id&#xD;&#xA;and document_type_action_value = 'ALIN'">
      <parameters>
        <parameter ID="@document_id" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="CheckDocumentCodeIsValid" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select count(*) from sgt_document where document_code=@document_code">
      <parameters>
        <parameter ID="@document_code" sfwDataType="string" />
      </parameters>
    </query>
    <query ID="LoadAlwaysInitiateProcessesForDocument" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT * FROM SGT_DOCUMENT_PROCESS_CROSSREF WHERE DOCUMENT_ID = @documentID AND DOCUMENT_TYPE_ACTION_VALUE = 'ALIN'">
      <parameters>
        <parameter ID="@documentID" />
      </parameters>
    </query>
    <query ID="LoadAllDocumentProcessRefByProcess" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT * FROM SGT_DOCUMENT_PROCESS_CROSSREF WHERE PROCESS_ID = @processID">
      <parameters>
        <parameter ID="@processID" />
      </parameters>
    </query>
    <query ID="LoadResumeOrInitiateProcessesForDocument" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT * FROM SGT_DOCUMENT_PROCESS_CROSSREF WHERE DOCUMENT_ID = @documentID AND DOCUMENT_TYPE_ACTION_VALUE = 'REIN'">
      <parameters>
        <parameter ID="@documentID" sfwDataType="int" />
      </parameters>
    </query>
  </queries>
  <attributes>
    <attribute ID="DocumentProcessCrossrefId" sfwType="Column" sfwValue="document_process_crossref_id" sfwKeyNo="1" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="True" sfwDataType="int" sfwRequired="False" />
    <attribute ID="DocumentId" sfwType="Column" sfwValue="document_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="ProcessId" sfwType="Column" sfwValue="process_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="DocumentTypeActionDescription" sfwType="Description" sfwValue="document_type_action_description" />
    <attribute ID="DocumentTypeActionId" sfwType="Column" sfwValue="document_type_action_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwCodeID="24" sfwDataType="int" sfwRequired="False" />
    <attribute ID="DocumentTypeActionValue" sfwType="Column" sfwValue="document_type_action_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="CreatedBy" sfwType="Column" sfwValue="created_by" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="50" />
    <attribute ID="CreatedDate" sfwType="Column" sfwValue="created_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="ModifiedBy" sfwType="Column" sfwValue="modified_by" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="50" />
    <attribute ID="ModifiedDate" sfwType="Column" sfwValue="modified_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="UpdateSeq" sfwType="Column" sfwValue="update_seq" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="objDocument" sfwType="Object" sfwEntity="entDocument" sfwValue="ibusDocument" />
    <attribute ID="objProcess" sfwType="Object" sfwEntity="entProcess" sfwValue="ibusProcess" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrDocumentCode" sfwValue="istrDocumentCode" />
  </attributes>
</entity>