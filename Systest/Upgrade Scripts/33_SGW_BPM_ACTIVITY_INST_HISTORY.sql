CREATE TABLE [dbo].[SGW_BPM_ACTIVITY_INST_HISTORY] (
    [ACTIVITY_INSTANCE_HISTORY_ID] INT            IDENTITY (1, 1) NOT NULL,
    [ACTIVITY_INSTANCE_ID]         INT            NOT NULL,
    [STATUS_ID]                    INT            NOT NULL,
    [STATUS_VALUE]                 VARCHAR (4)    NULL,
    [ACTION_USER_ID]               VARCHAR (50)   NULL,
    [START_TIME]                   DATETIME       NULL,
    [END_TIME]                     DATETIME       NULL,
    [COMMENTS]                     VARCHAR (2000) NULL,
    [CREATED_BY]                   VARCHAR (50)   NOT NULL,
    [CREATED_DATE]                 DATETIME       NOT NULL,
    [MODIFIED_BY]                  VARCHAR (50)   NOT NULL,
    [MODIFIED_DATE]                DATETIME       NOT NULL,
    [UPDATE_SEQ]                   INT            NULL,
	[REASSIGNED_FROM]			   VARCHAR(50)	  NULL,
	[REASSIGNED_TO]				   VARCHAR(50)	  NULL,
	[CALCULATED_DAYS]  AS (datediff(second,[START_TIME],[END_TIME])/(86400)),
	[CALCULATED_HOURS]  AS ((datediff(second,[START_TIME],[END_TIME])%(86400))/(3600)),
	[CALCULATED_MINS]  AS ((datediff(second,[START_TIME],[END_TIME])%(3600))/(60)),
	[CALCULATED_SECONDS]  AS (datediff(second,[START_TIME],[END_TIME])%(60)),
    CONSTRAINT [PK_SGW_BPM_ACTIVITY_INST_HISTORY_ACTIVITY_INSTANCE_HISTORY_ID] PRIMARY KEY CLUSTERED ([ACTIVITY_INSTANCE_HISTORY_ID] ASC),
    CONSTRAINT [FK_SGW_BPM_ACTIVITY_INST_HISTORY_ACTIVITY_INSTANCE_ID_SGW_BPM_ACTIVITY_INSTANCE_ACTIVITY_INSTANCE_ID] FOREIGN KEY ([ACTIVITY_INSTANCE_ID]) REFERENCES [dbo].[SGW_BPM_ACTIVITY_INSTANCE] ([ACTIVITY_INSTANCE_ID])
); 