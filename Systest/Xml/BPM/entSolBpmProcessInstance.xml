<entity ID="entSolBpmProcessInstance" sfwMainCDO="icdoBpmProcessInstance" sfwType="BusinessRule" sfwActive="True" sfwStatus="Review" sfwObjectID="busSolBpmProcessInstance" sfwParentEntity="entNeobaseBpmProcessInstance">
  <commonproperties />
  <checklist />
  <initialload />
  <delete>
    <property ID="lstBpmProcessEscalationInstance" sfwMethodName="LoadBpmProcessEscalationInstances" />
    <property ID="lstBpmProcessInstanceHistory" sfwMethodName="LoadBpmProcessInstanceHistory" />
    <property ID="lstBpmActivityInstance" sfwMethodName="LoadBpmActivityInstances" />
  </delete>
  <validatedelete />
  <softerror />
  <groupslist />
  <harderror />
  <rules />
  <constraint />
  <attributes>
    <attribute ID="objCorTemplates" sfwType="Object" sfwEntity="entCorTemplates" sfwPrivate="False" sfwValue="ibusCorTemplates" />
    <attribute ID="lstFilteredBpmActivityInstance" sfwType="Collection" sfwPrivate="False" sfwValue="iclbFilteredBpmActivityInstance" sfwEntity="entBpmActivityInstance" />
    <attribute ID="IstrAction" sfwDataType="string" sfwPrivate="False" sfwValue="istrAction" sfwType="Property" />
    <attribute ID="IstrProcessName" sfwDataType="string" sfwPrivate="False" sfwValue="istrProcess_Name" sfwType="Property" />
    <attribute ID="IstrActivity" sfwDataType="string" sfwPrivate="False" sfwValue="istrActivity" sfwType="Property" />
    <attribute ID="IstrEventAssociatedProcessName" sfwDataType="string" sfwPrivate="False" sfwValue="istrEvent_Associated_Process_Name" sfwType="Property" />
    <attribute ID="IstrEventAssociatedActivity" sfwDataType="string" sfwPrivate="False" sfwValue="istrEvent_Associated_Activity" sfwType="Property" />
    <attribute ID="IstrEventAssociatedAction" sfwDataType="string" sfwPrivate="False" sfwValue="istrEvent_Associated_Action" sfwType="Property" />
    <attribute ID="lstrProcessInstanceStatus" sfwDataType="string" sfwPrivate="False" sfwValue="istrProcessInstanceStatus" sfwType="Property" />
    <attribute ID="IintUserSerialID" sfwDataType="int" sfwPrivate="False" sfwValue="iintUserSerialid" sfwType="Property" />
    <attribute ID="IstrOrgCode" sfwDataType="string" sfwValue="istrOrgCode" sfwType="Property" />
  </attributes>
  <objectmethods>
    <method ID="CompleteActivityInstance" sfwReturnType="ArrayList">
      <parameters>
        <parameter ID="aintActivityInstanceId" sfwDataType="int" />
      </parameters>
    </method>
    <method ID="LoadBpmProcessEscalationInstances" sfwReturnType="Void" />
    <method ID="LoadBpmProcessInstanceHistory" sfwReturnType="Void" />
    <method ID="LoadBpmActivityInstances" sfwReturnType="Void" />
    <method ID="LoadBpmCaseInstance" sfwReturnType="Void" />
    <method ID="FindBPMProcessInstance" sfwReturnType="Void">
      <parameters>
        <parameter ID="aintProcessInstanceId" sfwDataType="int" />
      </parameters>
    </method>
    <method ID="LoadDisplayActivities" sfwReturnType="Void" />
    <method ID="LoadDisplayActivitiyInstances" sfwReturnType="Void" />
    <method ID="LoadOrganization" sfwReturnType="Void" />
    <method ID="LoadPerson" sfwReturnType="Void" />
  </objectmethods>
  <queries>
    <query ID="CorTemplateLookup" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT&#xA;&#x9; * &#xA;FROM&#xA;&#x9; SGS_COR_TRACKING CT WITH(NOLOCK)           JOIN      SGW_BPM_ACTIVITY_INSTANCE AI WITH(NOLOCK)      &#xA;          ON AI.ACTIVITY_INSTANCE_ID  =  CT.ACTIVITY_INSTANCE_ID" sfwPostgre="select * from sgs_cor_tracking CT JOIN SGW_BPM_ACTIVITY_INSTANCE AI&#xD;&#xA;ON AI.ACTIVITY_INSTANCE_ID = CT.ACTIVITY_INSTANCE_ID">
      <parameters />
    </query>
    <query ID="GetGeneratedCommunication" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT&#xA;    SCTE.TEMPLATE_NAME,&#xA;    SCV.DESCRIPTION,&#xA;    SCTR.*&#xA;FROM&#xA;    SGS_COR_TRACKING SCTR WITH (NOLOCK) LEFT JOIN SGS_COR_TEMPLATES SCTE WITH (NOLOCK)&#xA;     ON SCTR.TEMPLATE_ID = SCTE.TEMPLATE_ID LEFT JOIN SGT_PERSON SP WITH (NOLOCK)&#xA;     ON SCTR.PERSON_ID = SP.PERSON_ID LEFT JOIN SGT_ORGANIZATION SO WITH (NOLOCK)&#xA;     ON SCTR.ORG_ID = SO.ORG_ID Join sgs_code_value SCV with (NOLOCK) on SCV.code_id=SCTR.COR_STATUS_ID AND SCV.CODE_VALUE=SCTR.COR_STATUS_VALUE&#xA;WHERE&#xA;    ACTIVITY_INSTANCE_ID IN (SELECT&#xA;    ACTIVITY_INSTANCE_ID&#xA;FROM&#xA;    SGW_BPM_ACTIVITY_INSTANCE&#xA;WHERE&#xA;    PROCESS_INSTANCE_ID = @PROCESS_INSTANCE_ID)" sfwOracle="SELECT&#xA;    SCTE.TEMPLATE_NAME,&#xA;    SCV.DESCRIPTION,&#xA;    SCTR.*&#xA;FROM&#xA;    SGS_COR_TRACKING SCTR  LEFT JOIN SGS_COR_TEMPLATES SCTE &#xA;     ON SCTR.TEMPLATE_ID = SCTE.TEMPLATE_ID LEFT JOIN SGT_PERSON SP &#xA;     ON SCTR.PERSON_ID = SP.PERSON_ID LEFT JOIN SGT_ORGANIZATION SO &#xA;     ON SCTR.ORG_ID = SO.ORG_ID Join sgs_code_value SCV  on SCV.code_id=SCTR.COR_STATUS_ID AND SCV.CODE_VALUE=SCTR.COR_STATUS_VALUE&#xA;WHERE&#xA;    ACTIVITY_INSTANCE_ID IN (SELECT&#xA;    ACTIVITY_INSTANCE_ID&#xA;FROM&#xA;    SGW_BPM_ACTIVITY_INSTANCE&#xA;WHERE&#xA;    PROCESS_INSTANCE_ID = @PROCESS_INSTANCE_ID)" sfwPostgre="SELECT&#xD;&#xA;    SCTE.TEMPLATE_NAME,&#xD;&#xA;    SCV.DESCRIPTION,&#xD;&#xA;    SCTR.*&#xD;&#xA;FROM&#xD;&#xA;    SGS_COR_TRACKING SCTR  LEFT JOIN SGS_COR_TEMPLATES SCTE &#xD;&#xA;     ON SCTR.TEMPLATE_ID = SCTE.TEMPLATE_ID LEFT JOIN SGT_PERSON SP &#xD;&#xA;     ON SCTR.PERSON_ID = SP.PERSON_ID LEFT JOIN SGT_ORGANIZATION SO &#xD;&#xA;     ON SCTR.ORG_ID = SO.ORG_ID Join sgs_code_value SCV  on SCV.code_id=SCTR.COR_STATUS_ID AND SCV.CODE_VALUE=SCTR.COR_STATUS_VALUE&#xD;&#xA;WHERE&#xD;&#xA;    ACTIVITY_INSTANCE_ID IN (SELECT&#xD;&#xA;    ACTIVITY_INSTANCE_ID&#xD;&#xA;FROM&#xD;&#xA;    SGW_BPM_ACTIVITY_INSTANCE&#xD;&#xA;WHERE&#xD;&#xA;    PROCESS_INSTANCE_ID = @PROCESS_INSTANCE_ID)">
      <parameters>
        <parameter ID="@PROCESS_INSTANCE_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadProcessInstancesForDocument" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT PI.PROCESS_INSTANCE_ID, P.NAME AS PROCESS_NAME, A.NAME AS ACTIVITY_NAME, CV.DESCRIPTION AS ACTION_DESCRIPTION, PCV.DESCRIPTION PROCESS_INSTANCE_STATUS&#xD;&#xA;             FROM SGW_BPM_PRCS_INST_ATTACHMENTS PIA&#xD;&#xA;             JOIN SGW_BPM_PROCESS_INSTANCE PI ON PIA.BPM_PROCESS_INSTANCE_ID = PI.PROCESS_INSTANCE_ID&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGS_CODE_VALUE PCV ON PI.STATUS_VALUE = PCV.CODE_VALUE AND PI.STATUS_ID = PCV.CODE_ID&#xD;&#xA;             JOIN SGW_BPM_PROCESS P ON P.PROCESS_ID = PI.PROCESS_ID&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGW_BPM_PROCESS_EVENT_XR XR ON P.PROCESS_ID = XR.PROCESS_ID&#xD;&#xA;             JOIN SGW_BPM_EVENT E ON E.BPM_EVENT_ID = XR.EVENT_ID&#xD;&#xA;             JOIN SGS_CODE_VALUE CV ON XR.ACTION_VALUE = CV.CODE_VALUE AND CV.CODE_ID = 2005&#xD;&#xA;             LEFT JOIN SGW_BPM_ACTIVITY A ON XR.ACTIVITY_ID = A.ACTIVITY_ID&#xD;&#xA;             JOIN SGW_BPM_REQUEST R ON R.ECM_GUID = PIA.ECM_GUID&#xD;&#xA;             WHERE R.REQUEST_ID = @REQUEST_ID" sfwPostgre="SELECT PI.PROCESS_INSTANCE_ID, P.NAME AS PROCESS_NAME, A.NAME AS ACTIVITY_NAME, CV.DESCRIPTION AS ACTION_DESCRIPTION, PCV.DESCRIPTION PROCESS_INSTANCE_STATUS&#xD;&#xA;             FROM SGW_BPM_PRCS_INST_ATTACHMENTS PIA&#xD;&#xA;             JOIN SGW_BPM_PROCESS_INSTANCE PI ON PIA.BPM_PROCESS_INSTANCE_ID = PI.PROCESS_INSTANCE_ID&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGS_CODE_VALUE PCV ON PI.STATUS_VALUE = PCV.CODE_VALUE AND PI.STATUS_ID = PCV.CODE_ID&#xD;&#xA;             JOIN SGW_BPM_PROCESS P ON P.PROCESS_ID = PI.PROCESS_ID&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGW_BPM_PROCESS_EVENT_XR XR ON P.PROCESS_ID = XR.PROCESS_ID&#xD;&#xA;             JOIN SGW_BPM_EVENT E ON E.BPM_EVENT_ID = XR.EVENT_ID&#xD;&#xA;             JOIN SGS_CODE_VALUE CV ON XR.ACTION_VALUE = CV.CODE_VALUE AND CV.CODE_ID = 2005&#xD;&#xA;             LEFT JOIN SGW_BPM_ACTIVITY A ON XR.ACTIVITY_ID = A.ACTIVITY_ID&#xD;&#xA;             JOIN SGW_BPM_REQUEST R ON R.ECM_GUID = PIA.ECM_GUID&#xD;&#xA;             WHERE R.REQUEST_ID = @REQUEST_ID">
      <parameters>
        <parameter ID="@REQUEST_ID" sfwDataType="int" />
      </parameters>
      <mappedcolumns>
        <column ID="process_instance_id" sfwEntityField="ProcessInstanceId" />
        <column ID="process_name" sfwEntityField="IstrProcessName" />
        <column ID="activity_name" sfwEntityField="IstrActivity" />
        <column ID="action_description" sfwEntityField="IstrAction" />
        <column ID="process_instance_status" sfwEntityField="lstrProcessInstanceStatus" />
      </mappedcolumns>
    </query>
    <query ID="LoadProcessActionForEvent" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT&#xA;&#x9; SBP.PROCESS_ID,&#xA;&#x9;BA.NAME Activity,&#xA;&#x9;SBP.NAME,&#xA;&#x9;CV.DESCRIPTION ACTION_DESCRIPTION &#xA;FROM&#xA;&#x9; SGW_BPM_EVENT SBE WITH(NOLOCK) &#xA;&#x9;INNER &#xA;&#x9; JOIN SGW_BPM_PROCESS_EVENT_XR SBPE WITH(NOLOCK)&#xA;&#x9; ON SBE.BPM_EVENT_ID = SBPE.EVENT_ID &#xA;&#x9; LEFT OUTER JOIN  SGW_BPM_ACTIVITY BA WITH(NOLOCK)&#xA;&#x9; ON BA.ACTIVITY_ID = SBPE.ACTIVITY_ID  &#xA;&#x9;INNER &#xA;&#x9; JOIN SGW_BPM_PROCESS SBP WITH(NOLOCK)&#xA;&#x9; ON SBP.PROCESS_ID = SBPE.PROCESS_ID &#xA;&#x9; INNER &#xA;&#x9; JOIN SGW_BPM_CASE SBC WITH(NOLOCK)&#xA;&#x9; ON SBP.CASE_ID = SBC.CASE_ID AND SBC.STATUS_VALUE = 'ACTV'&#xA;&#x9;INNER &#xA;&#x9; JOIN SGS_CODE_VALUE CV WITH(NOLOCK)&#xA;&#x9; ON CV.CODE_ID = 2005 AND&#xA;&#x9; CV.CODE_VALUE = SBPE.ACTION_VALUE &#xA;WHERE&#xA;&#x9; SBE.BPM_EVENT_ID = @BPM_EVENT_ID" sfwPostgre="select SBP.PROCESS_ID, BA.NAME Activity, SBP.NAME, CV.DESCRIPTION ACTION_DESCRIPTION&#xD;&#xA;from SGW_BPM_EVENT SBE &#xD;&#xA;Inner join SGW_BPM_PROCESS_EVENT_XR SBPE&#xD;&#xA;ON SBE.BPM_EVENT_ID = SBPE.EVENT_ID&#xD;&#xA;LEFT OUTER JOIN SGW_BPM_ACTIVITY BA&#xD;&#xA;ON BA.ACTIVITY_ID = SBPE.ACTIVITY_ID  &#xD;&#xA;Inner Join SGW_BPM_PROCESS SBP&#xD;&#xA;ON SBP.PROCESS_ID = SBPE.PROCESS_ID&#xD;&#xA;INNER JOIN SGS_CODE_VALUE CV&#xD;&#xA;ON CV.CODE_ID = 2005 AND&#xD;&#xA;Cv.CODE_VALUE = SBPE.ACTION_VALUE &#xD;&#xA;WHERE&#xD;&#xA;SBE.BPM_EVENT_ID = @BPM_EVENT_ID">
      <parameters>
        <parameter ID="@BPM_EVENT_ID" sfwDataType="int" />
      </parameters>
      <mappedcolumns>
        <column ID="process_id" sfwEntityField="objBpmProcess.ProcessId" />
        <column ID="activity" sfwEntityField="IstrEventAssociatedActivity" />
        <column ID="name" sfwEntityField="IstrEventAssociatedProcessName" />
        <column ID="action_description" sfwEntityField="IstrEventAssociatedAction" />
      </mappedcolumns>
    </query>
    <query ID="LoadProcessInstanceByRequestId" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT PROCESS_INSTANCE_ID, PROCESS_NAME, ACTIVITY_NAME, PROCESS_STATUS FROM &#xD;&#xA;(&#xD;&#xA;SELECT BPI.PROCESS_INSTANCE_ID PROCESS_INSTANCE_ID, BP.NAME PROCESS_NAME, BA.NAME ACTIVITY_NAME, CV.DESCRIPTION AS PROCESS_STATUS,&#xD;&#xA;ROW_NUMBER() OVER (PARTITION BY BPI.PROCESS_INSTANCE_ID ORDER BY BAI.START_DATE DESC) RN&#xD;&#xA;FROM SGW_BPM_CASE_INSTANCE BCI&#xD;&#xA;&#x9;&#x9; JOIN SGW_BPM_PROCESS_INSTANCE BPI ON BCI.CASE_INSTANCE_ID = BPI.CASE_INSTANCE_ID&#xD;&#xA;&#x9;&#x9; JOIN SGS_CODE_VALUE CV ON BPI.STATUS_VALUE = CV.CODE_VALUE AND CV.CODE_ID = BPI.STATUS_ID&#xD;&#xA;&#x9;&#x9; JOIN SGW_BPM_PROCESS BP ON BPI.PROCESS_ID = BP.PROCESS_ID &#xD;&#xA;&#x9;&#x9; JOIN SGW_BPM_ACTIVITY_INSTANCE BAI ON BPI.PROCESS_INSTANCE_ID = BAI.PROCESS_INSTANCE_ID&#xD;&#xA;&#x9;&#x9; JOIN SGW_BPM_ACTIVITY BA ON BAI.ACTIVITY_ID = BA.ACTIVITY_ID&#xD;&#xA;&#x9;&#x9; WHERE BCI.REQUEST_ID = @REQUEST_ID) A WHERE RN = 1" sfwPostgre="SELECT PROCESS_INSTANCE_ID, PROCESS_NAME, ACTIVITY_NAME, PROCESS_STATUS FROM &#xD;&#xA;(&#xD;&#xA;SELECT BPI.PROCESS_INSTANCE_ID PROCESS_INSTANCE_ID, BP.NAME PROCESS_NAME, BA.NAME ACTIVITY_NAME, CV.DESCRIPTION AS PROCESS_STATUS,&#xD;&#xA;ROW_NUMBER() OVER (PARTITION BY BPI.PROCESS_INSTANCE_ID ORDER BY BAI.START_DATE DESC) RN&#xD;&#xA;FROM SGW_BPM_CASE_INSTANCE BCI&#xD;&#xA;&#x9;&#x9; JOIN SGW_BPM_PROCESS_INSTANCE BPI ON BCI.CASE_INSTANCE_ID = BPI.CASE_INSTANCE_ID&#xD;&#xA;&#x9;&#x9; JOIN SGS_CODE_VALUE CV ON BPI.STATUS_VALUE = CV.CODE_VALUE AND CV.CODE_ID = BPI.STATUS_ID&#xD;&#xA;&#x9;&#x9; JOIN SGW_BPM_PROCESS BP ON BPI.PROCESS_ID = BP.PROCESS_ID &#xD;&#xA;&#x9;&#x9; JOIN SGW_BPM_ACTIVITY_INSTANCE BAI ON BPI.PROCESS_INSTANCE_ID = BAI.PROCESS_INSTANCE_ID&#xD;&#xA;&#x9;&#x9; JOIN SGW_BPM_ACTIVITY BA ON BAI.ACTIVITY_ID = BA.ACTIVITY_ID&#xD;&#xA;&#x9;&#x9; WHERE BCI.REQUEST_ID = @REQUEST_ID) A WHERE RN = 1">
      <parameters>
        <parameter ID="@REQUEST_ID" sfwDataType="int" />
      </parameters>
      <mappedcolumns>
        <column ID="process_instance_id" sfwEntityField="ProcessInstanceId" />
        <column ID="process_name" sfwEntityField="IstrProcessName" />
        <column ID="activity_name" sfwEntityField="IstrActivity" />
        <column ID="process_status" sfwEntityField="lstrProcessInstanceStatus" />
      </mappedcolumns>
    </query>
    <query ID="LoadBPMProcessInstanceByRequestAndDoc" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select @num=Count(PROCESS_INSTANCE_ID),@ActivityId=Count(ACTIVITY_INSTANCE_ID)  from sgw_bpm_request_action where REQUEST_ID=@REQUEST_ID&#xD;&#xA;    if(@num &lt;= 0 AND @ActivityId &lt;= 0)&#xD;&#xA;    begin&#xD;&#xA;    IF (@source_value ='INDX')&#xD;&#xA;    BEGIN&#xD;&#xA;&#x9;SELECT PI.PROCESS_INSTANCE_ID, P.NAME AS PROCESS_NAME, A.NAME AS ACTIVITY_NAME, CV.DESCRIPTION AS ACTION_DESCRIPTION, PCV.DESCRIPTION PROCESS_INSTANCE_STATUS&#xD;&#xA;             FROM SGW_BPM_REQUEST_ACTION PRA&#xD;&#xA;             JOIN SGW_BPM_PROCESS_INSTANCE PI ON PRA.CASE_INSTANCE_ID = PI.CASE_INSTANCE_ID&#xD;&#xA;             JOIN SGW_BPM_PRCS_INST_ATTACHMENTS PIA ON PIA.BPM_PROCESS_INSTANCE_ID=PI.PROCESS_INSTANCE_ID&#xD;&#xA;             JOIN SGW_BPM_PROCESS P ON P.PROCESS_ID = PI.PROCESS_ID&#xD;&#xA;             JOIN SGS_CODE_VALUE PCV ON PI.STATUS_VALUE = PCV.CODE_VALUE AND PI.STATUS_ID = PCV.CODE_ID&#xD;&#xA;             JOIN SGW_BPM_PROCESS_EVENT_XR XR ON P.PROCESS_ID = XR.PROCESS_ID&#xD;&#xA;             JOIN SGW_BPM_EVENT E ON E.BPM_EVENT_ID = XR.EVENT_ID&#xD;&#xA;             JOIN SGS_CODE_VALUE CV ON XR.ACTION_VALUE = CV.CODE_VALUE AND CV.CODE_ID = 2005&#xD;&#xA;             LEFT JOIN SGW_BPM_ACTIVITY A ON XR.ACTIVITY_ID = A.ACTIVITY_ID&#xD;&#xA;             JOIN SGW_BPM_REQUEST R ON R.ECM_GUID = PIA.ECM_GUID&#xD;&#xA;             WHERE  R.REQUEST_ID = @REQUEST_ID&#xD;&#xA;    END&#xD;&#xA;    ELSE&#xD;&#xA;    BEGIN&#xD;&#xA;    SELECT PROCESS_INSTANCE_ID, PROCESS_NAME, ACTIVITY_NAME, PROCESS_INSTANCE_STATUS FROM&#xD;&#xA;&#x9;(&#xD;&#xA;&#x9;SELECT BPI.PROCESS_INSTANCE_ID PROCESS_INSTANCE_ID, BP.NAME PROCESS_NAME, BA.NAME ACTIVITY_NAME, CV.DESCRIPTION AS PROCESS_INSTANCE_STATUS,&#xD;&#xA;&#x9;ROW_NUMBER() OVER (PARTITION BY BPI.PROCESS_INSTANCE_ID ORDER BY BAI.START_DATE DESC) RN&#xD;&#xA;&#x9;FROM SGW_BPM_REQUEST_ACTION PRA&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGW_BPM_PROCESS_INSTANCE BPI ON PRA.CASE_INSTANCE_ID = BPI.CASE_INSTANCE_ID&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGS_CODE_VALUE CV ON BPI.STATUS_VALUE = CV.CODE_VALUE AND CV.CODE_ID = BPI.STATUS_ID&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGW_BPM_PROCESS BP ON BPI.PROCESS_ID = BP.PROCESS_ID&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGW_BPM_ACTIVITY_INSTANCE BAI ON BPI.PROCESS_INSTANCE_ID = BAI.PROCESS_INSTANCE_ID&#xD;&#xA;&#x9;&#x9;&#x9; JOIN SGW_BPM_ACTIVITY BA ON BAI.ACTIVITY_ID = BA.ACTIVITY_ID&#xD;&#xA;&#x9;&#x9;&#x9; WHERE PRA.REQUEST_ID = @REQUEST_ID) A WHERE RN = 1&#xD;&#xA;    END&#xD;&#xA;    end&#xD;&#xA;    else&#xD;&#xA;    begin&#xD;&#xA;       SELECT PI.PROCESS_INSTANCE_ID,P.NAME AS PROCESS_NAME, A.NAME AS ACTIVITY_NAME, CV.DESCRIPTION AS ACTION_DESCRIPTION, PCV.DESCRIPTION PROCESS_INSTANCE_STATUS&#xD;&#xA;             FROM SGW_BPM_REQUEST_ACTION PRA&#xD;&#xA;             JOIN SGW_BPM_PROCESS_INSTANCE PI ON PRA.PROCESS_INSTANCE_ID = PI.PROCESS_INSTANCE_ID&#xD;&#xA;             JOIN SGW_BPM_PROCESS P ON P.PROCESS_ID = PI.PROCESS_ID&#xD;&#xA;             LEFT JOIN SGS_CODE_VALUE PCV ON PI.STATUS_VALUE = PCV.CODE_VALUE AND PI.STATUS_ID = PCV.CODE_ID&#xD;&#xA;             LEFT JOIN SGW_BPM_PROCESS_EVENT_XR XR ON P.PROCESS_ID = XR.PROCESS_ID&#xD;&#xA;             LEFT JOIN SGS_CODE_VALUE CV ON XR.ACTION_VALUE = CV.CODE_VALUE AND CV.CODE_ID = 2005&#xD;&#xA;             LEFT JOIN SGW_BPM_ACTIVITY A ON XR.ACTIVITY_ID = A.ACTIVITY_ID&#xD;&#xA;             WHERE  PRA.REQUEST_ID = @REQUEST_ID&#xD;&#xA;    end" sfwOracle="SELECT * FROM Table(BPM_REQUEST_EVENT.UDF_GET_REQUEST_DETAIL(@num,@ActivityId,@source_value,@REQUEST_ID))" sfwPostgre="call SGP_REQUESTEVENT(@num,&#xA;    @ActivityId,&#xA;    @source_value,&#xA;    @REQUEST_ID); SELECT&#xA;     *&#xA;FROM&#xA;     TEMP_REQUEST_EVENT_DETAIL">
      <parameters>
        <parameter ID="@source_value" sfwDataType="string" />
        <parameter ID="@REQUEST_ID" sfwDataType="int" />
        <parameter ID="@num" sfwDataType="int" />
        <parameter ID="@ActivityId" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="ProcessInstanceChecklist" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select * from SGW_BPM_ACTY_INST_CHECKLIST where ACTIVITY_INSTANCE_ID =(&#xD;&#xA;select max(chk.activity_instance_id) from SGW_BPM_ACTY_INST_CHECKLIST chk with(nolock) &#xD;&#xA;inner join  SGW_BPM_ACTIVITY_INSTANCE sai with(nolock) on chk.ACTIVITY_INSTANCE_ID = sai.ACTIVITY_INSTANCE_ID and sai.PROCESS_INSTANCE_ID = @PROCESS_INSTANCE_ID)">
      <parameters>
        <parameter ID="@PROCESS_INSTANCE_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="CheckInProgressInstanceForDocumentRequestByRequestIdAndPersonId" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="IF(@ACTIVITYID &gt; 0)&#xD;&#xA;BEGIN&#xD;&#xA;SELECT DISTINCT SPI.PROCESS_INSTANCE_ID,SPI.CASE_INSTANCE_ID,SCI.REQUEST_ID FROM SGW_BPM_REQUEST R WITH(NOLOCK)&#xD;&#xA;INNER JOIN SGW_BPM_EVENT E WITH(NOLOCK) ON R.DOC_TYPE = E.DOC_TYPE&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS_EVENT_XR PXR WITH(NOLOCK) ON E.BPM_EVENT_ID = PXR.EVENT_ID AND PXR.PROCESS_ID = @PROCESSID AND PXR.EVENT_ID = @EVENTID&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS_INSTANCE SPI WITH(NOLOCK) ON PXR.PROCESS_ID = SPI.PROCESS_ID AND SPI.STATUS_VALUE='INPC'&#xD;&#xA;INNER JOIN SGW_BPM_CASE_INSTANCE SCI WITH(NOLOCK) ON SCI.CASE_INSTANCE_ID=SPI.CASE_INSTANCE_ID&#xD;&#xA;WHERE R.REQUEST_ID = @REQUEST_ID AND SCI.PERSON_ID = @PERSON_ID &#xD;&#xA;AND NOT EXISTS ( &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;SELECT &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;1 &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;FROM &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;SGW_BPM_ACTIVITY_INSTANCE SAI WITH(NOLOCK) &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;WHERE&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;SAI.PROCESS_INSTANCE_ID = SPI.PROCESS_INSTANCE_ID AND&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;SAI.ACTIVITY_ID &gt;= @ACTIVITYID &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;)&#xD;&#xA;ORDER BY 1 DESC&#xD;&#xA;END&#xD;&#xA;ELSE&#xD;&#xA;BEGIN&#xD;&#xA;SELECT DISTINCT SPI.PROCESS_INSTANCE_ID,SPI.CASE_INSTANCE_ID,SCI.REQUEST_ID FROM SGW_BPM_REQUEST R WITH(NOLOCK)&#xD;&#xA;INNER JOIN SGW_BPM_EVENT E WITH(NOLOCK) ON R.DOC_TYPE = E.DOC_TYPE&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS_EVENT_XR PXR WITH(NOLOCK) ON E.BPM_EVENT_ID = PXR.EVENT_ID AND PXR.PROCESS_ID = @PROCESSID AND PXR.EVENT_ID = @EVENTID&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS_INSTANCE SPI WITH(NOLOCK) ON PXR.PROCESS_ID = SPI.PROCESS_ID AND SPI.STATUS_VALUE='INPC'&#xD;&#xA;INNER JOIN SGW_BPM_CASE_INSTANCE SCI WITH(NOLOCK) ON SCI.CASE_INSTANCE_ID=SPI.CASE_INSTANCE_ID&#xD;&#xA;WHERE R.REQUEST_ID = @REQUEST_ID AND SCI.PERSON_ID = @PERSON_ID &#xD;&#xA;ORDER BY 1 DESC&#xD;&#xA;END">
      <parameters>
        <parameter ID="@REQUEST_ID" sfwDataType="int" />
        <parameter ID="@PERSON_ID" sfwDataType="int" />
        <parameter ID="@ACTIVITYID" sfwDataType="int" />
        <parameter ID="@PROCESSID" sfwDataType="int" />
        <parameter ID="@EVENTID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="CheckInProgressInstanceForDocumentRequestByRequestIdAndOrgId" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="IF(@ACTIVITYID &gt; 0)&#xD;&#xA;BEGIN&#xD;&#xA;SELECT DISTINCT SPI.PROCESS_INSTANCE_ID,SPI.CASE_INSTANCE_ID,SCI.REQUEST_ID FROM SGW_BPM_REQUEST R WITH(NOLOCK)&#xD;&#xA;INNER JOIN SGW_BPM_EVENT E WITH(NOLOCK) ON R.DOC_TYPE = E.DOC_TYPE&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS_EVENT_XR PXR WITH(NOLOCK) ON E.BPM_EVENT_ID = PXR.EVENT_ID AND PXR.PROCESS_ID = @PROCESSID AND PXR.EVENT_ID = @EVENTID&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS_INSTANCE SPI WITH(NOLOCK) ON PXR.PROCESS_ID = SPI.PROCESS_ID AND SPI.STATUS_VALUE='INPC'&#xD;&#xA;INNER JOIN SGW_BPM_CASE_INSTANCE SCI WITH(NOLOCK) ON SCI.CASE_INSTANCE_ID=SPI.CASE_INSTANCE_ID&#xD;&#xA;WHERE R.REQUEST_ID = @REQUEST_ID AND SCI.ORG_ID = @ORG_ID&#xD;&#xA;AND NOT EXISTS ( &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;SELECT &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;1 &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;FROM &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;SGW_BPM_ACTIVITY_INSTANCE SAI WITH(NOLOCK) &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;WHERE&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;SAI.PROCESS_INSTANCE_ID = SPI.PROCESS_INSTANCE_ID AND&#xD;&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;SAI.ACTIVITY_ID &gt;= @ACTIVITYID &#xD;&#xA;&#x9;&#x9;&#x9;&#x9;)&#xD;&#xA;ORDER BY 1 DESC&#xD;&#xA;END&#xD;&#xA;ELSE&#xD;&#xA;BEGIN&#xD;&#xA;SELECT DISTINCT SPI.PROCESS_INSTANCE_ID,SPI.CASE_INSTANCE_ID,SCI.REQUEST_ID FROM SGW_BPM_REQUEST R WITH(NOLOCK)&#xD;&#xA;INNER JOIN SGW_BPM_EVENT E WITH(NOLOCK) ON R.DOC_TYPE = E.DOC_TYPE&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS_EVENT_XR PXR WITH(NOLOCK) ON E.BPM_EVENT_ID = PXR.EVENT_ID AND PXR.PROCESS_ID = @PROCESSID AND PXR.EVENT_ID = @EVENTID&#xD;&#xA;INNER JOIN SGW_BPM_PROCESS_INSTANCE SPI WITH(NOLOCK) ON PXR.PROCESS_ID = SPI.PROCESS_ID AND SPI.STATUS_VALUE='INPC'&#xD;&#xA;INNER JOIN SGW_BPM_CASE_INSTANCE SCI WITH(NOLOCK) ON SCI.CASE_INSTANCE_ID=SPI.CASE_INSTANCE_ID&#xD;&#xA;WHERE R.REQUEST_ID = @REQUEST_ID AND SCI.ORG_ID = @ORG_ID &#xD;&#xA;ORDER BY 1 DESC&#xD;&#xA;END">
      <parameters>
        <parameter ID="@REQUEST_ID" sfwDataType="int" />
        <parameter ID="@ORG_ID" sfwDataType="int" />
        <parameter ID="@ACTIVITYID" sfwDataType="int" />
        <parameter ID="@PROCESSID" sfwDataType="int" />
        <parameter ID="@EVENTID" sfwDataType="int" />
      </parameters>
    </query>
  </queries>
  <methods>
    <method ID="FindBpmProcessInstance" sfwMethodType="Load" sfwMode="All" sfwLoadMainObject="True" sfwParameter="aintPrimaryKey">
      <parameter ID="aintPrimaryKey" sfwDataType="int" />
      <item ID="LoadBpmCaseInstance" sfwDataType="Void" sfwItemType="Method" />
      <item ID="FindBPMProcessInstance" sfwDataType="Void" sfwItemType="Method" sfwParameter="aintProcessInstanceId" />
      <item ID="LoadDisplayActivities" sfwDataType="Void" sfwItemType="Method" />
      <item ID="LoadBpmActivityInstances" sfwDataType="Void" sfwItemType="Method" />
      <item ID="LoadDisplayActivitiyInstances" sfwDataType="Void" sfwItemType="Method" />
      <item ID="LoadBpmProcessInstanceHistory" sfwDataType="Void" sfwItemType="Method" />
      <item ID="LoadOrganization" sfwDataType="Void" sfwItemType="Method" />
      <item ID="LoadPerson" sfwDataType="Void" sfwItemType="Method" />
      <parameter ID="aintProcessInstanceId" sfwDataType="int" />
    </method>
  </methods>
  <lifecycle />
  <ExtraFields />
</entity>