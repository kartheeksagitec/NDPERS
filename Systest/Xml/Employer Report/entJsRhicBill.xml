<?xml version="1.0" encoding="utf-8"?>
<entity ID="entJsRhicBill" sfwMainCDO="icdoJsRhicBill" sfwType="BusinessRule" sfwActive="True" sfwStatus="Review" sfwObjectID="busJsRhicBill" sfwTableName="sgt_js_rhic_bill">
  <queries>
    <query ID="LoadAvailableRemittance" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select ORG_ID iintOrgID, A.REMITTANCE_ID iintRemittanceID , Sum(isnull(A.Remittance_amount,0)) idecRemittaceAmount, &#xD;&#xA;&#xD;&#xA;Sum(Isnull(b.allocated_amount,0)) idecAllocatedAmount, (Sum(isnull(A.Remittance_amount,0))-(Sum(Isnull(b.allocated_amount,0)))) as idecAvailableAmount&#xD;&#xA;&#xD;&#xA;from SGT_REMITTANCE A&#xD;&#xA;&#xD;&#xA;      Left Join &#xD;&#xA;&#xD;&#xA;      SGT_JS_RHIC_REMITTANCE_ALLOCATION B on A.REMITTANCE_ID = B.REMITTANCE_ID&#xD;&#xA;&#xD;&#xA;WHERE A.ORG_ID = @ORG_ID and A.REMITTANCE_TYPE_VALUE='JSRD'&#xD;&#xA;&#xD;&#xA;group by A.ORG_ID, A.REMITTANCE_ID &#xD;&#xA;&#xD;&#xA;having Sum(isnull(A.Remittance_amount,0)) &lt;&gt; Sum(Isnull(b.allocated_amount,0)) &#xD;&#xA;">
      <parameters>
        <parameter ID="@ORG_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadAllocationHistory" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select ORG_ID iintOrgID, A.REMITTANCE_ID iintRemittanceID , Sum(isnull(A.Remittance_amount,0)) idecRemittaceAmount, &#xD;&#xA;&#xD;&#xA;Sum(Isnull(b.allocated_amount,0)) idecAllocatedAmount, (Sum(isnull(A.Remittance_amount,0))-(Sum(Isnull(b.allocated_amount,0)))) as idecAvailableAmount&#xD;&#xA;&#xD;&#xA;from SGT_REMITTANCE A&#xD;&#xA;&#xD;&#xA;      Left Join &#xD;&#xA;&#xD;&#xA;      SGT_JS_RHIC_REMITTANCE_ALLOCATION B on A.REMITTANCE_ID = B.REMITTANCE_ID&#xD;&#xA;&#xD;&#xA;WHERE A.ORG_ID = @ORG_ID and A.REMITTANCE_TYPE_VALUE='JSRD' and B.RHIC_ALLOCATION_STATUS_VALUE='ALTD'&#xD;&#xA;&#xD;&#xA;group by A.ORG_ID, A.REMITTANCE_ID &#xD;&#xA;&#xD;&#xA;having Sum(Isnull(b.allocated_amount,0))&lt;= Sum(isnull(A.Remittance_amount,0))">
      <parameters>
        <parameter ID="@ORG_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetJSRHOrgID" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="Select Org_id as iintJSRHOrgID from SGT_ORGANIZATION Inner Join &#xD;&#xA;&#xD;&#xA;      sgs_code_value  on Org_code = data1 &#xD;&#xA;&#xD;&#xA;      where code_value = 'JSRH' AND CODE_ID = 52&#xD;&#xA;&#xD;&#xA;">
      <parameters />
    </query>
    <query ID="FindJsRhicRemittance" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="Select * from SGT_JS_RHIC_REMITTANCE_ALLOCATION where REMITTANCE_ID=@REMITTANCE_ID and &#xD;&#xA;IBS_HEADER_ID=@IBS_HEADER_ID and JS_RHIC_BILL_ID=@JS_RHIC_BILL_ID">
      <parameters>
        <parameter ID="@IBS_HEADER_ID" sfwDataType="int" />
        <parameter ID="@JS_RHIC_BILL_ID" sfwDataType="int" />
        <parameter ID="@REMITTANCE_ID" sfwDataType="int" />
      </parameters>
    </query>
  </queries>
  <attributes>
    <attribute ID="JsRhicBillId" sfwType="Column" sfwValue="js_rhic_bill_id" sfwKeyNo="1" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="True" sfwDataType="int" sfwRequired="False" />
    <attribute ID="OrgId" sfwType="Column" sfwValue="org_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="BillDate" sfwType="Column" sfwValue="bill_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="BillAmount" sfwType="Column" sfwValue="bill_amount" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="decimal" sfwLength="13,2" sfwRequired="False" />
    <attribute ID="AllocatedAmount" sfwType="Column" sfwValue="allocated_amount" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="decimal" sfwLength="13,2" sfwRequired="False" />
    <attribute ID="CreatedBy" sfwType="Column" sfwValue="created_by" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="string" sfwLength="50" sfwRequired="False" />
    <attribute ID="CreatedDate" sfwType="Column" sfwValue="created_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="ModifiedBy" sfwType="Column" sfwValue="modified_by" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="string" sfwLength="50" sfwRequired="False" />
    <attribute ID="ModifiedDate" sfwType="Column" sfwValue="modified_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="UpdateSeq" sfwType="Column" sfwValue="update_seq" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrOrgCode" sfwValue="istrOrgCode" />
    <attribute sfwType="Collection" sfwEntity="entJsRhicBill" ID="lstJsRhicBillAvlRemittance" sfwValue="iclbJsRhicBillAvlRemittance" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintRemittanceID" sfwValue="iintRemittanceID" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecRemittaceAmount" sfwValue="idecRemittaceAmount" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecAvailableAmount" sfwValue="idecAvailableAmount" />
    <attribute sfwType="Collection" sfwEntity="entJsRhicBill" ID="lstJsRhicBillAllocationHistory" sfwValue="iclbJsRhicBillAllocationHistory" />
    <attribute ID="objDeposit" sfwType="Object" sfwEntity="entDeposit" sfwValue="ibusDeposit" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecAllocatedAmount" sfwValue="idecAllocatedAmount" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintIBSHeaderID" sfwValue="iintIBSHeaderID" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecRemainingBillAmount" sfwValue="idecRemainingBillAmount" />
    <attribute ID="objJsRhicRemittanceAllocation" sfwType="Object" sfwEntity="entJsRhicRemittanceAllocation" sfwValue="ibusJsRhicRemittanceAllocation" />
  </attributes>
  <objectmethods>
    <method ID="btnAllocate_Click" sfwReturnType="ArrayList" />
  </objectmethods>
</entity>