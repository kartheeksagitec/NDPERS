<?xml version="1.0" encoding="utf-8"?>
<entity ID="entPaymentRecovery" sfwActive="True" sfwStatus="Valid" sfwType="BusinessRule" sfwMainCDO="icdoPaymentRecovery" sfwObjectID="busPaymentRecovery" sfwTableName="sgt_payment_recovery" sfwView="False">
  <rules>
    <rule ID="IsGrossAmountGreaterThanDueAmount" sfwMessageId="6719" sfwExpression="(this.IsGrossReductionAmountValid() == False)" sfwObjectBased="True" />
    <rule ID="IsGrossReductionAmountNotValid" sfwMessageId="6706" sfwExpression="(this.icdoPaymentRecovery.repayment_type_value == &quot;RPOT&quot;) &amp;&amp; &#xA;(this.icdoPaymentRecovery.gross_reduction_amount &lt; 50)" sfwObjectBased="True" />
    <rule ID="IsPayeeAccountChanged" sfwMessageId="6701" sfwExpression="(this.IsPayeeAccountChanged() == True)" sfwObjectBased="True" />
    <rule ID="IsPayeeAccountIDBlan" sfwMessageId="6722" sfwExpression="(this.icdoPaymentRecovery.payee_account_id == 0)" sfwObjectBased="True" />
    <rule ID="IsPayeeAccountNotValid" sfwMessageId="6702" sfwExpression="(this.IsPayeeNotValid() == True)" sfwObjectBased="True" />
    <rule ID="IsPayeeAccountSelected" sfwMessageId="6705" sfwExpression="((this.icdoPaymentRecovery.repayment_type_value == &quot;LTRD&quot;) || &#xA;(this.icdoPaymentRecovery.repayment_type_value == &quot;LTRW&quot;)) &amp;&amp; &#xA;(this.icdoPaymentRecovery.payee_account_id == 0)" sfwObjectBased="True" />
    <rule ID="IsPaymentOptionChanged" sfwMessageId="6703" sfwExpression="(this.IsPaymentOptionChanged() == True)" sfwObjectBased="True" />
    <rule ID="IsPaymentOptionNotSelected" sfwMessageId="6704" sfwExpression="((this.icdoPaymentRecovery.repayment_type_value == &quot;LTRD&quot;) || &#xA;(this.icdoPaymentRecovery.repayment_type_value == &quot;LTRW&quot;)) &amp;&amp; &#xA;(this.icdoPaymentRecovery.payment_option_value != &quot;NPCK&quot;)" sfwObjectBased="True" />
    <rule ID="IsPaymentOptionNull" sfwMessageId="6721" sfwExpression="(string.IsNullOrEmpty(this.icdoPaymentRecovery.payment_option_value))" sfwObjectBased="True" />
    <rule ID="IsRepaymentTypeNull" sfwMessageId="6720" sfwExpression="(string.IsNullOrEmpty(this.icdoPaymentRecovery.repayment_type_value))" sfwObjectBased="True" />
    <rule ID="VisibleRueForInProcessButton" sfwExpression="(this.icdoPaymentRecovery.status_value == &quot;APRD&quot;)" sfwObjectBased="True" />
    <rule ID="VisibleRuleForAllocateButton" sfwExpression="(this.IsAvailableRemittanceNotNull() == True) &amp;&amp; &#xA;((this.icdoPaymentRecovery.status_value == &quot;APRD&quot;) || &#xA;(this.icdoPaymentRecovery.status_value == &quot;INPR&quot;))" sfwObjectBased="True" />
    <rule ID="VisibleRuleForApproveButton" sfwExpression="(this.icdoPaymentRecovery.status_value == &quot;PEAP&quot;) &amp;&amp; &#xA;!(this.icdoPaymentRecovery.modified_by == RFunc.GetValue&lt;String&gt;(this, &quot;iobjPassInfo.istrUserID&quot;))" sfwObjectBased="True" />
    <rule ID="VisibleRuleForAvailableRemittance" sfwExpression="(this.icdoPaymentRecovery.payment_option_value == &quot;PRCK&quot;)" sfwObjectBased="True" />
    <rule ID="VisibleRuleForCancelButton" sfwExpression="(this.icdoPaymentRecovery.status_value == &quot;PEAP&quot;) || &#xA;(this.icdoPaymentRecovery.status_value == &quot;APRD&quot;) || &#xA;!(this.icdoPaymentRecovery.modified_by == RFunc.GetValue&lt;String&gt;(this, &quot;iobjPassInfo.istrUserID&quot;))" sfwObjectBased="True" />
    <rule ID="VisibleRuleForEditableGRA" sfwExpression="!(this.icdoPaymentRecovery.repayment_type_value == &quot;LTRD&quot;) &amp;&amp; &#xA;!(this.icdoPaymentRecovery.repayment_type_value == &quot;LTRW&quot;)" sfwObjectBased="True" />
    <rule ID="VisibleRuleForNonEditableGRA" sfwExpression="((this.icdoPaymentRecovery.repayment_type_value == &quot;LTRD&quot;) || &#xA;(this.icdoPaymentRecovery.repayment_type_value == &quot;LTRW&quot;))" sfwObjectBased="True" />
    <rule ID="VisibleRuleForSatisfiedButton" sfwExpression="(this.icdoPaymentRecovery.status_value == &quot;INPR&quot;)" sfwObjectBased="True" />
    <rule ID="VisibleRuleForSaveButton" sfwExpression="(this.icdoPaymentRecovery.status_value == &quot;PEAP&quot;) || &#xA;(this.icdoPaymentRecovery.status_value == &quot;APRD&quot;) || &#xA;(this.icdoPaymentRecovery.status_value == &quot;INPR&quot;) || &#xA;(string.IsNullOrEmpty(this.icdoPaymentRecovery.status_value))" sfwObjectBased="True" />
    <rule ID="VisibleRuleForWriteOffButton" sfwExpression="(this.icdoPaymentRecovery.status_value == &quot;APRD&quot;) || &#xA;(this.icdoPaymentRecovery.status_value == &quot;INPR&quot;)" sfwObjectBased="True" />
  </rules>
  <delete />
  <checklist />
  <initialload>
    <item ID="VisibleRuleForApproveButton" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRuleForSatisfiedButton" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRuleForWriteOffButton" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRueForInProcessButton" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRuleForCancelButton" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRuleForSaveButton" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRuleForAvailableRemittance" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRuleForAllocateButton" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRuleForNonEditableGRA" sfwMode="All" sfwStatus="Active" />
    <item ID="VisibleRuleForEditableGRA" sfwMode="All" sfwStatus="Active" />
  </initialload>
  <softerror />
  <harderror>
    <item ID="IsPayeeAccountChanged" sfwMode="All" sfwStatus="Active" />
    <item ID="IsPayeeAccountNotValid" sfwMode="All" sfwStatus="Active" />
    <item ID="IsPaymentOptionChanged" sfwMode="All" sfwStatus="Active" />
    <item ID="IsPaymentOptionNotSelected" sfwMode="All" sfwStatus="Active" />
    <item ID="IsPayeeAccountSelected" sfwMode="All" sfwStatus="Active" />
    <item ID="IsGrossReductionAmountNotValid" sfwMode="All" sfwStatus="Active" />
    <item ID="IsGrossAmountGreaterThanDueAmount" sfwMode="All" sfwStatus="Active" />
    <item ID="IsRepaymentTypeNull" sfwMode="All" sfwStatus="Active" />
    <item ID="IsPaymentOptionNull" sfwMode="All" sfwStatus="Active" />
    <item ID="IsPayeeAccountIDBlan" sfwMode="All" sfwStatus="Active" />
  </harderror>
  <validatedelete />
  <groupslist />
  <updateablecdo />
  <commonproperties />
  <queries>
    <query ID="UpdateRecoveryToSatisfied" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="update r&#xD;&#xA;    set r.status_value='SATD',&#xD;&#xA;&#x9;r.modified_date=getdate(),&#xD;&#xA;     r.modified_by='PERSLink Batch'+' '+ convert(nvarchar,@batchscheduleid)&#xD;&#xA;from SGT_PAYMENT_RECOVERY  R &#xD;&#xA; Inner Join &#xD;&#xA; (&#xD;&#xA; Select PAYMENT_RECOVERY_ID, sum(Principle_amount_paid) as amount_paid &#xD;&#xA; from sgt_payment_recovery_history &#xD;&#xA; group by PAYMENT_RECOVERY_ID&#xD;&#xA; )PH On R.PAYMENT_RECOVERY_ID = PH.PAYMENT_RECOVERY_ID &#xD;&#xA; inner join sgt_payment_history_header phh&#xD;&#xA;   on r.payee_Account_id=phh.payee_account_id&#xD;&#xA;Where r.STATUS_VALUE ='INPR' and  Recovery_amount = ph.amount_paid and&#xD;&#xA;   phh.payment_schedule_id=@paymentscheduleid">
      <parameters>
        <parameter ID="@paymentscheduleid" sfwDataType="int" />
        <parameter ID="@batchscheduleid" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetGrossReductionAmount" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT ISNULL(SUM(GROSS_REDUCTION_AMOUNT),0) FROM SGT_PAYMENT_RECOVERY WITH(NOLOCK)&#xD;&#xA;WHERE PAYEE_ACCOUNT_ID=@PAYEE_ACCOUNT_ID&#xD;&#xA;AND REPAYMENT_TYPE_VALUE IN ('LTRD','LTRW')&#xD;&#xA;AND STATUS_VALUE in ('SATD','APRD')">
      <parameters>
        <parameter ID="@PAYEE_ACCOUNT_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="BenefitOverPaymentBillingLetter" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select * from sgt_payment_recovery &#xD;&#xA;where status_value in ('INPR','APRD') and payment_option_value='PRCK'&#xD;&#xA;   and repayment_type_value='RPOT'&#xD;&#xA;&#xD;&#xA;">
      <parameters />
    </query>
    <query ID="LoadRecovery" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT  REC.*&#xD;&#xA;FROM  SGT_PAYMENT_RECOVERY REC WITH(NOLOCK)&#xD;&#xA;INNER JOIN SGT_PAYMENT_BENEFIT_OVERPAYMENT_HEADER HED WITH(NOLOCK)&#xD;&#xA;  ON REC.BENEFIT_OVERPAYMENT_ID = HED.BENEFIT_OVERPAYMENT_ID&#xD;&#xA;WHERE  REC.PAYEE_ACCOUNT_ID = @PAYEEACCOUNTID&#xD;&#xA;  --AND HED.PAYEE_ACCOUNT_ID &lt;&gt; REC.PAYEE_ACCOUNT_ID">
      <parameters>
        <parameter ID="@PAYEEACCOUNTID" sfwDataType="int" />
      </parameters>
    </query>
  </queries>
  <attributes>
    <attribute ID="PaymentRecoveryId" sfwType="Column" sfwValue="payment_recovery_id" sfwKeyNo="1" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="True" sfwDataType="int" sfwRequired="False" />
    <attribute ID="PayeeAccountId" sfwType="Column" sfwValue="payee_account_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="BenefitOverpaymentId" sfwType="Column" sfwValue="benefit_overpayment_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="RepaymentTypeDescription" sfwType="Description" sfwValue="repayment_type_description" />
    <attribute ID="RepaymentTypeId" sfwType="Column" sfwValue="repayment_type_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="2904" sfwDataType="int" sfwRequired="False" />
    <attribute ID="RepaymentTypeValue" sfwType="Column" sfwValue="repayment_type_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="PaymentOptionDescription" sfwType="Description" sfwValue="payment_option_description" />
    <attribute ID="PaymentOptionId" sfwType="Column" sfwValue="payment_option_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="2905" sfwDataType="int" sfwRequired="False" />
    <attribute ID="PaymentOptionValue" sfwType="Column" sfwValue="payment_option_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="StatusDescription" sfwType="Description" sfwValue="status_description" />
    <attribute ID="StatusId" sfwType="Column" sfwValue="status_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="2902" sfwDataType="int" sfwRequired="False" />
    <attribute ID="StatusValue" sfwType="Column" sfwValue="status_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="LifeTimeReductionRefId" sfwType="Column" sfwValue="life_time_reduction_ref_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="RecoveryAmount" sfwType="Column" sfwValue="recovery_amount" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="decimal" sfwRequired="False" sfwLength="13,2" />
    <attribute ID="GrossReductionAmount" sfwType="Column" sfwValue="gross_reduction_amount" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="decimal" sfwRequired="False" sfwLength="13,2" />
    <attribute ID="EffectiveDate" sfwType="Column" sfwValue="effective_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="WriteOffDate" sfwType="Column" sfwValue="write_off_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="CalculationId" sfwType="Column" sfwValue="calculation_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="ApprovedDate" sfwType="Column" sfwValue="approved_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="PayeeAccountPaymentItemTypeId" sfwType="Column" sfwValue="payee_account_payment_item_type_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="CreatedBy" sfwType="Column" sfwValue="created_by" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="50" />
    <attribute ID="CreatedDate" sfwType="Column" sfwValue="created_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="ModifiedBy" sfwType="Column" sfwValue="modified_by" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="50" />
    <attribute ID="ModifiedDate" sfwType="Column" sfwValue="modified_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="UpdateSeq" sfwType="Column" sfwValue="update_seq" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecLTDAmountPaid" sfwValue="idecLTDAmountPaid" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecLTDPrincipleAmountPaid" sfwValue="idecLTDPrincipleAmountPaid" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecLTDAmortizationInterestPaid" sfwValue="idecLTDAmortizationInterestPaid" />
    <attribute sfwDataType="datetime" sfwType="Property" ID="IdtEstimatedEndDate" sfwValue="idtEstimatedEndDate" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrSuppressWarning" sfwValue="icdoPaymentRecovery.istrSuppressWarning" />
    <attribute sfwType="Collection" sfwEntity="entRemittance" ID="lstAvailableRemittance" sfwValue="iclbAvailableRemittance" />
    <attribute sfwType="Collection" sfwEntity="entPaymentRecoveryHistory" ID="lstPaymentRecoveryHistory" sfwValue="iclbPaymentRecoveryHistory" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrBillingDate" sfwValue="istrBillingDate" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecDueAmount" sfwValue="idecDueAmount" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrDueDate" sfwValue="istrDueDate" />
    <attribute sfwDataType="string" sfwType="Property" ID="IsPastDueValid" sfwValue="IsPastDueValid" />
    <attribute ID="objPayeeAccount" sfwType="Object" sfwEntity="entPayeeAccount" sfwPrivate="False" sfwValue="ibusPayeeAccount" />
  </attributes>
  <objectmethods>
    <method ID="btn_Cancel_Click" sfwReturnType="ArrayList" />
    <method ID="btn_Approve_Click" sfwReturnType="ArrayList" />
    <method ID="btn_WriteOff_Click" sfwReturnType="ArrayList" />
    <method ID="btn_AllocateAmount_Click" sfwReturnType="ArrayList" />
  </objectmethods>
 </entity>