<?xml version="1.0" encoding="utf-8"?>
<entity ID="entPersonEmploymentDetail" sfwActive="True" sfwStatus="Valid" sfwType="BusinessRule" sfwMainCDO="icdoPersonEmploymentDetail" sfwObjectID="busPersonEmploymentDetail" sfwTableName="sgt_person_employment_detail" sfwView="False" sfwParentEntity="entExtendBase">
  <rules>
    <rule ID="IsActiveDependentExists" sfwMessageId="6653" sfwExpression="(this.IsActiveDependent() == True)" sfwObjectBased="True" />
    <rule ID="IsCombinationofJobclassJobTypeAndOrgNotExists" sfwMessageId="186" sfwExpression="!(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.job_class_value)) &amp;&amp; &#xA;!(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.type_value)) &amp;&amp; &#xA;(RFunc.ExecuteQuery&lt;Int32&gt;(&quot;entPersonEmploymentDetail.IsJobTypeAndJoClassCombinationExists&quot;, this.ibusPersonEmployment.icdoPersonEmployment.org_id, this.icdoPersonEmploymentDetail.type_value, this.icdoPersonEmploymentDetail.job_class_value) == 0)" sfwObjectBased="True" />
    <rule ID="IsDBPlanOffered" sfwExpression="(this.iblnIsPlanDB == True)" sfwObjectBased="True" />
    <rule ID="IsDCPlanOffered" sfwExpression="(this.iblnIsPlanDC == True)" sfwObjectBased="True" />
    <rule ID="IsHBPlanOffered" sfwExpression="(this.iblnIsPlanHB == True)" sfwObjectBased="True" />
    <rule ID="IsDeferredCompPlanOffered" sfwExpression="(this.iblnIsPlanDeferredComp == True)" sfwObjectBased="True" />
    <rule ID="IsDentalPlanOffered" sfwExpression="(this.iblnIsPlanGroupDental == True)" sfwObjectBased="True" />
    <rule ID="IsDisabilityRTWinReceiving" sfwMessageId="7690" sfwExpression="(this.IsRTWDisabilityPayeeAccountinReceivingStatus() == True)" sfwObjectBased="True" />
    <rule ID="IsEAPPlanOffered" sfwExpression="(this.iblnIsPlanEAP == True)" sfwObjectBased="True" />
    <rule ID="IsEmploymentLinkedToAnyAccount" sfwMessageId="1084" sfwExpression="(this.IsEmploymentDetailLinkedToAnyAccounts() == True)" sfwObjectBased="True" />
    <rule ID="IsEndDateLessThanStartDate" sfwMessageId="5017" sfwExpression="!(this.icdoPersonEmploymentDetail.start_date == DateTime.MinValue) &amp;&amp; &#xA;!(this.icdoPersonEmploymentDetail.end_date == DateTime.MinValue) &amp;&amp; &#xA;(this.icdoPersonEmploymentDetail.end_date &lt; this.icdoPersonEmploymentDetail.start_date)" sfwObjectBased="True" />
    <rule ID="IsFlexCompOffered" sfwExpression="(this.iblnIsPlanFlexComp == True)" sfwObjectBased="True" />
    <rule ID="IsHealthPlanOffered" sfwExpression="(this.iblnIsPlanGrouypHealth == True)" sfwObjectBased="True" />
    <rule ID="IsHMOPlanOffered" sfwExpression="(this.iblnIsPlanHMO == True)" sfwObjectBased="True" />
    <rule ID="IsJobClassAppointedOfficialAndOfficialListIsNotSelected" sfwMessageId="1061" sfwExpression="((this.icdoPersonEmploymentDetail.job_class_value == &quot;NSAP&quot;) || &#xA;(this.icdoPersonEmploymentDetail.job_class_value == &quot;STAP&quot;)) &amp;&amp; &#xA;(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.official_list_value))" sfwObjectBased="True" />
    <rule ID="IsJobClassNull" sfwMessageId="4541" sfwExpression="(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.job_class_value))" sfwObjectBased="True" />
    <rule ID="IsJobTypeNull" sfwMessageId="1034" sfwExpression="(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.type_value))" sfwObjectBased="True" />
    <rule ID="IsLifePlanOffered" sfwExpression="(this.iblnIsPlanGroupLife == True)" sfwObjectBased="True" />
    <rule ID="IsLTCPlanOffered" sfwExpression="(this.iblnIsPlanLTC == True)" sfwObjectBased="True" />
    <rule ID="IsMedicarePlanOffered" sfwExpression="(this.iblnIsPlanMedicare == True)" sfwObjectBased="True" />
    <rule ID="IsMemberLifeErollmentValid" sfwMessageId="7694" sfwExpression="(this.icdoPersonEmploymentDetail.istrSuppressWarnings != &quot;Y&quot;) &amp;&amp; &#xA;(this.IsMemberWaivingLifePlan() == True)" sfwObjectBased="True" />
    <rule ID="IsOther457PlanOffered" sfwExpression="(this.iblnIsPlanOther457 == True)" sfwObjectBased="True" />
    <rule ID="IsPayrollFrequencyDifferWhenTransferEmployment" sfwMessageId="1085" sfwExpression="(this.icdoPersonEmploymentDetail.istrSuppressWarnings != &quot;Y&quot;) &amp;&amp; &#xA;(this.IsPayrollFrequencyDifferWhenTransferEmployment() == True)" sfwObjectBased="True" />
    <rule ID="IsPersonEnrolledInDC" sfwMessageId="2025" sfwExpression="(this.IsPersonEligibleToEnrollInDC() == False) &amp;&amp; &#xA;!(RFunc.GetValue&lt;String&gt;(this, &quot;ibusPersonEmployment.ibusPerson.icdoPerson.db_addl_contrib&quot;) == &quot;Y&quot;)" sfwObjectBased="True" />
    <rule ID="IsPersonEnrollingForBothPermenantAndTemporary" sfwMessageId="6591" sfwExpression="(this.IsPersonEnrolledForBothPermAndTemp() == True)" sfwObjectBased="True" />
    <rule ID="IsRecordExistForSameORgJobClassJobTypeStartAndEndDates" sfwMessageId="1048" sfwExpression="!(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.job_class_value)) &amp;&amp; &#xA;!(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.type_value)) &amp;&amp; &#xA;(this.CheckEmploymentDetailOverlapping() == True)" sfwObjectBased="True" />
    <rule ID="IsSpouseEmployedToStateEmployer" sfwMessageId="6617" sfwExpression="(this.IsPersonValidToEnrollGroupHealth() == False)" sfwObjectBased="True" />
    <rule ID="IsStartDateLessthanEmploymentStartDate" sfwMessageId="4572" sfwExpression="!(this.icdoPersonEmploymentDetail.start_date == DateTime.MinValue) &amp;&amp; &#xA;(this.icdoPersonEmploymentDetail.start_date &lt; RFunc.GetValue&lt;DateTime&gt;(this, &quot;ibusPersonEmployment.icdoPersonEmployment.start_date&quot;))" sfwObjectBased="True" />
    <rule ID="IsStartDateNull" sfwMessageId="1030" sfwExpression="(this.icdoPersonEmploymentDetail.start_date == DateTime.MinValue)" sfwObjectBased="True" />
    <rule ID="IsStatusNull" sfwMessageId="7662" sfwExpression="(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.status_value))" sfwObjectBased="True" />
    <rule ID="IsStatusWaivedSelected" sfwMessageId="6534" sfwExpression="(this.IsStatusWaived() == True)" sfwObjectBased="True" />
    <rule ID="IsTFFRPlanOffered" sfwExpression="(this.iblnIsPlanTFFR == True)" sfwObjectBased="True" />
    <rule ID="IsTIAAPlanOffered" sfwExpression="(this.iblnIsPlanTIAA == True)" sfwObjectBased="True" />
    <rule ID="IsVisionPlanOffered" sfwExpression="(this.iblnIsPlanGroupVision == True)" sfwObjectBased="True" />
    <rule ID="JobClassIsElectedOfficialAndTermBeginDateisNull" sfwMessageId="1060" sfwExpression="((this.icdoPersonEmploymentDetail.job_class_value == &quot;SEO&quot;) || &#xA;(this.icdoPersonEmploymentDetail.job_class_value == &quot;NSEO&quot;)) &amp;&amp; &#xA;(this.icdoPersonEmploymentDetail.term_begin_date == DateTime.MinValue)" sfwObjectBased="True" />
    <rule ID="JobClassIsNotAppointedOfficialAndOfficialisSelected" sfwMessageId="1069" sfwExpression="!(string.IsNullOrEmpty(this.icdoPersonEmploymentDetail.official_list_value)) &amp;&amp; &#xA;!((this.icdoPersonEmploymentDetail.job_class_value == &quot;NSAP&quot;) || &#xA;(this.icdoPersonEmploymentDetail.job_class_value == &quot;STAP&quot;))" sfwObjectBased="True" />
    <rule ID="StatusIsLOAAndRecertifiedDateisNull" sfwMessageId="1056" sfwExpression="(this.icdoPersonEmploymentDetail.recertified_date == DateTime.MinValue) &amp;&amp; &#xA;(this.IsRecertificationDateRequired() == True)" sfwObjectBased="True" />
    <rule ID="IsDbAddtlContribFlagYesForEmployee" sfwMessageId="10270" sfwExpression="(RFunc.GetValue&lt;String&gt;(this, &quot;ibusPersonEmployment.ibusPerson.icdoPerson.db_addl_contrib&quot;) == &quot;Y&quot;) &amp;&amp; &#xA;(this.icdoPersonEmploymentDetail.istrSuppressWarnings != &quot;Y&quot;)" sfwObjectBased="True" />
    <rule ID="IsMemberTypeHasNoValuesInAddlFeildsRetirementRate" sfwMessageId="10271" sfwExpression="(this.IsEmployerMemberTypeHasNoValuesInRateAddlFields() == True)" sfwObjectBased="True" />
  </rules>
  <delete>
    <property ID="lstAllPersonAccountEmpDtl" sfwMethodName="LoadAllPersonAccountEmploymentDetails" />
    <property ID="lstEnrollmentRequest" sfwMethodName="LoadEnrollmentRequest" />
  </delete>
  <checklist />
  <initialload>
    <item ID="IsDBPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsDCPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsHBPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsDeferredCompPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsDentalPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsHealthPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsVisionPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsMedicarePlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsOther457PlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsLifePlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsHMOPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsEAPPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsLTCPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsFlexCompOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsTFFRPlanOffered" sfwMode="All" sfwStatus="Active" />
    <item ID="IsTIAAPlanOffered" sfwMode="All" sfwStatus="Active" />
  </initialload>
  <softerror />
  <harderror>
    <item ID="IsStartDateNull" sfwMode="All" sfwStatus="Active" />
    <item ID="IsJobTypeNull" sfwMode="All" sfwStatus="Active" />
    <item ID="IsCombinationofJobclassJobTypeAndOrgNotExists" sfwMode="All" sfwStatus="Active" />
    <item ID="IsStartDateLessthanEmploymentStartDate" sfwMode="All" sfwStatus="Active" />
    <item ID="IsRecordExistForSameORgJobClassJobTypeStartAndEndDates" sfwMode="All" sfwStatus="Active" />
    <item ID="IsJobClassNull" sfwMode="All" sfwStatus="Active" />
    <item ID="StatusIsLOAAndRecertifiedDateisNull" sfwMode="Update" sfwStatus="Active" />
    <item ID="IsJobClassAppointedOfficialAndOfficialListIsNotSelected" sfwMode="All" sfwStatus="Active" />
    <item ID="JobClassIsNotAppointedOfficialAndOfficialisSelected" sfwMode="All" sfwStatus="Active" />
    <item ID="JobClassIsElectedOfficialAndTermBeginDateisNull" sfwMode="All" sfwStatus="Active" />
    <item ID="IsPersonEnrollingForBothPermenantAndTemporary" sfwMode="All" sfwStatus="Active" />
    <item ID="IsEndDateLessThanStartDate" sfwMode="All" sfwStatus="Active" />
    <item ID="IsStatusWaivedSelected" sfwMode="All" sfwStatus="Active" />
    <item ID="IsSpouseEmployedToStateEmployer" sfwMode="All" sfwStatus="Active" />
    <item ID="IsActiveDependentExists" sfwMode="All" sfwStatus="Inactive" />
    <item ID="IsPersonEnrolledInDC" sfwMode="All" sfwStatus="Active" />
    <item ID="IsMemberLifeErollmentValid" sfwMode="Update" sfwStatus="Active" />
    <item ID="IsPayrollFrequencyDifferWhenTransferEmployment" sfwMode="All" sfwStatus="Active" />
    <item ID="IsDisabilityRTWinReceiving" sfwMode="All" sfwStatus="Active" />
    <item ID="IsStatusNull" sfwMode="All" sfwStatus="Active" />
    <item ID="IsDbAddtlContribFlagYesForEmployee" sfwStatus="Active" sfwMode="All" />
    <item ID="IsMemberTypeHasNoValuesInAddlFeildsRetirementRate" sfwStatus="Active" sfwMode="All" />
  </harderror>
  <validatedelete>
    <item ID="IsEmploymentLinkedToAnyAccount" sfwMode="All" sfwStatus="Active" />
  </validatedelete>
  <groupslist />
  <updateablecdo />
  <commonproperties>
    <item ID="person_id" sfwObjectField="ibusPersonEmployment.icdoPersonEmployment.person_id" />
  </commonproperties>
  <expressionfields />
  <queries>
    <query ID="IsJobTypeAndJoClassCombinationExists" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select count(*) from sgt_plan_job_class_crossref spjcc&#xD;&#xA;left outer join sgt_org_plan sop on sop.plan_id = spjcc.plan_id&#xD;&#xA;left outer join sgt_organization so on so.org_id = sop.org_id&#xD;&#xA;where so.org_id = @org_id and spjcc.job_type_value = @job_type_value&#xD;&#xA;and spjcc.job_class_value = @job_class_value">
      <parameters>
        <parameter ID="@org_id" sfwDataType="int" />
        <parameter ID="@job_type_value" sfwDataType="string" />
        <parameter ID="@job_class_value" sfwDataType="string" />
      </parameters>
    </query>
    <query ID="IsRecordOvelapping" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="Select b.* from Sgt_Person_Employment A left join Sgt_Person_Employment_Detail b&#xD;&#xA;on a.person_employment_id=b.person_employment_id&#xD;&#xA;where  a.org_id=@OrgID and b.job_class_value=@job_class_value and type_value=@type_value&#xD;&#xA;and b.person_employment_dtl_id &lt;&gt; @person_employment_dtl_id and a.person_id=@personid &#xD;&#xA;">
      <parameters>
        <parameter ID="@OrgID" sfwDataType="int" />
        <parameter ID="@job_class_value" sfwDataType="string" />
        <parameter ID="@type_value" sfwDataType="string" />
        <parameter ID="@person_employment_dtl_id" sfwDataType="int" />
        <parameter ID="@personid" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetEnrolledPersonAccounts" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select * from dbo.SGT_PERSON_ACCOUNT A inner join &#xD;&#xA;dbo.SGT_PERSON_ACCOUNT_EMPLOYMENT_DETAIL B on A.PERSON_ACCOUNT_ID=B.PERSON_ACCOUNT_ID&#xD;&#xA;inner join dbo.SGT_PERSON_EMPLOYMENT_DETAIL C on B.PERSON_EMPLOYMENT_DTL_ID=C.PERSON_EMPLOYMENT_DTL_ID&#xD;&#xA;inner join dbo.SGT_PERSON_EMPLOYMENT D on C.PERSON_EMPLOYMENT_ID=D.PERSON_EMPLOYMENT_ID&#xD;&#xA;where A.person_id = @personid and A.plan_id = @planid ">
      <parameters>
        <parameter ID="@personid" sfwDataType="int" />
        <parameter ID="@planid" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadPersonAccount" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="Select A.* from sgt_person_account A inner join dbo.SGT_PERSON_ACCOUNT_EMPLOYMENT_DETAIL B&#xD;&#xA;on a.PERSON_ACCOUNT_ID=b.PERSON_ACCOUNT_ID &#xD;&#xA;where b.person_employment_dtl_id=@personemploymentdtlid">
      <parameters>
        <parameter ID="@personemploymentdtlid" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="IsApplicableFlagCheckForPlanAndPerson" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="Select A.* from SGT_PERSON_ACCOUNT_EMPLOYMENT_DETAIL A&#xD;&#xA;inner join SGT_PERSON_EMPLOYMENT_DETAIL B on &#xD;&#xA;A.PERSON_EMPLOYMENT_DTL_ID=B.PERSON_EMPLOYMENT_DTL_ID&#xD;&#xA;inner join SGT_PERSON_EMPLOYMENT C on&#xD;&#xA;B.PERSON_EMPLOYMENT_ID=C.PERSON_EMPLOYMENT_ID&#xD;&#xA;Where A.PLAN_ID=@planid and C.PERSON_ID=@personid&#xD;&#xA;and A.ELECTION_VALUE='ENLD'">
      <parameters>
        <parameter ID="@planid" sfwDataType="int" />
        <parameter ID="@personid" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetLOAEmploymentDetailID" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT TOP 1 * FROM SGT_PERSON_EMPLOYMENT_DETAIL &#xD;&#xA;WHERE &#xD;&#xA;PERSON_EMPLOYMENT_ID=@PERSON_EMPLOYMENT_ID AND&#xD;&#xA;STATUS_VALUE='LOA' AND START_DATE &gt; @PA_START_DATE&#xD;&#xA;ORDER BY START_DATE DESC">
      <parameters>
        <parameter ID="@PERSON_EMPLOYMENT_ID" sfwDataType="int" />
        <parameter ID="@PA_START_DATE" sfwDataType="DateTime" />
      </parameters>
    </query>
    <query ID="IsEmpDataForContributionExists" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="Select Top 1 * from SGT_PERSON_EMPLOYMENT_DETAIL(NOLOCK) Where &#xD;&#xA;Person_employment_ID =@person_employment_id&#xD;&#xA;and ((@payrollstartDate between Start_date and ISNULL(End_date,getdate()))&#xD;&#xA;or (dateadd(m,1,@payrollstartDate)-1 between Start_Date and isnull(End_date,getdate())))&#xD;&#xA;and STATUS_VALUE='CONT'&#xD;&#xA;order by End_date desc">
      <parameters>
        <parameter ID="@person_employment_id" sfwDataType="int" />
        <parameter ID="@payrollstartDate" sfwDataType="DateTime" />
      </parameters>
    </query>
    <query ID="LoadLastPaycheckDate" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="select top 1 *,LAST_DATE_OF_SERVICE from SGT_WSS_EMPLOYMENT_CHANGE_REQUEST &#xD;&#xA;where STATUS_VALUE='PRCD' and isnull(LAST_DATE_OF_SERVICE,'') &lt;&gt; '' and (CHANGE_TYPE_VALUE = '' OR CHANGE_TYPE_VALUE = 'TEEM')&#xD;&#xA;and PERSON_ID=@PERSON_ID and ORG_ID=@ORG_ID &#xD;&#xA;order by EMPLOYMENT_CHANGE_REQUEST_ID desc">
      <parameters>
        <parameter ID="@PERSON_ID" sfwDataType="int" />
        <parameter ID="@ORG_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadPreviousEmploymentDetail" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT TOP 1 * FROM SGT_PERSON_EMPLOYMENT_DETAIL &#xD;&#xA;WHERE PERSON_EMPLOYMENT_ID = @PERSON_EMP_ID AND END_DATE IS NOT NULL &#xD;&#xA;ORDER BY END_DATE DESC &#x9;">
      <parameters>
        <parameter ID="@PERSON_EMP_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetStartDateByEmpDetailID" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT START_DATE FROM SGT_PERSON_EMPLOYMENT_DETAIL &#xD;&#xA;WHERE PERSON_EMPLOYMENT_DTL_ID=@EMP_DTL_ID">
      <parameters>
        <parameter ID="@EMP_DTL_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadOpenPreviousEmploymentDetail" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT TOP 1 * FROM SGT_PERSON_EMPLOYMENT_DETAIL &#xD;&#xA;WHERE PERSON_EMPLOYMENT_ID = @PERSON_EMP_ID AND END_DATE IS NULL &#xD;&#xA;ORDER BY END_DATE DESC ">
      <parameters>
        <parameter ID="@PERSON_EMP_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadLatestPersonEmploymentDetail" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT TOP 1 TYPE_VALUE, * FROM SGT_PERSON_EMPLOYMENT_DETAIL PED&#xD;&#xA;INNER JOIN SGT_PERSON_EMPLOYMENT PE ON PED.PERSON_EMPLOYMENT_ID = PE.PERSON_EMPLOYMENT_ID&#xD;&#xA;WHERE PE.PERSON_ID = @PERSON_ID AND (PE.END_DATE IS NULL OR PE.END_DATE &gt; GETDATE()) AND PED.TYPE_VALUE = 'PERM'">
      <parameters>
        <parameter ID="@PERSON_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadEnrolledPreviousEmploymentDetail" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT TOP 1 D.* FROM SGT_PERSON_EMPLOYMENT_DETAIL D WITH(NOLOCK)&#xD;&#xA;INNER JOIN SGT_PERSON_EMPLOYMENT E WITH(NOLOCK) ON E.PERSON_EMPLOYMENT_ID = D.PERSON_EMPLOYMENT_ID AND D.[START_DATE] != ISNULL(D.[END_DATE],'99991231')&#xD;&#xA;WHERE E.PERSON_ID = @PERSONID &#xD;&#xA;ORDER BY ISNULL(D.END_DATE, '99991231') DESC, D.[START_DATE] DESC">
      <parameters>
        <parameter ID="@PERSONID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadAllEmploymentDetailsForPerson" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT PED.* FROM SGT_PERSON_EMPLOYMENT_DETAIL PED&#xA;INNER JOIN SGT_PERSON_EMPLOYMENT PE ON PED.PERSON_EMPLOYMENT_ID = PE.PERSON_EMPLOYMENT_ID&#xA;WHERE PE.PERSON_ID = @PERSON_ID">
      <parameters>
        <parameter ID="@PERSON_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadPreviousEmploymentDetailWithinSameOrg" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT &#xD;&#xA;&#x9;TOP 1 D.*&#xD;&#xA;FROM&#xD;&#xA;&#x9;SGT_PERSON_EMPLOYMENT_DETAIL D WITH(NOLOCK)&#xD;&#xA;WHERE D.PERSON_EMPLOYMENT_ID = @PERSONEMPID AND D.PERSON_EMPLOYMENT_DTL_ID != @PEREMPDTLID&#xD;&#xA;--AND D.[START_DATE] != ISNULL(D.END_DATE, '99991231')&#xD;&#xA;ORDER BY D.[START_DATE] DESC, ISNULL(D.END_DATE, '99991231')">
      <parameters>
        <parameter ID="@PERSONEMPID" sfwDataType="int" />
        <parameter ID="@PEREMPDTLID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="GetEmpDetIdLinkedToPersonAccountId" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT TOP 1 D.* FROM SGT_PERSON_EMPLOYMENT E WITH(NOLOCK)&#xD;&#xA;JOIN SGT_PERSON_EMPLOYMENT_DETAIL D WITH(NOLOCK) ON E.PERSON_EMPLOYMENT_ID = D.PERSON_EMPLOYMENT_ID&#xD;&#xA;JOIN SGT_PERSON_ACCOUNT_EMPLOYMENT_DETAIL PAED WITH(NOLOCK) ON PAED.PERSON_EMPLOYMENT_DTL_ID = D.PERSON_EMPLOYMENT_DTL_ID&#xD;&#xA;WHERE E.PERSON_ID = @PERSONID &#xD;&#xA;AND PAED.PERSON_ACCOUNT_ID = @PERSONACCOUNTID &#xD;&#xA;AND PAED.ELECTION_VALUE IN ('ENLD','WAVD')&#xD;&#xA;AND D.END_DATE IS NOT NULL&#xD;&#xA;ORDER BY D.[START_DATE] DESC, ISNULL(D.END_DATE, '99991231') DESC">
      <parameters>
        <parameter ID="@PERSONID" sfwDataType="int" />
        <parameter ID="@PERSONACCOUNTID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="LoadLatestEmploymentDtl" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT&#xA;&#x9; TOP 1 PED.* &#xA;FROM&#xA;&#x9; SGT_PERSON_EMPLOYMENT_DETAIL PED WITH(NOLOCK) &#xA;&#x9;INNER &#xA;&#x9; JOIN SGT_PERSON_EMPLOYMENT PE WITH(NOLOCK)&#xA;&#x9; ON PED.PERSON_EMPLOYMENT_ID = PE.PERSON_EMPLOYMENT_ID &#xA;WHERE&#xA;&#x9; PE.PERSON_ID = @PERSON_ID AND&#xA;&#x9; (PE.END_DATE IS NULL OR PE.END_DATE &gt; GETDATE()) &#xA;ORDER BY  PED.[START_DATE] DESC,&#xA;&#x9;ISNULL(PED.END_DATE,&#xA;&#x9;'99991231') DESC">
      <parameters>
        <parameter ID="@PERSON_ID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="IsEmploymentGapGreaterThan31DaysForNewPersonAccounts" sfwQueryType="ScalarQuery" sfwDataType="int" sfwSql="WITH EmploymentRanked AS (&#xD;&#xA;&#x9;SELECT&#xD;&#xA;&#x9;&#x9;PERSON_ID,&#xD;&#xA;&#x9;&#x9;START_DATE,&#xD;&#xA;&#x9;&#x9;END_DATE,&#xD;&#xA;&#x9;&#x9;ROW_NUMBER() OVER (PARTITION BY PERSON_ID ORDER BY START_DATE DESC) AS RN&#xD;&#xA;&#x9;FROM SGT_PERSON_EMPLOYMENT&#xD;&#xA;&#x9;WHERE PERSON_ID = @PERSID&#xD;&#xA;)&#xD;&#xA;SELECT&#xD;&#xA;&#x9;MAX(CASE&#xD;&#xA;&#x9;&#x9;WHEN PE2.END_DATE IS NULL THEN 0&#xD;&#xA;&#x9;&#x9;ELSE ABS(DATEDIFF(DAY, PE1.START_DATE, PE2.END_DATE))&#xD;&#xA;&#x9;END) AS DATE_GAP&#xD;&#xA;FROM EmploymentRanked PE1&#xD;&#xA;LEFT JOIN EmploymentRanked PE2 ON PE1.PERSON_ID = PE2.PERSON_ID AND PE1.RN = 1 AND PE2.RN = 2">
      <parameters>
        <parameter ID="@PERSID" sfwDataType="int" />
      </parameters>
    </query>
    <query ID="IsPartialMonthLinkedToContributingEmploymentDetail" sfwQueryType="SelectQuery" sfwDataType="EntityTable" sfwSql="SELECT *&#xD;&#xA;FROM SGT_PERSON_ACCOUNT_EMPLOYMENT_DETAIL PAED&#xD;&#xA;INNER JOIN SGT_PERSON_EMPLOYMENT_DETAIL PED ON PAED.PERSON_EMPLOYMENT_DTL_ID = PED.PERSON_EMPLOYMENT_DTL_ID&#xD;&#xA;WHERE&#xD;&#xA;&#x9;PAED.PERSON_ACCOUNT_ID = @PERSONACCID&#xD;&#xA;&#x9;AND PED.START_DATE != ISNULL(PED.END_DATE,'99991231')&#xD;&#xA;&#x9;AND (&#xD;&#xA;&#x9;&#x9;@PAYPERIODSTARTDATE BETWEEN PED.START_DATE AND ISNULL(PED.END_DATE,'99991231')&#xD;&#xA;&#x9;&#x9;OR @PAYPERIODENDDATE BETWEEN PED.START_DATE AND ISNULL(PED.END_DATE,'99991231')&#xD;&#xA;&#x9;)&#xD;&#xA;&#x9;AND PED.STATUS_VALUE = 'CONT'">
      <parameters>
        <parameter ID="@PERSONACCID" sfwDataType="int" />
        <parameter ID="@PAYPERIODSTARTDATE" sfwDataType="DateTime" />
        <parameter ID="@PAYPERIODENDDATE" sfwDataType="DateTime" />
      </parameters>
    </query>
  </queries>
  <attributes>
    <attribute ID="PersonEmploymentDtlId" sfwType="Column" sfwValue="person_employment_dtl_id" sfwKeyNo="1" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="True" sfwDataType="int" sfwRequired="False" />
    <attribute ID="PersonEmploymentId" sfwType="Column" sfwValue="person_employment_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="StartDate" sfwType="Column" sfwValue="start_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="EndDate" sfwType="Column" sfwValue="end_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="HourlyDescription" sfwType="Description" sfwValue="hourly_description" />
    <attribute ID="HourlyId" sfwType="Column" sfwValue="hourly_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="311" sfwDataType="int" sfwRequired="False" />
    <attribute ID="HourlyValue" sfwType="Column" sfwValue="hourly_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="SeasonalDescription" sfwType="Description" sfwValue="seasonal_description" />
    <attribute ID="SeasonalId" sfwType="Column" sfwValue="seasonal_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="312" sfwDataType="int" sfwRequired="False" />
    <attribute ID="SeasonalValue" sfwType="Column" sfwValue="seasonal_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="TypeDescription" sfwType="Description" sfwValue="type_description" />
    <attribute ID="TypeId" sfwType="Column" sfwValue="type_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="313" sfwDataType="int" sfwRequired="False" />
    <attribute ID="TypeValue" sfwType="Column" sfwValue="type_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="JobClassDescription" sfwType="Description" sfwValue="job_class_description" />
    <attribute ID="JobClassId" sfwType="Column" sfwValue="job_class_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="314" sfwDataType="int" sfwRequired="False" />
    <attribute ID="JobClassValue" sfwType="Column" sfwValue="job_class_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="TermBeginDate" sfwType="Column" sfwValue="term_begin_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="OfficialListDescription" sfwType="Description" sfwValue="official_list_description" />
    <attribute ID="OfficialListId" sfwType="Column" sfwValue="official_list_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="318" sfwDataType="int" sfwRequired="False" />
    <attribute ID="OfficialListValue" sfwType="Column" sfwValue="official_list_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="RecertifiedDate" sfwType="Column" sfwValue="recertified_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="StatusDescription" sfwType="Description" sfwValue="status_description" />
    <attribute ID="StatusId" sfwType="Column" sfwValue="status_id" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwCodeID="310" sfwDataType="int" sfwRequired="False" />
    <attribute ID="StatusValue" sfwType="Column" sfwValue="status_value" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="4" />
    <attribute ID="RecertifiedBatchRunFlag" sfwType="Column" sfwValue="recertified_batch_run_flag" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="1" />
    <attribute ID="Loa320LetterSentFlag" sfwType="Column" sfwValue="loa_320_letter_sent_flag" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="1" />
    <attribute ID="Loa365LetterSentFlag" sfwType="Column" sfwValue="loa_365_letter_sent_flag" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="1" />
    <attribute ID="Loa730LetterSentFlag" sfwType="Column" sfwValue="loa_730_letter_sent_flag" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="True" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="1" />
    <attribute ID="CreatedBy" sfwType="Column" sfwValue="created_by" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="50" />
    <attribute ID="CreatedDate" sfwType="Column" sfwValue="created_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="ModifiedBy" sfwType="Column" sfwValue="modified_by" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="string" sfwRequired="False" sfwLength="50" />
    <attribute ID="ModifiedDate" sfwType="Column" sfwValue="modified_date" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="DateTime" sfwRequired="False" />
    <attribute ID="UpdateSeq" sfwType="Column" sfwValue="update_seq" sfwKeyNo="0" sfwIsSequence="False" sfwIsNull="False" sfwIsIdentity="False" sfwDataType="int" sfwRequired="False" />
    <attribute ID="objPersonEmployment" sfwType="Object" sfwEntity="entPersonEmployment" sfwValue="ibusPersonEmployment" />
    <attribute sfwDataType="string" sfwType="Property" ID="DerivedMemberTypeDescription" sfwValue="icdoPersonEmploymentDetail.derived_member_type_description" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrSuppressWarnings" sfwValue="icdoPersonEmploymentDetail.istrSuppressWarnings" />
    <attribute sfwDataType="string" sfwType="Property" ID="NewJobClassValue" sfwValue="icdoPersonEmploymentDetail.new_job_class_value" />
    <attribute sfwDataType="string" sfwType="Property" ID="NewTypeValue" sfwValue="icdoPersonEmploymentDetail.new_type_value" />
    <attribute sfwDataType="string" sfwType="Property" ID="NewOfficialListValue" sfwValue="icdoPersonEmploymentDetail.new_official_list_value" />
    <attribute sfwDataType="string" sfwType="Property" ID="NewStatusValue" sfwValue="icdoPersonEmploymentDetail.new_status_value" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrIsDCPlan" sfwValue="istrIsDCPlan" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrIsDBPlan" sfwValue="istrIsDBPlan" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrIs457" sfwValue="istrIs457" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintPlanIdGroupHealth" sfwValue="iintPlanIdGroupHealth" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintPlanIdVision" sfwValue="iintPlanIdVision" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintPlanIDDental" sfwValue="iintPlanIDDental" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintPlanIdHMO" sfwValue="iintPlanIdHMO" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintPlanidMedicare" sfwValue="iintPlanidMedicare" />
    <attribute sfwType="Collection" sfwEntity="entPersonAccountEmploymentDetail" ID="lstPersonAccountEmpDtl" sfwValue="iclbPersonAccountEmpDtl" />
    <attribute sfwType="Collection" sfwEntity="entPersonAccount" ID="lstPersonAccount" sfwValue="icolPersonAccount" />
    <attribute sfwDataType="datetime" sfwType="Property" ID="EndDateNoNull" sfwValue="icdoPersonEmploymentDetail.end_date_no_null" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrEmploymentStartDateLongFormat" sfwValue="istrEmploymentStartDateLongFormat" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrBeginningOfTheNextFiscalYear" sfwValue="istrBeginningOfTheNextFiscalYear" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrdtLastContributiondate" sfwValue="istrdtLastContributiondate" />
    <attribute sfwDataType="string" sfwType="Property" ID="FutureDate" sfwValue="Future_Date" />
    <attribute sfwDataType="string" sfwType="Property" ID="StartLongDate" sfwValue="icdoPersonEmploymentDetail.start_long_date" />
    <attribute ID="objRetirement" sfwType="Object" sfwEntity="entPersonAccountRetirement" sfwValue="ibusRetirement" />
    <attribute sfwDataType="string" sfwType="Property" ID="Is24MonthLOA" sfwValue="Is24MonthLOA" />
    <attribute sfwDataType="boolean" sfwType="Property" ID="IsRecertified" sfwValue="icdoPersonEmploymentDetail.is_recertified" />
    <attribute sfwDataType="string" sfwType="Property" ID="EmploymentDetailStartDatePlus12months" sfwValue="EmploymentDetailStartDatePlus12months" />
    <attribute sfwDataType="string" sfwType="Property" ID="EmploymentDetailStartDatePlus24Months" sfwValue="EmploymentDetailStartDatePlus24Months" />
    <attribute sfwDataType="boolean" sfwType="Property" ID="IsVSC36orMore" sfwValue="IsVSC36orMore" />
    <attribute sfwDataType="boolean" sfwType="Property" ID="IsVSC6orMore" sfwValue="IsVSC6orMore" />
    <attribute sfwDataType="string" sfwType="Property" ID="RecertificationNullAndEndaDateNotNullIdentifier" sfwValue="RecertificationNullAndEndaDateNotNullIdentifier" />
    <attribute sfwDataType="string" sfwType="Property" ID="RecertifiedDateNullIDentifier" sfwValue="RecertifiedDateNullIDentifier" />
    <attribute sfwDataType="string" sfwType="Property" ID="IstrPlanRetirementType" sfwValue="istrPlanRetirementType" />
    <attribute sfwDataType="datetime" sfwType="Property" ID="IdtEmpStartDate" sfwValue="idtEmpStartDate" />
    <attribute sfwDataType="string" sfwType="Property" ID="IsDBOrDC" sfwValue="IsDBOrDC" />
    <attribute sfwDataType="datetime" sfwType="Property" ID="IdtRetirementDate" sfwValue="idtRetirementDate" />
    <attribute sfwDataType="string" sfwType="Property" ID="EndDateLongDate" sfwValue="icdoPersonEmploymentDetail.end_date_long_date" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecMainTempEEContribution" sfwValue="idecMainTempEEContribution" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintPlanIDMain" sfwValue="iintPlanIDMain" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecDCTempEEContribution" sfwValue="idecDCTempEEContribution" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecEERHIC" sfwValue="idecEERHIC" />
    <attribute sfwDataType="int" sfwType="Property" ID="IintPlanIDDC" sfwValue="iintPlanIDDC" />
    <attribute sfwDataType="decimal" sfwType="Property" ID="IdecDCTempEEContributionExcludingRHIC" sfwValue="idecDCTempEEContributionExcludingRHIC" />
    <attribute sfwType="Collection" sfwEntity="entPersonAccountEmploymentDetail" ID="lstAllPersonAccountEmpDtl" sfwValue="iclbAllPersonAccountEmpDtl" />
    <attribute sfwType="Collection" sfwEntity="entWssPersonAccountEnrollmentRequest" ID="lstEnrollmentRequest" sfwValue="iclbEnrollmentRequest" />
    <attribute ID="lstrPersonName" sfwDataType="string" sfwPrivate="False" sfwValue="istrPersonName" sfwType="Property" />
    <attribute ID="lintPersonId" sfwDataType="int" sfwPrivate="False" sfwValue="iintPersonID" sfwType="Property" sfwImportant="False" />
    <attribute ID="lstrmiisingMothYear" sfwDataType="string" sfwPrivate="False" sfwValue="istrMissingMonthYear" sfwType="Property" />
    <attribute ID="lstrMissingStartDate" sfwDataType="string" sfwPrivate="False" sfwValue="istrMissingStartDate" sfwType="Property" />
    <attribute ID="lstrMissingEndDate" sfwDataType="string" sfwPrivate="False" sfwValue="istrMissingEndDate" sfwType="Property" />
    <attribute sfwValue="cobra_letter_status_id" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="int" sfwDBDataType="int" sfwIsNull="False" ID="CobraLetterStatusId" sfwCaption="Cobra Letter Status" sfwCodeID="7019" />
    <attribute sfwValue="cobra_letter_status_value" sfwType="Column" sfwKeyNo="0" sfwIsIdentity="False" sfwDataType="string" sfwDBDataType="varchar" sfwLength="4" sfwIsNull="True" ID="CobraLetterStatusValue" sfwCaption="Cobra Letter Status" />
    <attribute sfwType="Description" ID="CobraLetterStatusDescription" sfwCaption="Cobra Letter Status" sfwValue="cobra_letter_status_description" />
  </attributes>
  <objectmethods>
    <method ID="LoadJobClassByEmployerCategory" sfwReturnType="Collection" sfwObjectID="cdoCodeValue" sfwEntity="entPostRetirementDeathApplication" />
    <method ID="LoadAllPersonAccountEmploymentDetails" sfwReturnType="Void" />
    <method ID="LoadEnrollmentRequest" sfwReturnType="Void" />
  </objectmethods>
</entity>