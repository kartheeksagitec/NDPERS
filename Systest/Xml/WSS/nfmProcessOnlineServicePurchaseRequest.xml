<form ID="nfmProcessOnlineServicePurchaseRequest" sfwActive="True" sfwStatus="Review" sfwType="WorkflowMap" sfwRemoveDeletedActivities="False">
  
  <activity sfwDisplayName="Process Online Service Purchase Request" sfwReferenceID="contact_reference_id" sfwFirstActivityFlag="True" sfwLastActivityFlag="False">
    <form sfwMode="new" sfwFormName="wfmContactTicketMaintenance" sfwFormMode="update">
      <parameter sfwParameterSource="FindContactTicket" sfwParamaterName="Aintcontactticketid" sfwFieldName="contact_ticket_id" sfwParameterValue="contact_reference_id" sfwValueSource="Parameter" sfwDataType="int" />
    </form>
    <form sfwMode="update" sfwFormName="wfmContactTicketMaintenance">
      <parameter sfwParameterSource="FindContactTicket" sfwParamaterName="Aintcontactticketid" sfwFieldName="contact_ticket_id" sfwParameterValue="contact_reference_id" sfwValueSource="Parameter" sfwDataType="int" />
    </form>
  </activity>
  <activity sfwDisplayName="Audit Prepare Cost Statement" sfwReferenceID="reference_id" sfwFirstActivityFlag="False" sfwLastActivityFlag="False">
    <form sfwMode="new" sfwFormName="wfmServicePurchaseHeaderLookup">
      <parameter sfwParameterSource="Criteria Field" sfwFieldName="SGPH.person_id" sfwDataType="int" sfwParamaterName="SGPH.person_id" sfwParameterValue="ibusProcessInstance.icdoProcessInstance.person_id" sfwValueSource="Object Field" />
    </form>
    <form sfwMode="update" sfwFormName="wfmServicePurchaseHeaderMaintenance">
      <parameter sfwParameterSource="FindServicePurchaseHeader" sfwParamaterName="Aintservicepurchaseheaderid" sfwDataType="int" sfwFieldName="aintReferenceID" sfwParameterValue="reference_id" sfwValueSource="Parameter" />
    </form>
  </activity>
  <activity sfwDisplayName="Generate Service Credit Purchase Letter" sfwReferenceID="reference_id" sfwFirstActivityFlag="False" sfwLastActivityFlag="True">
    <form sfwMode="new" sfwFormName="wfmServicePurchaseHeaderLookup">
      <parameter sfwParameterSource="Criteria Field" sfwFieldName="SGPH.person_id" sfwDataType="int" sfwParamaterName="SGPH.person_id" sfwParameterValue="ibusProcessInstance.icdoProcessInstance.person_id" sfwValueSource="Object Field" />
    </form>
    <form sfwMode="update" sfwFormName="wfmServicePurchaseHeaderMaintenance">
      <parameter sfwParameterSource="FindServicePurchaseHeader" sfwParamaterName="Aintservicepurchaseheaderid" sfwDataType="int" sfwFieldName="aintReferenceID" sfwParameterValue="reference_id" sfwValueSource="Parameter" />
    </form>
  </activity>
  <ProcessVariables>
    <ProcessVariable ID="contact_reference_id" sfwDataType="int" sfwObjectID="busProcessInstance" sfwObjectField="icdoProcessInstance.contact_ticket_id" />
    <ProcessVariable ID="reference_id" sfwObjectID="busServicePurchaseHeader" sfwObjectField="icdoServicePurchaseHeader.service_purchase_header_id" />
  </ProcessVariables>
</form>